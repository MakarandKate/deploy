"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Temp1 = void 0;
var ReferenceData_1 = require("../utils/ReferenceData");
var commonTempData_1 = require("./commonTempData");
var Temp1 = /** @class */ (function () {
    function Temp1(data) {
        this.data = data;
        this.finalHsnTableObj = {};
        this.isTax = false;
        this.sameState = false;
    }
    Temp1.prototype.main = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _b = (_a = "\n      <style>\n      ".concat(commonTempData_1.commonTempData.tallyTemplateCss(), "\n      </style>\n      <span class=\"st-inv-mobi-screen\">\n        <style>").concat(commonTempData_1.commonTempData.mobileCss(), "</style>\n      </span>\n      <span class=\"invoice-template-main\">\n        <div \n          class=\"container-new arial inv-body-holder\"\n          style=\"width:").concat(this.data.pageWidth || 210, "mm;background: white;padding: 0;visibility: visible;-webkit-print-color-adjust: exact !important;color-adjust: exact !important;\">\n          ").concat(this.header(), "\n          ").concat(this.templateBody(), "\n          ")).concat;
                        return [4 /*yield*/, this.footer()];
                    case 1: return [2 /*return*/, _b.apply(_a, [_c.sent(), "\n          <div class=\"inv-bottom-wrapper\" style=\"margin:0 !important; padding:0 !important\">\n            <div style=\"height: 1px; width: 100%;\">\n            </div>\n            <div style=\"height: 9px;display: flow-root;width:100%;text-align:right;font-size: 12px;color: #d3d3d3;\" class=\"f-16 inv-bottom\">\n            </div>\n          </div>\n        </div>\n      </span> \n      "])];
                }
            });
        });
    };
    Temp1.prototype.header = function () {
        return "\n        ".concat(this.sellerDetails(), "\n        ").concat(this.invoiceTitle(), "\n        ").concat(this.partyDetails(), " \n        ").concat(this.seconadryPartyDetails(), "\n      ");
    };
    Temp1.prototype.footer = function () {
        return __awaiter(this, void 0, void 0, function () {
            var amountCalculation, _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        amountCalculation = '';
                        amountCalculation = this.footerAmountCalculation();
                        _b = (_a = "\n        ".concat(amountCalculation, "\n        ").concat(this.hsnSacTable(), "\n        ")).concat;
                        return [4 /*yield*/, this.footerBankDetails()];
                    case 1: return [2 /*return*/, _b.apply(_a, [_c.sent(), "\n        "]).concat(this.footerTNCAndNotes(), "\n        ")];
                }
            });
        });
    };
    // S:  HSN Table Code
    Temp1.prototype.addSameTaxPercentageObjs = function (mainObj) {
        var sanitizedObj = {};
        var _loop_1 = function (key) {
            var holder = {};
            mainObj[key].forEach(function (d) {
                if (d.taxPercentage != 0) {
                    if (holder.hasOwnProperty(d.taxPercentage)) {
                        holder[d.taxPercentage] = {
                            "taxAmount": (holder[d.taxPercentage].taxAmount + d.taxAmount),
                            "itemPrice": (holder[d.taxPercentage].itemPrice + (d.itemPrice * d.quantity) - (d.isIncTax ? d.taxAmount : 0) - (d.discount || 0))
                        };
                    }
                    else {
                        holder[d.taxPercentage] = {
                            "taxAmount": d.taxAmount,
                            "itemPrice": (d.itemPrice * d.quantity) - (d.isIncTax ? d.taxAmount : 0) - (d.discount || 0)
                        };
                    }
                }
            });
            var array = [];
            for (var prop in holder) {
                array.push({ taxPercentage: prop, taxAmount: holder[prop].taxAmount, taxableValue: holder[prop].itemPrice });
            }
            if (array.length) {
                sanitizedObj[key] = array;
            }
        };
        for (var key in mainObj) {
            _loop_1(key);
        }
        return sanitizedObj;
    };
    Temp1.prototype.commonHsnTableCode = function (el) {
        var isIncTax = false;
        if (el.spIncTax) {
            isIncTax = true;
        }
        return {
            'taxAmount': el.unitGstAmount * el.quantity || 0,
            'itemPrice': el.basePrice,
            'taxPercentage': el.taxPercentage || 0,
            'quantity': el.quantity || 1,
            'isIncTax': isIncTax,
            'discount': (el === null || el === void 0 ? void 0 : el.totalDiscount) || 0
        };
    };
    Temp1.prototype.calculationForHsnTable = function (el, hsnTableObj) {
        if (el.hsn || el.taxPercentage) {
            if (el.hsn) {
                if (hsnTableObj[el.hsn]) {
                    hsnTableObj[el.hsn].push(__assign({}, this.commonHsnTableCode(el)));
                }
                else {
                    hsnTableObj[el.hsn] = [__assign({}, this.commonHsnTableCode(el))];
                }
            }
            else {
                if (el.taxPercentage || el.totalAmount) {
                    if (hsnTableObj['noHsn']) {
                        hsnTableObj['noHsn'].push(__assign({}, this.commonHsnTableCode(el)));
                    }
                    else {
                        hsnTableObj['noHsn'] = [__assign({}, this.commonHsnTableCode(el))];
                    }
                }
            }
        }
        return hsnTableObj;
    };
    Temp1.prototype.hsnSacTable = function () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9;
        if ((((_b = (_a = this.data) === null || _a === void 0 ? void 0 : _a.settings) === null || _b === void 0 ? void 0 : _b.pSetTaxMrpHsnPrintStatus) === false)) {
            return '';
        }
        if (!Object.keys(this.finalHsnTableObj).length) {
            return '';
        }
        var partyEl = ((_e = (_d = (_c = this.data) === null || _c === void 0 ? void 0 : _c.bill) === null || _d === void 0 ? void 0 : _d.partyData) === null || _e === void 0 ? void 0 : _e.profileData) || null;
        var partyInfo = partyEl;
        var secondaryPartyInfo = ((_h = (_g = (_f = this.data) === null || _f === void 0 ? void 0 : _f.bill) === null || _g === void 0 ? void 0 : _g.secondaryPartyData) === null || _h === void 0 ? void 0 : _h.profileData) || null;
        if (partyEl && ((partyEl === null || partyEl === void 0 ? void 0 : partyEl.addressState) == ((_k = (_j = this.data) === null || _j === void 0 ? void 0 : _j.profile) === null || _k === void 0 ? void 0 : _k.addressProvience))) {
            this.sameState = true;
        }
        else if (!(partyEl === null || partyEl === void 0 ? void 0 : partyEl.addressState) || !((_m = (_l = this.data) === null || _l === void 0 ? void 0 : _l.profile) === null || _m === void 0 ? void 0 : _m.addressProvience)) {
            this.sameState = true;
        }
        var stateCode = (_o = partyInfo === null || partyInfo === void 0 ? void 0 : partyInfo.gstNumber) === null || _o === void 0 ? void 0 : _o.substring(0, 2);
        var profileStateCod = (_r = (_q = (_p = this.data) === null || _p === void 0 ? void 0 : _p.profile) === null || _q === void 0 ? void 0 : _q.gstin) === null || _r === void 0 ? void 0 : _r.substring(0, 2);
        var userState = (_t = (_s = this.data) === null || _s === void 0 ? void 0 : _s.profile) === null || _t === void 0 ? void 0 : _t.addressProvience;
        var partyState = (_v = (_u = this.data) === null || _u === void 0 ? void 0 : _u.bill) === null || _v === void 0 ? void 0 : _v.deliveryProvience;
        if (stateCode && profileStateCod) {
            this.sameState = stateCode != profileStateCod ? false : true;
        }
        else if (userState && partyState) {
            this.sameState = userState != partyState ? false : true;
        }
        if (this.sameState
            && secondaryPartyInfo
            && (secondaryPartyInfo === null || secondaryPartyInfo === void 0 ? void 0 : secondaryPartyInfo.gstNumber)
            && ((_w = secondaryPartyInfo === null || secondaryPartyInfo === void 0 ? void 0 : secondaryPartyInfo.gstNumber) === null || _w === void 0 ? void 0 : _w.length)
            && ((_z = (_y = (_x = this.data) === null || _x === void 0 ? void 0 : _x.profile) === null || _y === void 0 ? void 0 : _y.gstin) === null || _z === void 0 ? void 0 : _z.length)
            || this.sameState
                && secondaryPartyInfo
                && ((_2 = (_1 = (_0 = this.data) === null || _0 === void 0 ? void 0 : _0.bill) === null || _1 === void 0 ? void 0 : _1.deliveryProvience) === null || _2 === void 0 ? void 0 : _2.length)
                && ((_5 = (_4 = (_3 = this.data) === null || _3 === void 0 ? void 0 : _3.profile) === null || _4 === void 0 ? void 0 : _4.addressProvience) === null || _5 === void 0 ? void 0 : _5.length)) {
            var secondaryStateCode = (_6 = secondaryPartyInfo === null || secondaryPartyInfo === void 0 ? void 0 : secondaryPartyInfo.gstNumber) === null || _6 === void 0 ? void 0 : _6.substring(0, 2);
            if (secondaryStateCode && profileStateCod) {
                this.sameState = secondaryStateCode != profileStateCod ? false : true;
            }
            else if (userState && partyState) {
                this.sameState = userState != partyState ? false : true;
            }
        }
        var html = '';
        //wrapper class
        html += "<div class=\"inv-section-hsn-table-wrapper\" style=\"margin:0 !important; padding:0 !important\">\n              <div style=\"height: 1px; width: 100%;\"></div>";
        //S: Main div
        html += "<div class=\"margin-10-new inv-section-hsn-table\" style=\"margin: 0 23px;border: 1px solid #000000;border-left: 0;\">";
        html += "<table style=\"width: 100%; text-align: center;table-layout: fixed;\">";
        html += "<thead class=\"no-b-btm\" style=\"border-bottom: 1px solid #000000;-webkit-print-color-adjust: exact !important;color-adjust: exact !important;\">";
        var gstStr = 'SGST';
        var profileStateCode = (_9 = (_8 = (_7 = this.data) === null || _7 === void 0 ? void 0 : _7.profile) === null || _8 === void 0 ? void 0 : _8.gstin) === null || _9 === void 0 ? void 0 : _9.substring(0, 2);
        if (ReferenceData_1.Arrays.UTSC.indexOf(profileStateCode) != -1) {
            gstStr = 'UGST';
        }
        else {
            gstStr = 'SGST';
        }
        html += "\n        <tr>\n        <td class=\"font-12 padding-5555\" rowspan=\"2\"\n          style=\"text-transform:uppercase;color:#000;text-align: center !important;padding:0 2px;border-right:0;border-top:0;\">\n          HSN/SAC</td>\n        <td class=\"font-12 padding-5555\" rowspan=\"2\"\n          style=\"text-transform:uppercase;color:#000;text-align: center !important;padding:0 2px;border-right:0;border-top:0;\">\n          Taxable value</td>\n        <td class=\"font-10 padding-5555\" colspan=\"2\"\n          style=\"text-transform:uppercase;color:#000;text-align: center;font-weight: normal;padding:0 2px;border-right:0;border-bottom:0;border-top:0;\">\n          ".concat((!this.sameState && this.isTax) ? 'IGST' : "".concat(gstStr), "\n        </td>");
        if (this.sameState && this.isTax) {
            html += "<td class=\"font-10 padding-5555\" colspan=\"2\"\n          style=\"text-transform:uppercase;color:#000;text-align: center;font-weight: normal;padding:0 2px;border-right:0;border-bottom:0;border-top:0;\">\n          CGST</td>";
        }
        html += "<td class=\"font-12 padding-5555\" rowspan=\"2\"\n          style=\"text-transform:uppercase;color:#000;text-align: center;padding:0 2px;border-right:0;border-top:0;border-right: 0;\">\n          Total Tax</td>\n        </tr>\n        <tr>\n          <td class=\"font-10 padding-5555\"\n            style=\"font-weight: normal;text-transform:uppercase;color:#000;text-align: left;padding:0 2px;border-right:0;\">\n            Rate</td>\n          <td class=\"font-10 padding-5555\"\n            style=\"font-weight: normal;text-transform:uppercase;color:#000;text-align: right !important;padding:0 2px;border-right:0;\">\n            Amt</td>";
        if (this.sameState && this.isTax) {
            html += "<td class=\"font-10 padding-5555\"\n                style=\"font-weight: normal;text-transform:uppercase;color:#000;text-align: left;padding:0 2px;border-right:0;\">\n                Rate</td>\n              <td class=\"font-10 padding-5555\"\n                style=\"font-weight: normal;text-transform:uppercase;color:#000;text-align: right;padding:0 2px;border-right:0;\">\n                Amt</td>";
        }
        html += "</tr>";
        html += "</thead>";
        html += "<tbody>";
        html += this.makeHsnSacRows();
        html += "</tbody>";
        html += "</table>";
        //E: Main div
        html += "</div>";
        //wrapper div
        html += "</div>";
        return html;
    };
    Temp1.prototype.makeHsnSacRows = function () {
        var html = '';
        for (var key in this.finalHsnTableObj) {
            if (this.finalHsnTableObj[key]) {
                html += this.hsnSacRow(key, this.finalHsnTableObj[key]);
            }
        }
        return html;
    };
    Temp1.prototype.hsnSacRow = function (hsnCode, hsnData) {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;
        var html = '';
        for (var i = 0; i < hsnData.length; i++) {
            var element = hsnData[i];
            html += "\n          <tr>\n          <td class=\"padding-5555 font-12\" style=\"color:#000;border-bottom: 0;border-top: 0;padding: 0 2px;border-right:0;text-align: center;\">\n            ".concat((hsnCode != 'noHsn') ? hsnCode : '', "</td>\n          <td class=\"padding-5555 font-12\"\n            style=\"color:#000;border-bottom: 0;border-top: 0;padding: 0 2px;border-right:0;text-align: center !important;\">\n            ").concat(commonTempData_1.commonTempData.unitAdjuster((element === null || element === void 0 ? void 0 : element.taxableValue) || 0), "</td>\n          <td class=\"padding-5555 font-12\" style=\"color:#000;border-bottom: 0;border-top: 0;padding: 0 2px;border-right:0;text-align: left;\">\n          ").concat((!this.sameState && this.isTax) ? (_b = (_a = (+(element === null || element === void 0 ? void 0 : element.taxPercentage))) === null || _a === void 0 ? void 0 : _a.toFixed(2)) === null || _b === void 0 ? void 0 : _b.replace(/\.00$/, '') : (_d = (_c = (+(element === null || element === void 0 ? void 0 : element.taxPercentage) / 2)) === null || _c === void 0 ? void 0 : _c.toFixed(2)) === null || _d === void 0 ? void 0 : _d.replace(/\.00$/, ''), "%\n          </td>\n          <td class=\"padding-5555 font-12\" style=\"color:#000;border-bottom: 0;border-top: 0;padding: 0 2px;border-right:0;text-align: right;\">\n          ").concat((!this.sameState && this.isTax) ? (_f = (_e = (element === null || element === void 0 ? void 0 : element.taxAmount)) === null || _e === void 0 ? void 0 : _e.toFixed(2)) === null || _f === void 0 ? void 0 : _f.replace(/\.00$/, '') : (_h = (_g = ((element === null || element === void 0 ? void 0 : element.taxAmount) / 2)) === null || _g === void 0 ? void 0 : _g.toFixed(2)) === null || _h === void 0 ? void 0 : _h.replace(/\.00$/, ''), "</td>\n          ");
            if (this.sameState && this.isTax) {
                html += "<td class=\"padding-5555 font-12\" style=\"color:#000;border-bottom: 0;border-top: 0;padding: 0 2px;border-right:0;text-align: left;\">\n            ".concat((_k = (_j = (+(element === null || element === void 0 ? void 0 : element.taxPercentage) / 2)) === null || _j === void 0 ? void 0 : _j.toFixed(2)) === null || _k === void 0 ? void 0 : _k.replace(/\.00$/, ''), "%\n            </td>\n            <td class=\"padding-5555 font-12\" style=\"color:#000;border-bottom: 0;border-top: 0;padding: 0 2px;border-right:0;text-align: right;\">\n            ").concat((_m = (_l = ((element === null || element === void 0 ? void 0 : element.taxAmount) / 2)) === null || _l === void 0 ? void 0 : _l.toFixed(2)) === null || _m === void 0 ? void 0 : _m.replace(/\.00$/, ''), "</td>\n            ");
            }
            html += "<td class=\"padding-5555 font-12\"\n            style=\"color:#000;border-bottom: 0;border-top: 0;padding: 0 2px;border-right:0;text-align: right;border-right: 0;\">\n            ".concat((_p = (_o = (element === null || element === void 0 ? void 0 : element.taxAmount)) === null || _o === void 0 ? void 0 : _o.toFixed(2)) === null || _p === void 0 ? void 0 : _p.replace(/\.00$/, ''), "</td>\n            </tr>\n            ");
        }
        return html;
    };
    // E:  HSN Table Code
    Temp1.prototype.sellerDetails = function () {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        // S: OWNER DETAILS
        var html = "";
        var el = ((_a = this.data) === null || _a === void 0 ? void 0 : _a.profile) || null;
        // close these two divs in last
        html += "\n        <div class=\"inv-header-wrapper\" style=\"margin:0 !important; padding:0 !important\">\n        <div style=\"height: 1px; width: 100%;\"></div>\n        <div style=\"display: flex;flex-wrap:wrap;width: 100%;align-items: flex-start;background: white;padding:0 25px;\"\n        class=\"top padding-002510-new inv-header\">\n        <div style=\"display: flow-root;width:100%;text-align:right;font-size: 12px;color: #d3d3d3;\" class=\"f-16\">\n          ".concat(((_b = this.data) === null || _b === void 0 ? void 0 : _b.addressTo) || '', "\n        </div>\n        <div style=\"display: flow-root;width: 80%;\">");
        if (el === null || el === void 0 ? void 0 : el.legalName) {
            html += "\n            <div style=\"display: flow-root;font-weight: bold;color: ".concat((_d = (_c = this.data) === null || _c === void 0 ? void 0 : _c.bill) === null || _d === void 0 ? void 0 : _d.color, "\" class=\"font-24 f-b\">\n                ").concat(el === null || el === void 0 ? void 0 : el.legalName, "\n                <img class=\"addProfileInfo icons-height no-print\" src=\"/assets/icons/edit-inv.svg\">\n            </div>");
        }
        if ((el === null || el === void 0 ? void 0 : el.addressLine1) || (el === null || el === void 0 ? void 0 : el.addressProvience)) {
            html += "\n            <div style=\"display: flow-root;font-size: 16px;color: #000;\" class=\"f-16\">\n                ".concat(el === null || el === void 0 ? void 0 : el.addressLine1).concat((el === null || el === void 0 ? void 0 : el.addressProvience) ? ', ' + (el === null || el === void 0 ? void 0 : el.addressProvience) : '').concat((el === null || el === void 0 ? void 0 : el.addressPostalCode) ? ', ' + (el === null || el === void 0 ? void 0 : el.addressPostalCode) : '', "\n            </div>\n            ");
        }
        if ((el === null || el === void 0 ? void 0 : el.contactPersonPhone) && (el === null || el === void 0 ? void 0 : el.contactPersonPhone) != '0') {
            html += "\n            <div style=\"display: flow-root;font-size: 16px;color: #000;\" class=\"f-16\">\n                ".concat(el === null || el === void 0 ? void 0 : el.contactPersonPhone, "\n            </div>\n            ");
        }
        if (el === null || el === void 0 ? void 0 : el.contactPersonEmail) {
            html += "\n            <div style=\"display: flow-root;font-size: 16px;color: #000;\" class=\"f-16\">\n                ".concat(el === null || el === void 0 ? void 0 : el.contactPersonEmail, "\n            </div>\n            ");
        }
        if (el === null || el === void 0 ? void 0 : el.gstin) {
            html += "\n          <div style=\"display: flow-root;font-size: 16px;color: #000;font-weight: bold;\" class=\"f-16\">\n              ".concat(el === null || el === void 0 ? void 0 : el.gstin, "\n          </div>\n          ");
        }
        if (el === null || el === void 0 ? void 0 : el.fssaiNumber) {
            html += "\n        <div style=\"display: flow-root;font-size: 16px;color: #000;font-weight: bold;\" class=\"f-16\">\n            FSSAI No. : ".concat(el === null || el === void 0 ? void 0 : el.fssaiNumber, "\n        </div>\n        ");
        }
        if (el === null || el === void 0 ? void 0 : el.licenseNumber) {
            html += "\n        <div style=\"display: flow-root;font-size: 16px;color: #000;font-weight: bold;\" class=\"f-16\">\n            License No. : ".concat(el === null || el === void 0 ? void 0 : el.licenseNumber, "\n        </div>\n        ");
        }
        if ((el === null || el === void 0 ? void 0 : el.additionalDateFieldTitle)
            && ((el.additionalDateFieldTitle + "").trim()).length > 0
            && (el === null || el === void 0 ? void 0 : el.additionalDateFieldValue)
            && (((el === null || el === void 0 ? void 0 : el.additionalDateFieldValue) + "").trim()).length > 0) {
            html += "\n            <div style=\"display: flow-root;font-size: 14px;color: #000;\" class=\"f-14 m-5-new\">\n              <b>".concat(el.additionalDateFieldTitle, ":</b> ").concat(el === null || el === void 0 ? void 0 : el.additionalDateFieldValue, "\n            </div>\n            ");
        }
        if ((el === null || el === void 0 ? void 0 : el.additionalInputFieldTitle)
            && (((el === null || el === void 0 ? void 0 : el.additionalInputFieldTitle) + "").trim()).length > 0
            && (el === null || el === void 0 ? void 0 : el.additionalInputFieldValue)
            && (((el === null || el === void 0 ? void 0 : el.additionalInputFieldValue) + "").trim()).length > 0) {
            html += "\n            <div style=\"display: flow-root;font-size: 14px;color: #000;\" class=\"f-14 m-5-new\">\n              <b>".concat(el.additionalInputFieldTitle, ":</b> ").concat(el === null || el === void 0 ? void 0 : el.additionalInputFieldValue, "\n            </div>\n            ");
        }
        //closing one div out of two
        html += "</div>";
        if ((_f = (_e = this.data) === null || _e === void 0 ? void 0 : _e.profile) === null || _f === void 0 ? void 0 : _f.logoLink) {
            html += "\n            <div style=\"display: flow-root;width: 20%;\">\n              <img src=\"".concat((_h = (_g = this.data) === null || _g === void 0 ? void 0 : _g.profile) === null || _h === void 0 ? void 0 : _h.logoLink, "\" style=\"display: block;margin-left: auto;width:70%;\">\n            </div>\n            ");
        }
        //closing last div
        html += "</div>";
        // E: OWNER DETAILS
        // wrapper div
        html += "</div>";
        return html;
    };
    Temp1.prototype.templateBody = function () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17;
        if (!((_c = (_b = (_a = this.data) === null || _a === void 0 ? void 0 : _a.bill) === null || _b === void 0 ? void 0 : _b.billItems) === null || _c === void 0 ? void 0 : _c.length)) {
            return '';
        }
        var html = '';
        var totalQty = 0;
        var isHsn = false;
        var isMrp = false;
        var isTax = false;
        var isAdditionlDateField = false;
        var isAdditionlInputField = false;
        var isExpiryDate = false;
        var additionlDateFieldTitle = '';
        var additionlInputFieldTitle = '';
        var isDiscount = false;
        var dynamicColumnCount = 0;
        var dynamicColWidthCss;
        var hsnTableObj = {};
        for (var i = 0; i < ((_f = (_e = (_d = this.data) === null || _d === void 0 ? void 0 : _d.bill) === null || _e === void 0 ? void 0 : _e.billItems) === null || _f === void 0 ? void 0 : _f.length); i++) {
            var el = (_h = (_g = this.data) === null || _g === void 0 ? void 0 : _g.bill) === null || _h === void 0 ? void 0 : _h.billItems[i];
            hsnTableObj = this.calculationForHsnTable(el, hsnTableObj);
            if (!(((_k = (_j = this.data) === null || _j === void 0 ? void 0 : _j.settings) === null || _k === void 0 ? void 0 : _k.pSetTaxMrpHsnPrintStatus) === false) && ((el === null || el === void 0 ? void 0 : el.hsn) && !isHsn)) {
                isHsn = true;
                dynamicColumnCount++;
            }
            if (!(((_m = (_l = this.data) === null || _l === void 0 ? void 0 : _l.settings) === null || _m === void 0 ? void 0 : _m.pSetTaxMrpHsnPrintStatus) === false) && ((el === null || el === void 0 ? void 0 : el.mrp) || ((_o = el === null || el === void 0 ? void 0 : el.item) === null || _o === void 0 ? void 0 : _o.mrp)) && !isMrp) {
                isMrp = true;
                dynamicColumnCount++;
            }
            if (!(((_q = (_p = this.data) === null || _p === void 0 ? void 0 : _p.settings) === null || _q === void 0 ? void 0 : _q.pSetTaxMrpHsnPrintStatus) === false) && ((el === null || el === void 0 ? void 0 : el.unitGstAmount) || (el === null || el === void 0 ? void 0 : el.unitCessAmount)) && !isTax) {
                isTax = true;
                this.isTax = true;
                dynamicColumnCount++;
            }
            if ((el === null || el === void 0 ? void 0 : el.unitDiscountAmount) && !isDiscount) {
                isDiscount = true;
                dynamicColumnCount++;
            }
            if ((!((_r = el === null || el === void 0 ? void 0 : el.item) === null || _r === void 0 ? void 0 : _r.expiryDate) && ((el === null || el === void 0 ? void 0 : el.additionalDateFieldTitle) && (el === null || el === void 0 ? void 0 : el.additionalDateFieldValue))) && !isAdditionlDateField) {
                isAdditionlDateField = true;
                additionlDateFieldTitle = el === null || el === void 0 ? void 0 : el.additionalDateFieldTitle;
                dynamicColumnCount++;
            }
            if ((_s = el === null || el === void 0 ? void 0 : el.item) === null || _s === void 0 ? void 0 : _s.expiryDate) {
                isExpiryDate = true;
                isAdditionlDateField = false;
            }
            if ((el === null || el === void 0 ? void 0 : el.additionalInputFieldTitle) && (el === null || el === void 0 ? void 0 : el.additionalInputFieldValue) && !isAdditionlInputField) {
                isAdditionlInputField = true;
                additionlInputFieldTitle = el === null || el === void 0 ? void 0 : el.additionalInputFieldTitle;
                dynamicColumnCount++;
            }
        }
        this.finalHsnTableObj = this.addSameTaxPercentageObjs(hsnTableObj);
        if (dynamicColumnCount == 1) {
            dynamicColWidthCss = "extraColOne";
        }
        else if (dynamicColumnCount == 2) {
            dynamicColWidthCss = "extraColTwo";
        }
        else if (dynamicColumnCount == 3) {
            dynamicColWidthCss = "extraColThree";
        }
        else if (dynamicColumnCount == 4) {
            dynamicColWidthCss = "extraColFour";
        }
        var dynamicBoldCss = '';
        if (this.data.settings.makeItemNameBold) {
            dynamicBoldCss = 'font-weight: bold;';
        }
        //wrapper class 
        html += "<div class=\"inv-item-list-holder-wrapper\" style=\"margin:0 !important; padding:0 !important\">\n              <div style=\"height:1px; width: 100%;\"></div>";
        // Main div , close it in last
        html += "<div style=\"width: 100%;padding:0px 25px;\" class=\"padding-102525-new inv-item-list-holder\">";
        // Table close it before main div closing
        html += "<table style=\"width: 100%; text-align: center;table-layout: fixed;\" ".concat(dynamicColumnCount ? "class='".concat(dynamicColWidthCss, "'") : '', ">");
        html += "\n      <thead  class=\"no-b-btm\"\n      style=\"background-color: ".concat((_u = (_t = this.data) === null || _t === void 0 ? void 0 : _t.bill) === null || _u === void 0 ? void 0 : _u.color, " !important;-webkit-print-color-adjust: exact !important; -webkit-princolor-adjust: exact !important;\"\n      >\n        <th class=\"cl-sr\" style=\"text-align: center;color: #ffffff !important;padding:0 3px;border-right:0;\">#</th>\n        <th style=\"text-align: center;color: #ffffff !important;width: 50%;padding:0 3px;border-right:0;text-transform: uppercase;\">Item Names</th>\n        <th class=\"cl-hsn\" style=\"text-align: center;color: #ffffff !important;padding:0 3px;border-right:0;text-transform: uppercase;").concat(!isHsn ? 'display: none' : '', "\">HSN</th>\n        <th class=\"cl-qty\" style=\"text-align: center;color: #ffffff !important;padding:0 3px;border-right:0;text-transform: uppercase;\">Qty</th>\n        <th class=\"cl-aif\" style=\"text-align: center;color: #ffffff !important;padding:0 3px;border-right:0;text-transform: uppercase;").concat(!isAdditionlInputField ? 'display: none' : '', "\">").concat(additionlInputFieldTitle, "</th>\n        <th class=\"cl-adf\" style=\"text-align: center;color: #ffffff !important;padding:0 3px;border-right:0;text-transform: uppercase;").concat(!isExpiryDate ? 'display: none' : '', "\">Expiry Date</th>\n        <th class=\"cl-adf\" style=\"text-align: center;color: #ffffff !important;padding:0 3px;border-right:0;text-transform: uppercase;").concat(!isAdditionlDateField ? 'display: none' : '', "\">").concat(additionlDateFieldTitle, "</th>\n        <th class=\"cl-mrp\" style=\"text-align: center;color: #ffffff !important;padding:0 3px;border-right:0;text-transform: uppercase;").concat(!isMrp ? 'display: none' : '', "\">MRP</th>\n        <th class=\"cl-rate\" style=\"text-align: center;color: #ffffff !important;padding:0 3px;border-right:0;text-transform: uppercase;\">RATE</th>\n        <th class=\"cl-discount\" style=\"text-align: center;color: #ffffff !important;padding:0 3px;border-right:0;text-transform: uppercase;").concat(!isDiscount ? 'display: none' : '', "\">Disc</th>\n        <th class=\"cl-tax\" style=\"text-align: center;color: #ffffff !important;padding:0 3px;border-right:0;text-transform: uppercase;").concat(!isTax ? 'display: none' : '', "\">Tax Amt</th>\n        <th class=\"cl-total\" style=\"text-align: right;color: #ffffff !important;padding:0 3px;text-transform: uppercase;\">Total</th>\n      </thead>\n      ");
        // close it after applying conditions
        html += "<tbody>";
        for (var i = 0; i < ((_w = (_v = this.data) === null || _v === void 0 ? void 0 : _v.bill.billItems) === null || _w === void 0 ? void 0 : _w.length); i++) {
            var el = (_x = this.data) === null || _x === void 0 ? void 0 : _x.bill.billItems[i];
            // let discountPercent = commonTempData.reCalDiscountPercentage(this.data,el);
            totalQty = totalQty + (+(el === null || el === void 0 ? void 0 : el.quantity));
            html += "\n        <tr>\n          <td style=\"text-align: center;border-bottom:0;border-top: 0;padding:0 3px;border-right:0;-webkit-print-color-adjust: exact !important;color-adjust: exact !important;vertical-align:top;\">".concat(i + 1, "</td>\n          <td class=\"padding-0515\"\n            style=\"text-align: center;border-bottom:0;border-top: 0;border-right:0;width: 50%;overflow: hidden;text-overflow: ellipsis;padding:0 5px;white-space: nowrap;-webkit-print-color-adjust: exact !important;color-adjust: exact !important;").concat(dynamicBoldCss, "\">\n            ").concat((((_y = el === null || el === void 0 ? void 0 : el.item) === null || _y === void 0 ? void 0 : _y.itemName) || ''), " ").concat(((el === null || el === void 0 ? void 0 : el.variant) ? " (" + (el === null || el === void 0 ? void 0 : el.variant) + ")" : ""), "\n            <span style=\"display: block;font-weight:normal !important; word-wrap: break-word;\">").concat((((el === null || el === void 0 ? void 0 : el.itemDes) && el.itemDes != "0") ? el.itemDes : ''), "</span>\n            <span style=\"display: block;font-weight:normal !important; word-wrap: break-word;\">").concat(((el === null || el === void 0 ? void 0 : el.itemSrl) ? '(' + el.itemSrl + ')' : ''), "</span>\n          </td>\n          <td style=\"-webkit-print-color-adjust: exact !important;color-adjust: exact !important;vertical-align:top;text-align: center;border-bottom:0;border-top: 0;padding:0 3px;border-right:0;").concat(!isHsn ? 'display: none' : '', "\">").concat((el === null || el === void 0 ? void 0 : el.hsn) || ((_z = el === null || el === void 0 ? void 0 : el.item) === null || _z === void 0 ? void 0 : _z.hsn) || '', "</td>\n          <td style=\"-webkit-print-color-adjust: exact !important;color-adjust: exact !important;vertical-align:top;text-align: center;border-bottom:0;border-top: 0;padding:0 3px;border-right:0;\">").concat(commonTempData_1.commonTempData.unitAdjuster(((el === null || el === void 0 ? void 0 : el.quantity) || 0)) + " " + ((el === null || el === void 0 ? void 0 : el.unit) || ''), "</td>\n          <td style=\"-webkit-print-color-adjust: exact !important;color-adjust: exact !important;vertical-align:top;text-align: center;border-bottom:0;border-top: 0;padding:0 3px;border-right:0;").concat(!isAdditionlInputField ? 'display: none' : '', "\">").concat((el === null || el === void 0 ? void 0 : el.additionalInputFieldValue) || '', "</td>\n          <td style=\"-webkit-print-color-adjust: exact !important;color-adjust: exact !important;vertical-align:top;text-align: center;border-bottom:0;border-top: 0;padding:0 3px;border-right:0;").concat(!(isExpiryDate) ? 'display: none' : '', "\">").concat(((_0 = el === null || el === void 0 ? void 0 : el.item) === null || _0 === void 0 ? void 0 : _0.expiryDate) ? commonTempData_1.commonTempData.dateToDDMMYYY((_1 = el === null || el === void 0 ? void 0 : el.item) === null || _1 === void 0 ? void 0 : _1.expiryDate) : '', "</td>\n          <td style=\"-webkit-print-color-adjust: exact !important;color-adjust: exact !important;vertical-align:top;text-align: center;border-bottom:0;border-top: 0;padding:0 3px;border-right:0;").concat(!(isAdditionlDateField) ? 'display: none' : '', "\">").concat((el === null || el === void 0 ? void 0 : el.additionalDateFieldValue) || '', "</td>\n          <td style=\"-webkit-print-color-adjust: exact !important;color-adjust: exact !important;vertical-align:top;text-align: center;border-bottom:0;border-top: 0;padding:0 3px;border-right:0;").concat(!isMrp ? 'display: none' : '', "\">").concat((el === null || el === void 0 ? void 0 : el.mrp) || '', "</td>\n          <td style=\"-webkit-print-color-adjust: exact !important;color-adjust: exact !important;vertical-align:top;text-align: center;border-bottom:0;border-top: 0;padding:0 3px;border-right:0;\">").concat(el === null || el === void 0 ? void 0 : el.price, "</td>\n          <td style=\"-webkit-print-color-adjust: exact !important;color-adjust: exact !important;vertical-align:top;text-align: center;border-bottom:0;border-top: 0;padding:0 3px;border-right:0;").concat(!isDiscount ? 'display: none' : '', "\">").concat(((el === null || el === void 0 ? void 0 : el.unitDiscountAmount) ? (this.data.settings.showTaxAndDiscAmt ? ((commonTempData_1.commonTempData.unitAdjuster(el === null || el === void 0 ? void 0 : el.unitDiscountAmount)) + '<br>') : '') + '(' + ((+(el === null || el === void 0 ? void 0 : el.discountPercentage) || 0) + (+(el === null || el === void 0 ? void 0 : el.billCashDiscountPercentage) || 0)) + '%' + ')' : ''), "</td>\n          <td style=\"-webkit-print-color-adjust: exact !important;color-adjust: exact !important;vertical-align:top;text-align: center;border-bottom:0;border-top: 0;padding:0 3px;border-right:0;").concat(!isTax ? 'display: none' : '', "\">\n          ").concat((((el === null || el === void 0 ? void 0 : el.unitTaxAmount) > 0) ? (this.data.settings.showTaxAndDiscAmt ? commonTempData_1.commonTempData.unitAdjuster(el === null || el === void 0 ? void 0 : el.unitTaxAmount) : '') + ' (' + ((el === null || el === void 0 ? void 0 : el.taxPercentage) || 0) + ((el === null || el === void 0 ? void 0 : el.unitCessAmount) ? ((el === null || el === void 0 ? void 0 : el.taxPercentage) ? '+' : '') + (el === null || el === void 0 ? void 0 : el.unitCessAmount) : '') + ')%' : ''), "\n          </td>\n          <td style=\"-webkit-print-color-adjust: exact !important;color-adjust: exact !important;vertical-align:top;text-align: right;padding:0 3px;border-bottom:0;border-top: 0;").concat(dynamicBoldCss, "\">").concat(commonTempData_1.commonTempData.unitAdjuster(el === null || el === void 0 ? void 0 : el.total), "</td>\n        </tr>\n        ");
        }
        // tbody tag closed
        html += "</tbody>";
        html += "\n      <thead class=\"border\" style=\"border-top: 1px solid #000000;border-bottom: 1px solid #000000;border-color:".concat((_3 = (_2 = this.data) === null || _2 === void 0 ? void 0 : _2.bill) === null || _3 === void 0 ? void 0 : _3.color, " !important;-webkit-print-color-adjust: exact !important;color-adjust: exact !important;\">\n         <th style=\"text-align: center;padding:0 3px;border-right:0;\"></th>\n         <th style=\"text-align: center;width: 50%;padding:0 3px;border-right:0;\">Total</th>\n         <th style=\"text-align: center;padding:0 3px;border-right:0;").concat(!isHsn ? 'display: none' : '', "\"></th>\n         <th style=\"text-align: center;padding:0 3px;border-right:0;\">").concat(commonTempData_1.commonTempData.unitAdjuster(totalQty), "</th>\n         <th style=\"text-align: center;padding:0 3px;border-right:0;").concat(!isAdditionlInputField ? 'display: none' : '', "\"></th>\n         <th style=\"text-align: center;padding:0 3px;border-right:0;").concat(!isExpiryDate ? 'display: none' : '', "\"></th>\n         <th style=\"text-align: center;padding:0 3px;border-right:0;").concat(!isAdditionlDateField ? 'display: none' : '', "\"></th>\n         <th style=\"text-align: center;padding:0 3px;border-right:0;").concat(!isMrp ? 'display: none' : '', "\"></th>\n         <th style=\"text-align: center;padding:0 3px;border-right:0;\"></th>\n         <th style=\"text-align: center;padding:0 3px;border-right:0;").concat(!isDiscount ? 'display: none' : '', "\">\n         ").concat((((_5 = (_4 = this.data) === null || _4 === void 0 ? void 0 : _4.bill) === null || _5 === void 0 ? void 0 : _5.discountAmount) ? '₹' + ((_7 = (_6 = this.data) === null || _6 === void 0 ? void 0 : _6.bill) === null || _7 === void 0 ? void 0 : _7.discountAmount) : ''), "\n         </th>\n         <th style=\"text-align: center;padding:0 3px;border-right:0;").concat(!isTax ? 'display: none' : '', "\">\n         ").concat(((((_9 = (_8 = this.data) === null || _8 === void 0 ? void 0 : _8.bill) === null || _9 === void 0 ? void 0 : _9.gstAmount) || 0) + ((_11 = (_10 = this.data) === null || _10 === void 0 ? void 0 : _10.bill) === null || _11 === void 0 ? void 0 : _11.cessAmount)) > 0 ? '₹' + commonTempData_1.commonTempData.unitAdjuster((((_13 = (_12 = this.data) === null || _12 === void 0 ? void 0 : _12.bill) === null || _13 === void 0 ? void 0 : _13.gstAmount) || 0) + ((_15 = (_14 = this.data) === null || _14 === void 0 ? void 0 : _14.bill) === null || _15 === void 0 ? void 0 : _15.cessAmount)) : '', "\n         </th>\n         <th style=\"text-align: right;padding:0 3px;\">\n         \u20B9").concat(commonTempData_1.commonTempData.unitAdjuster((_17 = (_16 = this.data) === null || _16 === void 0 ? void 0 : _16.bill) === null || _17 === void 0 ? void 0 : _17.subTotalAmount), "\n         </th>\n       </thead>\n      ");
        html += "</table>";
        html += "</div>";
        html += "</div>";
        return html;
    };
    Temp1.prototype.invoiceTitle = function () {
        var _a, _b, _c, _d;
        var html = '';
        var invoiceTitle = commonTempData_1.commonTempData.getInvoiceTitle(this.data);
        var editIcon = '';
        if (invoiceTitle) {
            html += "\n        <div class=\"inv-title-holder-wrapper\" style=\"margin:0 !important; padding:0 !important\">\n        <div style=\"height: 1px; width: 100%;\"></div>\n          <div style=\"display: flex;width: 100%;align-items: flex-start;background: white;padding:0 25px 5px;\"\n          class=\"padding-002510-new inv-title-holder\">\n              <div style=\"width: 100%;text-align: center;font-size: 16px;color: ".concat((_b = (_a = this.data) === null || _a === void 0 ? void 0 : _a.bill) === null || _b === void 0 ? void 0 : _b.color, ";font-weight: bold;\" class=\"f-20 f-b\">\n              ").concat(invoiceTitle, " ").concat(editIcon, "\n              </div>\n          </div>\n        </div>\n        ");
        }
        else {
            html += "\n        <div class=\"inv-title-holder-wrapper\" style=\"margin:0 !important; padding:0 !important\">\n        <div style=\"height: 1px; width: 100%;\"></div>\n          <div style=\"display: flex;width: 100%;align-items: flex-start;background: white;padding:0 25px 0px;\"\n          class=\"padding-002510-new inv-title-holder\">\n              <div style=\"width: 100%;text-align: center;font-size: 16px;color: ".concat((_d = (_c = this.data) === null || _c === void 0 ? void 0 : _c.bill) === null || _d === void 0 ? void 0 : _d.color, ";font-weight: bold;\" class=\"f-20 f-b\">\n                Tax Invoice ").concat(editIcon, "\n              </div>\n          </div>\n        </div>\n        ");
        }
        return html;
    };
    Temp1.prototype.partyDetails = function () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, _31, _32, _33, _34, _35;
        var el = ((_c = (_b = (_a = this.data) === null || _a === void 0 ? void 0 : _a.bill) === null || _b === void 0 ? void 0 : _b.partyData) === null || _c === void 0 ? void 0 : _c.profileData) || null;
        var isParty = (_e = (_d = this === null || this === void 0 ? void 0 : this.data) === null || _d === void 0 ? void 0 : _d.bill) === null || _e === void 0 ? void 0 : _e.isPartyDeleted;
        var html = '';
        if (!el)
            return '';
        // close this div in last
        html += "\n      <div class=\"inv-bill-details-wrapper\" style=\"margin:0 !important; padding:0 !important\">\n      <div style=\"height: 1px; width: 100%;\"></div>\n        <div style=\"display: flex;width: 100%;align-items: flex-start;background: white;padding:0 25px 0px;\"\n        class=\"padding-002510-new inv-bill-details\">\n      ";
        //Naming this div as div1, close it after applying conditions
        html += "\n        <div style=\"display: flow-root;width: 58%;\">\n      ";
        var billTitle = 'Bill To';
        html += "\n        <div style=\"display: flow-root;font-weight: bold;font-size: 14px;color: #000;\" class=\"f-14 f-b\">".concat(billTitle, "</div>\n        \n      ");
        if (el === null || el === void 0 ? void 0 : el.legalName) {
            html += "\n         <div style=\"display: flow-root;font-size: 14px;color: #000;font-weight: bold;\" class=\"f-14\">\n         ".concat(el === null || el === void 0 ? void 0 : el.legalName, "\n         </div>\n        ");
        }
        if ((el === null || el === void 0 ? void 0 : el.contactPersonName) == (el === null || el === void 0 ? void 0 : el.contactPersonPhone)) {
            html += this.commonLeftSideFormatForPartyDetails(el === null || el === void 0 ? void 0 : el.contactPersonPhone);
        }
        if (el === null || el === void 0 ? void 0 : el.contactPersonName) {
            html += "\n      <div style=\"display: flow-root;font-size: 14px;color: #000;font-weight:bold;\" class=\"f-14 m-5-new\">\n          ".concat(el === null || el === void 0 ? void 0 : el.contactPersonName, "\n      </div>");
        }
        if (isParty) {
            html += "<div style=\"display: flow-root;font-size: 14px;color: red;font-weight:bold;\" class=\"f-14 m-5-new\">\n                      Party Has Been Deleted\n                  </div>";
        }
        if ((el === null || el === void 0 ? void 0 : el.contactPersonPhone) && (el === null || el === void 0 ? void 0 : el.contactPersonPhone) != '0') {
            html += this.commonLeftSideFormatForPartyDetails(el === null || el === void 0 ? void 0 : el.contactPersonPhone);
        }
        if (el === null || el === void 0 ? void 0 : el.contactPersonEmail) {
            html += "\n        <div style=\"display: flow-root;font-size: 14px;color: #000;\" class=\"f-14 m-5-new\">\n          ".concat(el === null || el === void 0 ? void 0 : el.contactPersonEmail, "\n        </div>");
        }
        if ((el === null || el === void 0 ? void 0 : el.addressLine1) || (el === null || el === void 0 ? void 0 : el.addressState)) {
            html += "\n        <div style=\"display: flow-root;font-weight: bold;font-size: 14px;color: #000;\" class=\"f-14 f-b\">\n         Billing Address\n      </div>\n        <div style=\"display: flow-root;font-size: 14px;color: #000;\" class=\"f-14 m-5-new\">\n          ".concat((el === null || el === void 0 ? void 0 : el.addressLine1) || '').concat((el === null || el === void 0 ? void 0 : el.addressState) ? ', ' + (el === null || el === void 0 ? void 0 : el.addressState) : '').concat((el === null || el === void 0 ? void 0 : el.addressPincode) ? ', ' + (el === null || el === void 0 ? void 0 : el.addressPincode) : '', "\n        </div>");
        }
        if ((el === null || el === void 0 ? void 0 : el.additionalDateFieldTitle)
            && ((el === null || el === void 0 ? void 0 : el.additionalDateFieldTitle) + "").trim().length > 0
            && (el === null || el === void 0 ? void 0 : el.additionalDateFieldValue)
            && ((el === null || el === void 0 ? void 0 : el.additionalDateFieldValue) + "").trim().length > 0) {
            html += "\n        <div style=\"display: flow-root;font-size: 14px;color: #000;\" class=\"f-14 m-5-new\">\n          <b>".concat(el.additionalDateFieldTitle, ":</b> ").concat(el === null || el === void 0 ? void 0 : el.additionalDateFieldValue, "\n        </div>");
        }
        if ((el === null || el === void 0 ? void 0 : el.additionalInputFieldTitle)
            && ((el === null || el === void 0 ? void 0 : el.additionalInputFieldTitle) + "").trim().length > 0
            && (el === null || el === void 0 ? void 0 : el.additionalInputFieldValue)
            && ((el === null || el === void 0 ? void 0 : el.additionalInputFieldValue) + "").trim().length > 0) {
            html += "\n        <div style=\"display: flow-root;font-size: 14px;color: #000;\" class=\"f-14 m-5-new\">\n          <b>".concat(el.additionalInputFieldTitle, ":</b> ").concat(el === null || el === void 0 ? void 0 : el.additionalInputFieldValue, "\n        </div>");
        }
        if (el === null || el === void 0 ? void 0 : el.gstNumber) {
            html += "\n        <div style=\"display: flow-root;font-size: 14px;color: #000;font-weight: bold;\" class=\"f-14 m-5-new\">\n            ".concat(el === null || el === void 0 ? void 0 : el.gstNumber, "\n        </div>");
        }
        if ((el === null || el === void 0 ? void 0 : el.udf1T) && (el === null || el === void 0 ? void 0 : el.udf1V)) {
            var text = "".concat((el === null || el === void 0 ? void 0 : el.udf1T) || '').concat((el === null || el === void 0 ? void 0 : el.udf1V) ? ' : ' + (el === null || el === void 0 ? void 0 : el.udf1V) : '');
            html += this.commonLeftSideFormatForPartyDetails(text);
        }
        if ((el === null || el === void 0 ? void 0 : el.udf2T) && (el === null || el === void 0 ? void 0 : el.udf2V)) {
            var text = "".concat((el === null || el === void 0 ? void 0 : el.udf2T) || '').concat((el === null || el === void 0 ? void 0 : el.udf2V) ? ' : ' + (el === null || el === void 0 ? void 0 : el.udf2V) : '');
            html += this.commonLeftSideFormatForPartyDetails(text);
        }
        if ((el === null || el === void 0 ? void 0 : el.udf3T) && (el === null || el === void 0 ? void 0 : el.udf3V)) {
            var text = "".concat((el === null || el === void 0 ? void 0 : el.udf3T) || '').concat((el === null || el === void 0 ? void 0 : el.udf3V) ? ' : ' + (el === null || el === void 0 ? void 0 : el.udf3V) : '');
            html += this.commonLeftSideFormatForPartyDetails(text);
        }
        /*       if(this.data.deliveryLocation || this.data.deliveryState){
                html +=`
                <div style="display: flow-root;font-weight: bold;font-size: 16px;color: #000;margin-top: 5px;" class="f-16 f-b">
                   Delivery Address
                </div>
                <div style="display: flow-root;font-size: 16px;color: #000;" class="f-16 m-5-new">
                   ${this.data.deliveryLocation? this.data.deliveryLocation: ''}${this.data.deliveryState? ', '+this.data.deliveryState:''}
                </div>`
              } */
        if (((_g = (_f = this.data) === null || _f === void 0 ? void 0 : _f.bill) === null || _g === void 0 ? void 0 : _g.deliveryState) || (el === null || el === void 0 ? void 0 : el.addressOneLine1) || (el === null || el === void 0 ? void 0 : el.addressOneState)) {
            var deliveryState = ((_j = (_h = this.data) === null || _h === void 0 ? void 0 : _h.bill) === null || _j === void 0 ? void 0 : _j.deliveryState) || (el === null || el === void 0 ? void 0 : el.addressOneState);
            html += "\n        <div style=\"display: flow-root;font-weight: bold;font-size: 14px;color: #000;\" class=\"f-14 f-b\">\n           Delivery Address\n        </div>\n        <div style=\"display: flow-root;font-size: 14px;color: #000;\" class=\"f-14 m-5-new\">\n           ".concat((el === null || el === void 0 ? void 0 : el.addressOneLine1) || '').concat(deliveryState ? ', ' + deliveryState : '').concat((el === null || el === void 0 ? void 0 : el.addressOnePincode) ? ', ' + (el === null || el === void 0 ? void 0 : el.addressOnePincode) : '', "\n        </div>");
        }
        // div1 closed
        html += "</div>";
        // This is Right side of party Details
        //Naming this div as div2, close it after applying conditions
        html += "<div style=\"display: flow-root;width: 42%;align-items: flex-start;flex-wrap: wrap;\">";
        if ((_l = (_k = this.data) === null || _k === void 0 ? void 0 : _k.bill) === null || _l === void 0 ? void 0 : _l.billNo) {
            var title = "Invoice No";
            html += this.commonRightSideFormatForPartyDetails(title, (_m = this.data) === null || _m === void 0 ? void 0 : _m.bill.billNo);
        }
        if (((_p = (_o = this.data) === null || _o === void 0 ? void 0 : _o.bill) === null || _p === void 0 ? void 0 : _p.purOrderNo) && ((_r = (_q = this.data) === null || _q === void 0 ? void 0 : _q.bill) === null || _r === void 0 ? void 0 : _r.purOrderNo) != ' ') {
            html += this.commonRightSideFormatForPartyDetails('PO No', (_t = (_s = this.data) === null || _s === void 0 ? void 0 : _s.bill) === null || _t === void 0 ? void 0 : _t.purOrderNo);
        }
        if (((_v = (_u = this.data) === null || _u === void 0 ? void 0 : _u.bill) === null || _v === void 0 ? void 0 : _v.challanNo) && ((_x = (_w = this.data) === null || _w === void 0 ? void 0 : _w.bill) === null || _x === void 0 ? void 0 : _x.challanNo) != ' ') {
            html += this.commonRightSideFormatForPartyDetails('Challan No', (_z = (_y = this.data) === null || _y === void 0 ? void 0 : _y.bill) === null || _z === void 0 ? void 0 : _z.challanNo);
        }
        html += "<div\n            style=\"display: flow-root;font-weight: bold;font-size: 14px;color: #000;width: 50%;float: left;\"\n            class=\"f-14 f-b m-5-new\">\n              Created On :\n            </div>\n      \n            <div\n            style=\"display: flow-root;font-size: 14px;color: #000;width: 50%;float: left;text-align: right;\"\n            class=\"f-14 m-5-new\">\n               ".concat(commonTempData_1.commonTempData.dateToDDMMYYYHHMMAP((_1 = (_0 = this.data) === null || _0 === void 0 ? void 0 : _0.bill) === null || _1 === void 0 ? void 0 : _1.billCompleteStamp), "\n            </div>");
        var isBillDateDiff = commonTempData_1.commonTempData.isBillDateDiff((_3 = (_2 = this.data) === null || _2 === void 0 ? void 0 : _2.bill) === null || _3 === void 0 ? void 0 : _3.createdStamp, (_5 = (_4 = this.data) === null || _4 === void 0 ? void 0 : _4.bill) === null || _5 === void 0 ? void 0 : _5.billDateStamp);
        if (isBillDateDiff && ((_7 = (_6 = this.data) === null || _6 === void 0 ? void 0 : _6.bill) === null || _7 === void 0 ? void 0 : _7.billDateStamp)) {
            html += this.commonDateFormat('Date', (_9 = (_8 = this.data) === null || _8 === void 0 ? void 0 : _8.bill) === null || _9 === void 0 ? void 0 : _9.billDateStamp);
        }
        if (((_11 = (_10 = this.data) === null || _10 === void 0 ? void 0 : _10.bill) === null || _11 === void 0 ? void 0 : _11.dueDateStamp) && ((_13 = (_12 = this.data) === null || _12 === void 0 ? void 0 : _12.bill) === null || _13 === void 0 ? void 0 : _13.dueDateStamp) > 0) {
            html += this.commonDateFormat('Due Date', (_15 = (_14 = this.data) === null || _14 === void 0 ? void 0 : _14.bill) === null || _15 === void 0 ? void 0 : _15.dueDateStamp);
        }
        if ((_17 = (_16 = this.data) === null || _16 === void 0 ? void 0 : _16.bill) === null || _17 === void 0 ? void 0 : _17.eWayBillNo) {
            html += this.commonRightSideFormatForPartyDetails('E-way Bill No', (_19 = (_18 = this.data) === null || _18 === void 0 ? void 0 : _18.bill) === null || _19 === void 0 ? void 0 : _19.eWayBillNo);
        }
        if ((_21 = (_20 = this.data) === null || _20 === void 0 ? void 0 : _20.bill) === null || _21 === void 0 ? void 0 : _21.eWayBillDate) {
            html += this.commonDateFormat('E-way Bill Date', (_23 = (_22 = this.data) === null || _22 === void 0 ? void 0 : _22.bill) === null || _23 === void 0 ? void 0 : _23.eWayBillDate);
        }
        if ((_25 = (_24 = this.data) === null || _24 === void 0 ? void 0 : _24.bill) === null || _25 === void 0 ? void 0 : _25.vehicleNumber) {
            html += this.commonRightSideFormatForPartyDetails('Vehicle No', (_27 = (_26 = this.data) === null || _26 === void 0 ? void 0 : _26.bill) === null || _27 === void 0 ? void 0 : _27.vehicleNumber);
        }
        if ((_29 = (_28 = this.data) === null || _28 === void 0 ? void 0 : _28.bill) === null || _29 === void 0 ? void 0 : _29.transporterName) {
            html += this.commonRightSideFormatForPartyDetails('Transporter Name', (_31 = (_30 = this.data) === null || _30 === void 0 ? void 0 : _30.bill) === null || _31 === void 0 ? void 0 : _31.transporterName);
        }
        if ((_33 = (_32 = this.data) === null || _32 === void 0 ? void 0 : _32.bill) === null || _33 === void 0 ? void 0 : _33.deliveryDate) {
            html += this.commonDateFormat('Delivery Date', (_35 = (_34 = this.data) === null || _34 === void 0 ? void 0 : _34.bill) === null || _35 === void 0 ? void 0 : _35.deliveryDate);
        }
        // div2 closed
        html += "</div>";
        // main div closed
        html += "</div>";
        // wrapper div
        html += "</div>";
        return html;
    };
    Temp1.prototype.seconadryPartyDetails = function () {
        var _a, _b, _c;
        var el = ((_c = (_b = (_a = this.data) === null || _a === void 0 ? void 0 : _a.bill) === null || _b === void 0 ? void 0 : _b.secondaryPartyData) === null || _c === void 0 ? void 0 : _c.profileData) || null;
        var html = '';
        if (!el)
            return '';
        // close this div in last
        html += "\n      <div class=\"inv-bill-details-wrapper\" style=\"margin:0 !important; padding:0 !important\">\n      <div style=\"height: 1px; width: 100%;\"></div>\n        <div style=\"display: flex;width: 100%;align-items: flex-start;background: white;padding:0 25px 0px;\"\n        class=\"padding-002510-new inv-bill-details\">\n      ";
        //Naming this div as div1, close it after applying conditions
        html += "\n        <div style=\"display: flow-root;width: 58%;\">\n      ";
        var billTitle = 'Bill To';
        if (el === null || el === void 0 ? void 0 : el.legalName) {
            html += "\n          <div style=\"display: flow-root;font-weight: bold;font-size: 14px;color: #000;\" class=\"f-14 f-b\">".concat(billTitle, "</div>\n        ");
            html += "\n         <div style=\"display: flow-root;font-size: 14px;color: #000;font-weight: bold;\" class=\"f-14\">\n         ".concat(el === null || el === void 0 ? void 0 : el.legalName, "\n         </div>\n        ");
        }
        if ((el === null || el === void 0 ? void 0 : el.contactPersonPhone) && (el === null || el === void 0 ? void 0 : el.contactPersonName) == (el === null || el === void 0 ? void 0 : el.contactPersonPhone)) {
            html += this.commonLeftSideFormatForPartyDetails(el === null || el === void 0 ? void 0 : el.contactPersonPhone);
        }
        else {
            if (el === null || el === void 0 ? void 0 : el.contactPersonName) {
                if ((el === null || el === void 0 ? void 0 : el.contactPersonName) == "Party Not Available") {
                    html += "<div style=\"display: flow-root;font-size: 14px;color: red;font-weight:bold;\" class=\"f-14 m-5-new\">\n                      Party Has Been Deleted\n                  </div>";
                }
                else {
                    html += "\n            <div style=\"display: flow-root;font-size: 14px;color: #000;font-weight:bold;\" class=\"f-14 m-5-new\">\n                ".concat(el === null || el === void 0 ? void 0 : el.contactPersonName, "\n            </div>");
                }
            }
            if ((el === null || el === void 0 ? void 0 : el.contactPersonPhone) && (el === null || el === void 0 ? void 0 : el.contactPersonPhone) != '0') {
                html += this.commonLeftSideFormatForPartyDetails(el === null || el === void 0 ? void 0 : el.contactPersonPhone);
            }
        }
        if ((el === null || el === void 0 ? void 0 : el.addressLine1) || (el === null || el === void 0 ? void 0 : el.addressState)) {
            html += "\n        <div style=\"display: flow-root;font-weight: bold;font-size: 14px;color: #000;\" class=\"f-14 f-b\">\n         Billing Address\n      </div>\n        <div style=\"display: flow-root;font-size: 14px;color: #000;\" class=\"f-14 m-5-new\">\n          ".concat((el === null || el === void 0 ? void 0 : el.addressLine1) || '').concat((el === null || el === void 0 ? void 0 : el.addressState) ? ', ' + (el === null || el === void 0 ? void 0 : el.addressState) : '').concat((el === null || el === void 0 ? void 0 : el.addressPincode) ? ', ' + (el === null || el === void 0 ? void 0 : el.addressPincode) : '', "\n        </div>");
        }
        // div2 closed
        html += "</div>";
        // main div closed
        html += "</div>";
        // wrapper div
        html += "</div>";
        return html;
    };
    Temp1.prototype.footerAmountCalculation = function () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, _31, _32, _33, _34, _35, _36, _37, _38, _39, _40, _41, _42, _43, _44, _45, _46, _47, _48, _49, _50, _51, _52, _53, _54, _55, _56, _57, _58, _59, _60, _61, _62, _63, _64, _65, _66, _67, _68, _69, _70, _71, _72, _73, _74, _75, _76, _77, _78, _79, _80, _81, _82, _83, _84, _85, _86, _87, _88, _89, _90, _91, _92, _93, _94;
        var totalTaxAmt = 0;
        var receivedOrPaidAmt = 0;
        var isTax = false;
        var sameState = false;
        var el = ((_c = (_b = (_a = this.data) === null || _a === void 0 ? void 0 : _a.bill) === null || _b === void 0 ? void 0 : _b.partyData) === null || _c === void 0 ? void 0 : _c.profileData) || null;
        var partyInfo = el;
        var secondaryPartyInfo = ((_f = (_e = (_d = this.data) === null || _d === void 0 ? void 0 : _d.bill) === null || _e === void 0 ? void 0 : _e.secondaryPartyData) === null || _f === void 0 ? void 0 : _f.profileData) || null;
        if ((el === null || el === void 0 ? void 0 : el.addressState) && ((el === null || el === void 0 ? void 0 : el.addressState) == ((_h = (_g = this.data) === null || _g === void 0 ? void 0 : _g.profile) === null || _h === void 0 ? void 0 : _h.addressProvience))) {
            sameState = true;
        }
        else if (!(el === null || el === void 0 ? void 0 : el.addressState) || !((_k = (_j = this.data) === null || _j === void 0 ? void 0 : _j.profile) === null || _k === void 0 ? void 0 : _k.addressProvience)) {
            sameState = true;
        }
        var stateCode = (_l = partyInfo === null || partyInfo === void 0 ? void 0 : partyInfo.gstNumber) === null || _l === void 0 ? void 0 : _l.substring(0, 2);
        var profileStateCode = (_p = (_o = (_m = this.data) === null || _m === void 0 ? void 0 : _m.profile) === null || _o === void 0 ? void 0 : _o.gstin) === null || _p === void 0 ? void 0 : _p.substring(0, 2);
        var userState = (_r = (_q = this.data) === null || _q === void 0 ? void 0 : _q.profile) === null || _r === void 0 ? void 0 : _r.addressProvience;
        var partyState = (_t = (_s = this.data) === null || _s === void 0 ? void 0 : _s.bill) === null || _t === void 0 ? void 0 : _t.deliveryProvience;
        if (stateCode && profileStateCode) {
            sameState = stateCode != profileStateCode ? false : true;
        }
        else if (userState && partyState) {
            sameState = userState != partyState ? false : true;
        }
        if (sameState
            && secondaryPartyInfo
            && (secondaryPartyInfo === null || secondaryPartyInfo === void 0 ? void 0 : secondaryPartyInfo.gstNumber)
            && ((_u = secondaryPartyInfo === null || secondaryPartyInfo === void 0 ? void 0 : secondaryPartyInfo.gstNumber) === null || _u === void 0 ? void 0 : _u.length)
            && ((_x = (_w = (_v = this.data) === null || _v === void 0 ? void 0 : _v.profile) === null || _w === void 0 ? void 0 : _w.gstin) === null || _x === void 0 ? void 0 : _x.length)
            || this.sameState
                && secondaryPartyInfo
                && ((_0 = (_z = (_y = this.data) === null || _y === void 0 ? void 0 : _y.bill) === null || _z === void 0 ? void 0 : _z.deliveryProvience) === null || _0 === void 0 ? void 0 : _0.length)
                && ((_3 = (_2 = (_1 = this.data) === null || _1 === void 0 ? void 0 : _1.profile) === null || _2 === void 0 ? void 0 : _2.addressProvience) === null || _3 === void 0 ? void 0 : _3.length)) {
            var secondaryStateCode = (_4 = secondaryPartyInfo === null || secondaryPartyInfo === void 0 ? void 0 : secondaryPartyInfo.gstNumber) === null || _4 === void 0 ? void 0 : _4.substring(0, 2);
            if (secondaryStateCode && profileStateCode) {
                sameState = secondaryStateCode != profileStateCode ? false : true;
            }
            else if (userState && partyState) {
                sameState = userState != partyState ? false : true;
            }
        }
        if (((_6 = (_5 = this.data) === null || _5 === void 0 ? void 0 : _5.bill) === null || _6 === void 0 ? void 0 : _6.gstAmount) || ((_8 = (_7 = this.data) === null || _7 === void 0 ? void 0 : _7.bill) === null || _8 === void 0 ? void 0 : _8.cessAmount)) {
            totalTaxAmt = ((_10 = (_9 = this.data) === null || _9 === void 0 ? void 0 : _9.bill) === null || _10 === void 0 ? void 0 : _10.gstAmount) + ((_12 = (_11 = this.data) === null || _11 === void 0 ? void 0 : _11.bill) === null || _12 === void 0 ? void 0 : _12.cessAmount);
            isTax = true;
        }
        if ((_14 = (_13 = this.data) === null || _13 === void 0 ? void 0 : _13.bill) === null || _14 === void 0 ? void 0 : _14.moneyIn) {
            receivedOrPaidAmt = (((_17 = (_16 = (_15 = this.data) === null || _15 === void 0 ? void 0 : _15.bill) === null || _16 === void 0 ? void 0 : _16.moneyIn) === null || _17 === void 0 ? void 0 : _17.amount) || 0);
        }
        if ((_19 = (_18 = this.data) === null || _18 === void 0 ? void 0 : _18.bill) === null || _19 === void 0 ? void 0 : _19.amountReceived) {
            receivedOrPaidAmt = (_21 = (_20 = this.data) === null || _20 === void 0 ? void 0 : _20.bill) === null || _21 === void 0 ? void 0 : _21.amountReceived;
        }
        var html = '';
        //wrapper class
        html += "<div class=\"inv-total-holder-wrapper\" style=\"margin:0 !important; padding:0 !important\">\n        <div style=\"height:1px;width: 100%;\"></div>";
        // html+=EzoAd.showAd(this.data?.user);
        // close this main div in last
        html += "\n      <div style=\"display: flex;width: 100%;align-items: flex-start;background: #ffffff;padding:0 25px 0;\"\n        class=\"padding-002500 inv-total-holder\">";
        //Naming this div as div1, close it after applying conditions
        html += "<div style=\"display: flow-root;width: 50%;padding: 0 10px 0 0;\" class=\"padding-00100000\">";
        html += "\n      <div style=\"display: flow-root;font-weight: bold;font-size: 14px;color: #000;text-transform: capitalize;\"\n      class=\"f-14 f-b\">\n         Invoice Amount in Words\n      </div>\n      <div style=\"display: flow-root;font-size: 14px;color: #000;text-transform: capitalize;\" class=\"f-14\">\n        ".concat(commonTempData_1.commonTempData.convertToIndianCurrency((_24 = ((_23 = (_22 = this.data) === null || _22 === void 0 ? void 0 : _22.bill) === null || _23 === void 0 ? void 0 : _23.totalAmount)) === null || _24 === void 0 ? void 0 : _24.toString()), "\n        </div>");
        //closing div1
        html += "</div>";
        //Naming this div as div2, close it after applying conditions
        html += " <div style=\"display: flow-root;width: 50%;align-items: flex-start;flex-wrap: wrap;\">";
        var serviceChargeStr = "";
        if ((_26 = (_25 = this.data) === null || _25 === void 0 ? void 0 : _25.bill) === null || _26 === void 0 ? void 0 : _26.serviceChargePercentage) {
            serviceChargeStr = "<div style=\"display: flow-root;font-size: 14px;color: #000;width: 50%;float: left;\"\n        class=\"f-14 m-5-new\">\n          Service Charge\n        </div>\n        <div\n        style=\"display: flow-root;font-size: 14px;color: #000;width: 50%;float: left;text-align: right;\"\n        class=\"f-14 m-5-new\">\n           (".concat((_28 = (_27 = this.data) === null || _27 === void 0 ? void 0 : _27.bill) === null || _28 === void 0 ? void 0 : _28.serviceChargePercentage, "%) \u20B9").concat(commonTempData_1.commonTempData.unitAdjuster((_30 = (_29 = this.data) === null || _29 === void 0 ? void 0 : _29.bill) === null || _30 === void 0 ? void 0 : _30.serviceChargeAmount), "\n        </div>");
        }
        html += "\n      <div class=\"flex\" style=\"display:flex;flex-wrap:wrap;justify-content:flex-start;width:100%;\">\n      <div style=\"display: flow-root;font-size: 14px;color: #000;width: 50%;float: left;\"\n      class=\"f-14 m-5-new\">\n        Sub Total\n         <span style=\"font-size: 10px\"\n         class=\"f-10 m-5-new\"> without Tax</span>\n      </div>\n      <div\n      style=\"display: flow-root;font-size: 14px;color: #000;width: 50%;float: left;text-align: right;\"\n      class=\"f-14 m-5-new\">\n         \u20B9".concat(commonTempData_1.commonTempData.unitAdjuster((_32 = (_31 = this.data) === null || _31 === void 0 ? void 0 : _31.bill) === null || _32 === void 0 ? void 0 : _32.subTotalAmount), "\n      </div>\n\n      ").concat(serviceChargeStr, "\n\n      </div>\n      ");
        if ((_34 = (_33 = this.data) === null || _33 === void 0 ? void 0 : _33.bill) === null || _34 === void 0 ? void 0 : _34.cashDiscount) {
            html += this.commonAmountCalculationFormatForFooter('Cash Discount', "".concat(commonTempData_1.commonTempData.unitAdjuster((_36 = (_35 = this.data) === null || _35 === void 0 ? void 0 : _35.bill) === null || _36 === void 0 ? void 0 : _36.cashDiscount), " (").concat((_38 = (_37 = this.data) === null || _37 === void 0 ? void 0 : _37.bill) === null || _38 === void 0 ? void 0 : _38.cashDiscountPercentage, "%)"));
        }
        if (!sameState && isTax) {
            html += this.commonAmountCalculationFormatForFooter('IGST', commonTempData_1.commonTempData.unitAdjuster((_40 = (_39 = this.data) === null || _39 === void 0 ? void 0 : _39.bill) === null || _40 === void 0 ? void 0 : _40.gstAmount));
        }
        if (sameState && isTax) {
            var profileStateCode_1 = (_43 = (_42 = (_41 = this.data) === null || _41 === void 0 ? void 0 : _41.profile) === null || _42 === void 0 ? void 0 : _42.gstin) === null || _43 === void 0 ? void 0 : _43.substring(0, 2);
            if (ReferenceData_1.Arrays.UTSC.indexOf(profileStateCode_1) != -1) {
                html += this.commonAmountCalculationFormatForFooter('UGST', commonTempData_1.commonTempData.unitAdjuster(((_45 = (_44 = this.data) === null || _44 === void 0 ? void 0 : _44.bill) === null || _45 === void 0 ? void 0 : _45.gstAmount) / 2));
            }
            else {
                html += this.commonAmountCalculationFormatForFooter('SGST', commonTempData_1.commonTempData.unitAdjuster(((_47 = (_46 = this.data) === null || _46 === void 0 ? void 0 : _46.bill) === null || _47 === void 0 ? void 0 : _47.gstAmount) / 2));
            }
            html += this.commonAmountCalculationFormatForFooter('CGST', commonTempData_1.commonTempData.unitAdjuster(((_49 = (_48 = this.data) === null || _48 === void 0 ? void 0 : _48.bill) === null || _49 === void 0 ? void 0 : _49.gstAmount) / 2));
        }
        if ((_51 = (_50 = this.data) === null || _50 === void 0 ? void 0 : _50.bill) === null || _51 === void 0 ? void 0 : _51.cessAmount) {
            html += this.commonAmountCalculationFormatForFooter('CESS', commonTempData_1.commonTempData.unitAdjuster((_53 = (_52 = this.data) === null || _52 === void 0 ? void 0 : _52.bill) === null || _53 === void 0 ? void 0 : _53.cessAmount));
        }
        var additionalAmount = ((_55 = (_54 = this.data) === null || _54 === void 0 ? void 0 : _54.bill) === null || _55 === void 0 ? void 0 : _55.additionalAmount) || 0;
        if (additionalAmount) {
            html += this.commonAmountCalculationFormatForFooter('Labour/Delivery Charges', additionalAmount);
        }
        if ((_56 = this.data) === null || _56 === void 0 ? void 0 : _56.bill.roundOffValue) {
            html += this.commonAmountCalculationFormatForFooter('Round Off', "".concat((_57 = this.data) === null || _57 === void 0 ? void 0 : _57.bill.roundOffValue));
        }
        html += "\n      <div\n      style=\"display: flow-root;font-weight: bold;text-transform:uppercase;font-size: 16px;color: #000;width: 50%;float: left;\"\n      class=\"f-16 f-b\">\n        Total Amount\n      </div>\n      <div\n      style=\"display: flow-root;font-size: 16px;color: #000;font-weight: bold;width: 50%;float: left;text-align: right;\"\n      class=\"f-16 f-b dv-inv-temp-total-amount\">\n        \u20B9".concat(commonTempData_1.commonTempData.unitAdjuster(((_59 = (_58 = this.data) === null || _58 === void 0 ? void 0 : _58.bill) === null || _59 === void 0 ? void 0 : _59.totalAmount) || 0), "\n      </div>");
        //@ts-ignore
        var receivedOrPaid = (((_60 = this.data) === null || _60 === void 0 ? void 0 : _60.isPurchase) || ((_61 = this.data) === null || _61 === void 0 ? void 0 : _61.isExpense)) ? 'Paid Amount' : 'Received Amount';
        var modeOfPayment = ((_64 = (_63 = (_62 = this.data) === null || _62 === void 0 ? void 0 : _62.bill) === null || _63 === void 0 ? void 0 : _63.moneyIn) === null || _64 === void 0 ? void 0 : _64.txnMode) || '';
        var txnNo = ((_67 = (_66 = (_65 = this.data) === null || _65 === void 0 ? void 0 : _65.bill) === null || _66 === void 0 ? void 0 : _66.moneyIn) === null || _67 === void 0 ? void 0 : _67.txnRef) || '';
        if (receivedOrPaidAmt) {
            html += this.commonAmountCalculationFormatForFooter(receivedOrPaid, commonTempData_1.commonTempData.unitAdjuster(receivedOrPaidAmt || 0));
            if (modeOfPayment) {
                html += "<div class=\"flex\" style=\"display:flex;flex-wrap:wrap;justify-content:flex-start;width:100%;\">\n          <div style=\"display: flow-root;font-size: 14px;color: #000;width: 50%;float: left;\" class=\"f-14\">\n            Txn Mode : \n          </div>\n          <div style=\"display: flow-root;font-size: 14px;color: #000;width: 50%;float: left;text-align: right;\" class=\"f-14\">\n             ".concat(modeOfPayment, "\n          </div>\n          </div>");
                if (txnNo) {
                    html += "\n          <div class=\"flex\" style=\"display:flex;flex-wrap:wrap;justify-content:flex-start;width:100%;\">\n          <div style=\"display: flow-root;font-size: 14px;color: #000;width: 50%;float: left;\" class=\"f-14\">\n            Txn No : \n          </div>\n          <div style=\"display: flow-root;font-size: 14px;color: #000;width: 50%;float: left;text-align: right;\" class=\"f-14\">\n             ".concat(txnNo, "\n          </div>\n          </div>");
                }
            }
        }
        var balanceAmt = ((((_69 = (_68 = this.data) === null || _68 === void 0 ? void 0 : _68.bill) === null || _69 === void 0 ? void 0 : _69.totalAmount) || 0) - receivedOrPaidAmt);
        if (balanceAmt > 0.01) {
            html += this.commonAmountCalculationFormatForFooter('Balance', commonTempData_1.commonTempData.unitAdjuster(balanceAmt));
        }
        if (((_70 = this.data) === null || _70 === void 0 ? void 0 : _70.bill.partyPreviousBalance) > 0 && ((_72 = (_71 = this.data) === null || _71 === void 0 ? void 0 : _71.bill) === null || _72 === void 0 ? void 0 : _72.billCompleteStamp)) {
            html += this.commonAmountCalculationFormatForFooter('Previous Balance', commonTempData_1.commonTempData.unitAdjuster((_73 = this.data) === null || _73 === void 0 ? void 0 : _73.bill.partyPreviousBalance));
            html += "<p class=\"text-3i-h3\" style=\"text-align:right\">as on ".concat(commonTempData_1.commonTempData.dateToDDMMYY((_75 = (_74 = this.data) === null || _74 === void 0 ? void 0 : _74.bill) === null || _75 === void 0 ? void 0 : _75.billCompleteStamp), "</p>");
        }
        if (((_76 = this.data) === null || _76 === void 0 ? void 0 : _76.settings.showPreviousAmount) && ((_79 = (_78 = (_77 = this.data) === null || _77 === void 0 ? void 0 : _77.bill) === null || _78 === void 0 ? void 0 : _78.partyData) === null || _79 === void 0 ? void 0 : _79.ledgerCredit) != null && ((_82 = (_81 = (_80 = this.data) === null || _80 === void 0 ? void 0 : _80.bill) === null || _81 === void 0 ? void 0 : _81.partyData) === null || _82 === void 0 ? void 0 : _82.ledgerCredit) != undefined) {
            html += this.commonAmountCalculationFormatForFooter('Previous Balance', commonTempData_1.commonTempData.unitAdjuster(((_85 = (_84 = (_83 = this.data) === null || _83 === void 0 ? void 0 : _83.bill) === null || _84 === void 0 ? void 0 : _84.partyData) === null || _85 === void 0 ? void 0 : _85.ledgerCredit) || 0));
            if (balanceAmt > 0) {
                html += this.commonAmountCalculationFormatForFooter('Total Balance', commonTempData_1.commonTempData.unitAdjuster((((_88 = (_87 = (_86 = this.data) === null || _86 === void 0 ? void 0 : _86.bill) === null || _87 === void 0 ? void 0 : _87.partyData) === null || _88 === void 0 ? void 0 : _88.ledgerCredit) || 0) + balanceAmt));
            }
        }
        if (((_90 = (_89 = this.data) === null || _89 === void 0 ? void 0 : _89.bill) === null || _90 === void 0 ? void 0 : _90.totalSaving) > 0 && ((_92 = (_91 = this.data) === null || _91 === void 0 ? void 0 : _91.settings) === null || _92 === void 0 ? void 0 : _92.billSavingsAmount)) {
            html += "\n        <div\n        style=\"display: flow-root;font-weight: bold;text-transform:uppercase;font-size: 16px;color: #000;width: 50%;float: left;\"\n        class=\"f-16 f-b\">\n          Total Saving\n        </div>\n        <div\n        style=\"display: flow-root;font-size: 16px;color: #000;font-weight: bold;width: 50%;float: left;text-align: right;\"\n        class=\"f-16 f-b\">\n          \u20B9".concat(commonTempData_1.commonTempData.unitAdjuster((_94 = (_93 = this.data) === null || _93 === void 0 ? void 0 : _93.bill) === null || _94 === void 0 ? void 0 : _94.totalSaving), "\n        </div>");
        }
        // div2 closed
        html += "</div>";
        // main div closed
        html += "</div>";
        //wrapper div
        html += "</div>";
        return html;
    };
    Temp1.prototype.footerBankDetails = function () {
        var _a, _b;
        return __awaiter(this, void 0, void 0, function () {
            var obj, html, qrCodeBase64, signAlignCss, imgStr;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        obj = ((_a = this.data) === null || _a === void 0 ? void 0 : _a.profile) || null;
                        html = '';
                        // close this div in last
                        html += "\n      <div class=\"inv-footer-wrapper\" style=\"margin:0 !important; padding:0 !important\"> \n        <div style=\"height: 1px; width: 100%;\"></div>\n        <div style=\"display: flex;width: 100%;align-items: flex-start;background: #ffffff;padding:0 25px 0;\"\n        class=\"padding-002500 inv-footer\">";
                        //Naming this div as div1, close it after applying conditions
                        html += "\n      <div style=\"display: flex;width: 46%;float: left;\" class=\"m-5-new\">\n      ";
                        if (!(obj && ((obj === null || obj === void 0 ? void 0 : obj.bankName) || (obj === null || obj === void 0 ? void 0 : obj.bankAccountNo) || (obj === null || obj === void 0 ? void 0 : obj.bankIFSC) || (obj === null || obj === void 0 ? void 0 : obj.bankUPI)))) return [3 /*break*/, 3];
                        if (!((obj === null || obj === void 0 ? void 0 : obj.bankUPI) && this.data.qrPayLink)) return [3 /*break*/, 2];
                        return [4 /*yield*/, commonTempData_1.commonTempData.generateQR(this.data.qrPayLink)];
                    case 1:
                        qrCodeBase64 = _c.sent();
                        html += "\n          <div style=\"width: 30%;float: left;\" class=\"m-l-neg-10 m-l-neg-2\">\n            <img style=\"width: 100%;\" src=\"".concat(qrCodeBase64, "\">\n          </div>");
                        _c.label = 2;
                    case 2:
                        //Naming this div as div2, close it after applying conditions
                        html += "\n        <div style=\"width: 70%;float: left;padding: 0;\" class=\"\">\n        <div style=\"font-weight: bold;font-size: 12px;width: 100%;color: #000;\" class=\"f-16 f-b\">Bank Details</div>\n        ";
                        if (obj === null || obj === void 0 ? void 0 : obj.bankName) {
                            html += this.commonBankDetailsFormatForFooter(obj === null || obj === void 0 ? void 0 : obj.bankName);
                        }
                        if (obj === null || obj === void 0 ? void 0 : obj.bankAccountNo) {
                            html += this.commonBankDetailsFormatForFooter('Acc No : ' + (obj === null || obj === void 0 ? void 0 : obj.bankAccountNo));
                        }
                        if ((obj === null || obj === void 0 ? void 0 : obj.bankAccountNo) && (obj === null || obj === void 0 ? void 0 : obj.bankAccountType)) {
                            html += this.commonBankDetailsFormatForFooter('Acc Type : ' + (obj === null || obj === void 0 ? void 0 : obj.bankAccountType));
                        }
                        if (obj === null || obj === void 0 ? void 0 : obj.bankIFSC) {
                            html += this.commonBankDetailsFormatForFooter('IFSC : ' + (obj === null || obj === void 0 ? void 0 : obj.bankIFSC));
                        }
                        if (obj === null || obj === void 0 ? void 0 : obj.bankUPI) {
                            html += this.commonBankDetailsFormatForFooter(obj === null || obj === void 0 ? void 0 : obj.bankUPI);
                        }
                        else if (!(obj === null || obj === void 0 ? void 0 : obj.bankUPI) && (obj === null || obj === void 0 ? void 0 : obj.bankAccountNo) && (obj === null || obj === void 0 ? void 0 : obj.bankIFSC)) {
                            html += this.commonBankDetailsFormatForFooter((obj === null || obj === void 0 ? void 0 : obj.bankAccountNo) + '@' + (obj === null || obj === void 0 ? void 0 : obj.bankIFSC) + '.ifsc.npci');
                        }
                        // div2 closed
                        html += "</div>";
                        return [3 /*break*/, 4];
                    case 3:
                        html += "\n        <div style=\"width: 70%;float: left;padding: 0;\" class=\"addBankDetails no-print\">\n        <div style=\"font-weight: bold;font-size: 12px;width: 100%;\" class=\"f-16 f-b\">\n         <a> Add Bank Details <img src=\"/assets/icons/edit-inv.svg\" class=\"icons-height\">\n         </a>\n        </div>\n        </div>\n        ";
                        _c.label = 4;
                    case 4:
                        // div1 closed
                        html += "</div>";
                        if (!this.data.settings.showSignatureNotRequiredText && this.data.settings.showSignatureInTemplates) {
                            html += this.commonSignatureFormatForFooter(commonTempData_1.commonTempData === null || commonTempData_1.commonTempData === void 0 ? void 0 : commonTempData_1.commonTempData.whiteLogo, 'Customer Signature');
                        }
                        if (!this.data.settings.showSignatureNotRequiredText) {
                            signAlignCss = '';
                            if (!this.data.settings.showSignatureInTemplates) {
                                signAlignCss = 'margin-left:26%';
                            }
                            imgStr = ((_b = this.data) === null || _b === void 0 ? void 0 : _b.profile.signatureLink) || (commonTempData_1.commonTempData === null || commonTempData_1.commonTempData === void 0 ? void 0 : commonTempData_1.commonTempData.whiteLogo);
                            if (imgStr.indexOf(".png") != -1 || imgStr.indexOf(".jpg") != -1 || imgStr.indexOf(".jpeg") != -1 || imgStr.indexOf(".webp") != -1) {
                                imgStr = "https://img.ezobanks.com/".concat(imgStr);
                            }
                            if (imgStr) {
                                html += "\n          <div style=\"display: flow-root;width: 27%;float: left;padding: 0 20px 0;".concat(signAlignCss, "\" class=\"padding-16-new m-5-new\">\n          <img style=\"width: 100%;object-fit: contain;object-position: bottom;margin-bottom:5px; height:130px;\" class=\"m-5-new\" src=\"").concat(imgStr, "\">\n          <div style=\"width: 100%;text-align: center;font-size: 12px;\" class=\"f-16\">Authorized Signatory</div>\n          </div>\n          ");
                            }
                            else {
                                html += "\n          <div style=\"display: flow-root;width: 27%;float: left;padding: 0 20px 0;".concat(signAlignCss, "\" class=\"padding-16-new m-5-new\">\n          <div style=\"width: 100%;text-align: center;font-size: 12px; margin-top:135px;\" class=\"f-16\">Authorized Signatory</div>\n          </div>\n          ");
                            }
                        }
                        // Main div closed
                        html += "</div>";
                        // wrapper div  
                        html += "</div>";
                        return [2 /*return*/, html];
                }
            });
        });
    };
    Temp1.prototype.footerTNCAndNotes = function () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
        //TODO:Terms and Condition not showing properly while downloading.
        var html = '';
        if ((_b = (_a = this.data) === null || _a === void 0 ? void 0 : _a.bill) === null || _b === void 0 ? void 0 : _b.note) {
            html += this.commmonTNCAndNotesFormat('Notes', (_d = (_c = this.data) === null || _c === void 0 ? void 0 : _c.bill) === null || _d === void 0 ? void 0 : _d.note, 'inv-section-notes');
        }
        if ((_f = (_e = this.data) === null || _e === void 0 ? void 0 : _e.bill) === null || _f === void 0 ? void 0 : _f.tnc) {
            html += this.commmonTNCAndNotesFormat('Terms and Conditions', (((_h = (_g = this.data) === null || _g === void 0 ? void 0 : _g.bill) === null || _h === void 0 ? void 0 : _h.tnc) ? ((_k = (_j = this.data) === null || _j === void 0 ? void 0 : _j.bill) === null || _k === void 0 ? void 0 : _k.tnc) + '' : '').replace(/\n/g, '<br/>'), 'inv-section-terms');
        }
        html += this.commmonTNCAndNotesFormat("<a class=\"addTNC no-print\">Change Terms And Conditions<img src=\"/assets/icons/edit-inv.svg\" class=\"icons-height\"></a>", '', 'addTNC');
        if (this.data.settings.showSignatureNotRequiredText) {
            html += "\n        <div class=\"inv-no-signature-wrapper\" style=\"margin:0 !important; padding:0 !important\"> \n          <div style=\"height: 1px; width: 100%;\"></div>\n          <div style=\"display: flex;width: 100%;align-items: flex-start;background: white;padding:0 25px 0px;\"\n          class=\"padding-002510-new inv-no-signature\">\n              <div style=\"width: 100%;text-align: center;font-size: 12px;\" class=\"f-14\">\n                This is computer generated Bill. Signature Not Required\n              </div>\n          </div>\n        </div>  \n        ";
        }
        return html;
    };
    Temp1.prototype.commmonTNCAndNotesFormat = function (title, value, sectionClassName) {
        return "\n        <div class=\"".concat(sectionClassName, "-wrapper\" style=\"margin:0 !important; padding:0 !important;\"> \n          <div style=\"height: 1px; width: 100%;\"></div>\n          <div\n          style=\"display: flex;flex-wrap:wrap;width: 100%;background: #ffffff;padding:0 25px 0px;\"\n          class=\"padding-002525-new m-5-new ").concat(sectionClassName, "\">\n            <div style=\"font-weight: bold;width: 100%;color: #000;\" class=\"f-14 f-b\">").concat(title, "</div>\n            <div style=\"width: 100%;\" class=\"f-14\">\n              ").concat(value, "\n            </div>\n          </div>\n        </div>\n        ");
    };
    Temp1.prototype.commonBankDetailsFormatForFooter = function (text) {
        return " <div style=\"font-size: 12px;width: 100%;\" class=\"f-16\">".concat(text, "</div>");
    };
    Temp1.prototype.commonSignatureFormatForFooter = function (imgBase64, title) {
        if (imgBase64.indexOf(".png") != -1 || imgBase64.indexOf(".jpg") != -1 || imgBase64.indexOf(".jpeg") != -1 || imgBase64.indexOf(".webp") != -1) {
            imgBase64 = "https://img.ezobanks.com/".concat(imgBase64);
        }
        //TODO: Add css and If condition if no img
        return "\n      <div style=\"display: flow-root;width: 27%;float: left;padding: 0 20px 0;\" class=\"padding-16-new m-5-new\">\n      <img style=\"width: 100%;object-fit: contain;object-position: bottom;margin-bottom:5px; height:130px;\" class=\"m-5-new imageBase64\" src=\"".concat(imgBase64, "\">\n      <div style=\"width: 100%;text-align: center;font-size: 12px;\" class=\"f-16\">").concat(title, "</div>\n      </div>\n      ");
    };
    Temp1.prototype.commonAmountCalculationFormatForFooter = function (title, value) {
        return "\n      <div class=\"flex\" style=\"display:flex;flex-wrap:wrap;justify-content:flex-start;width:100%;\">\n      <div style=\"display: flow-root;font-size: 14px;color: #000;width: 50%;float: left;\"\n      class=\"f-14\">\n        ".concat(title, "\n      </div>\n      <div\n      style=\"display: flow-root;font-size: 14px;color: #000;width: 50%;float: left;text-align: right;\"\n      class=\"f-14\">\n         \u20B9").concat(value, "\n      </div>\n      </div>\n      ");
    };
    Temp1.prototype.commonAmountCalculationFormatForFooterForMoneyIn = function (title, value) {
        return "\n      <div class=\"flex\" style=\"display:flex;flex-wrap:wrap;justify-content:flex-start;width:100%;\">\n      <div style=\"display: flow-root;font-size: 14px;color: #000;width: 50%;float: left; font-weight:bold\"\n      class=\"f-14 m-5-new\">\n        ".concat(title, "\n      </div>\n      <div\n      style=\"display: flow-root;font-size: 14px;color: #000;width: 50%;float: left;text-align: right;\"\n      class=\"f-14 m-5-new\">\n         ").concat(value, "\n      </div>\n      </div>\n      ");
    };
    Temp1.prototype.commonLeftSideFormatForPartyDetails = function (text) {
        return "\n      <div style=\"display: flow-root;font-size: 14px;color: #000;\" class=\"f-14 m-5-new\">\n          ".concat(text, "\n      </div>");
    };
    Temp1.prototype.commonRightSideFormatForPartyDetails = function (title, value) {
        return "\n      <div class=\"flex\" style=\"display:flex;flex-wrap:wrap;justify-content:flex-start;width:100%;\">\n      <div\n      style=\"display: flow-root;font-weight: bold;font-size: 14px;color: #000;width: 50%;float: left;\"\n      class=\"f-14 f-b\">\n        ".concat(title, " :\n      </div>\n\n      <div\n      style=\"display: flow-root;font-size: 14px;color: #000;width: 50%;float: left;text-align: right;\"\n      class=\"f-14\">\n         ").concat(value, "\n      </div></div>");
    };
    Temp1.prototype.commonDateFormat = function (dateName, timeStamp) {
        return "\n        <div\n          style=\"display: flow-root;font-weight: bold;font-size: 14px;color: #000;width: 50%;float: left;\"\n          class=\"f-14 f-b m-5-new\">\n            ".concat(dateName, " :\n          </div>\n\n          <div\n          style=\"display: flow-root;font-size: 14px;color: #000;width: 50%;float: left;text-align: right;\"\n          class=\"f-14 m-5-new\">\n             ").concat(commonTempData_1.commonTempData.dateToDDMMYYY(timeStamp), "\n        </div>\n      ");
    };
    Temp1.prototype.commonDateTimeFormat = function (dateName, timeStamp) {
        return "\n        <div\n          style=\"display: flow-root;font-weight: bold;font-size: 14px;color: #000;width: 50%;float: left;\"\n          class=\"f-14 f-b m-5-new\">\n            ".concat(dateName, " :\n          </div>\n\n          <div\n          style=\"display: flow-root;font-size: 14px;color: #000;width: 50%;float: left;text-align: right;\"\n          class=\"f-14 m-5-new\">\n             ").concat(commonTempData_1.commonTempData.dateToDDMMYYYHHMMAP(timeStamp), "\n        </div>\n      ");
    };
    return Temp1;
}());
exports.Temp1 = Temp1;
//# sourceMappingURL=temp1.js.map