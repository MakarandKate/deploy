"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.TallyHSN = void 0;
var EzoAd_1 = __importDefault(require("../utils/EzoAd"));
var commonTempData_1 = require("./commonTempData");
var TallyHSN = /** @class */ (function () {
    function TallyHSN(data) {
        this.data = data;
        this.totalSaving = 0;
        this.finalHsnTableObj = {};
        this.isTax = false;
        this.sameState = false;
    }
    TallyHSN.prototype.main = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _b = (_a = "\n      <style>\n      ".concat(commonTempData_1.commonTempData.tallyTemplateCss(), "\n      </style>\n      <span class=\"st-inv-mobi-screen\">\n        <style>").concat(commonTempData_1.commonTempData.mobileCss(), "</style>\n      </span>\n      <span class=\"invoice-template-main\">\n        <div \n          class=\"container-new border-adj inv-body-holder\"\n          style=\"display:flow-root;width:").concat(this.data.pageWidth || 210, "mm;background: white;padding: 0;padding-bottom: 70px;visibility: visible;-webkit-print-color-adjust: exact !important;color-adjust: exact !important;\">\n          <div class=\"inv-title-holder-wrapper\" style=\"margin:0 !important; padding:0 !important\">\n            <div style=\"height: 1px; width: 100%;\">\n            </div>\n            ").concat(this.invoiceTitle(), "\n          </div>\n          ").concat(this.header(), "\n          ").concat(this.hsnSacTable(), "\n          ")).concat;
                        return [4 /*yield*/, this.footer()];
                    case 1: return [2 /*return*/, _b.apply(_a, [_c.sent(), "\n          <div class=\"inv-bottom-wrapper\" style=\"margin:0 !important; padding:0 !important\">\n            <div style=\"height: 1px; width: 100%;\">\n            </div>\n            <div style=\"height: 9px;display: flow-root;width:100%;text-align:right;font-size: 12px;color: #d3d3d3;\" class=\"f-16 inv-bottom\">\n            </div>\n          </div>\n        </div>\n      </span>\n      "])];
                }
            });
        });
    };
    TallyHSN.prototype.header = function () {
        return "\n        ".concat(this.sellerAndPartyAndTemplateBody(), "\n        ");
    };
    TallyHSN.prototype.footer = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = "\n      <div class=\"inv-footer-wrapper\" style=\"margin:0 !important; padding:0 !important\">\n      <div style=\"height: 1px; width: 100%;\"></div>\n      <div class=\"margin-15-new inv-footer\" style=\"margin:0 15px;border: 1px solid #000000;\">\n      <div style=\"width: 100%;display:flex;flex-wrap: wrap;\">\n        ".concat;
                        return [4 /*yield*/, this.invoiceAmtAndBankDetails()];
                    case 1: return [2 /*return*/, _a.apply("\n      <div class=\"inv-footer-wrapper\" style=\"margin:0 !important; padding:0 !important\">\n      <div style=\"height: 1px; width: 100%;\"></div>\n      <div class=\"margin-15-new inv-footer\" style=\"margin:0 15px;border: 1px solid #000000;\">\n      <div style=\"width: 100%;display:flex;flex-wrap: wrap;\">\n        ", [_b.sent(), "\n        "]).concat(this.notesAndSignature(), "\n        ").concat(this.termsAndCondition(), "\n      </div>\n      </div>\n      </div>\n      ")];
                }
            });
        });
    };
    TallyHSN.prototype.termsAndCondition = function () {
        var _a, _b;
        if (!((_a = this.data) === null || _a === void 0 ? void 0 : _a.tnc)) {
            return '';
        }
        return "\n        <div class=\"padding-10-new\"\n            style=\"display:flow-root;width: 100%;padding: 0 5px;border-top: 1px solid #000000;\">\n            <div class=\"f-14\" style=\"font-size: 14px;width: 100%;color:#000;text-transform: uppercase;\"><b\n                style=\"color:#000;\">Terms and Conditions</b></div>\n            <div class=\"f-14\" style=\"font-size: 14px;width: 100%;color:#000;\">".concat((_b = this.data) === null || _b === void 0 ? void 0 : _b.tnc, "</div>\n          </div>\n        ");
    };
    TallyHSN.prototype.notesAndSignature = function () {
        var _a, _b, _c;
        //S:div4
        var html = '';
        html += "\n      <div class=\"padding-10-new\" style=\"display:flow-root;width: 60%;padding: 0 5px;border-right: 1px solid #000000;\">";
        if ((_a = this.data) === null || _a === void 0 ? void 0 : _a.note) {
            html += "\n        <div class=\"f-14\" style=\"font-size: 14px;width: 100%;color:#000;text-transform: uppercase;\"><b\n        style=\"color:#000;\">Notes</b></div>\n        <div class=\"f-14\" style=\"font-size: 14px;width: 100%;color:#000;\">".concat((_b = this.data) === null || _b === void 0 ? void 0 : _b.note, "\n        </div>\n        ");
        }
        //E:div4
        html += '</div>';
        //S:div5
        html += this.commonSignatureFormatForFooter(commonTempData_1.commonTempData.whiteLogo, 'Customer Signature');
        html += this.commonSignatureFormatForFooter((((_c = this.data) === null || _c === void 0 ? void 0 : _c.signature) || (commonTempData_1.commonTempData === null || commonTempData_1.commonTempData === void 0 ? void 0 : commonTempData_1.commonTempData.whiteLogo)), 'Authorized Signatory');
        return html;
    };
    TallyHSN.prototype.commonSignatureFormatForFooter = function (imgBase64, title) {
        if (imgBase64.indexOf(".png") != -1 || imgBase64.indexOf(".jpg") != -1 || imgBase64.indexOf(".jpeg") != -1 || imgBase64.indexOf(".webp") != -1) {
            imgBase64 = "https://img.ezobanks.com/".concat(imgBase64);
        }
        return "\n      <div class=\"padding-10-new\" style=\"display: flex;width: 20%;padding: 0 5px;flex-wrap: wrap;align-items: flex-end;\">\n        <img src=\"".concat(imgBase64, "\" style=\"width: 100%;height: auto;margin:auto\">\n        <div class=\"f-12\" style=\"font-size: 12px;color: #000;text-align: center;width: 100%;\">").concat(title, "</div>\n      </div>\n      ");
    };
    TallyHSN.prototype.invoiceAmtAndBankDetails = function () {
        var _a, _b, _c, _d, _e;
        return __awaiter(this, void 0, void 0, function () {
            var html, obj, qrCodeBase64;
            return __generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        html = '';
                        obj = ((_b = (_a = this.data) === null || _a === void 0 ? void 0 : _a.user) === null || _b === void 0 ? void 0 : _b.profileData) || null;
                        //S: div1
                        html += "<div class=\"padding-10-new\"style=\"display:flow-root;width: 50%;border-bottom: 1px solid #000000;padding: 0 5px;\">";
                        html += "\n      <div class=\"f-14\" style=\"font-size: 14px;color:#000;font-weight:bold;text-transform: uppercase;width: 100%;\">\n      INVOICE AMOUNT IN WORDS</div>\n      <div class=\"f-14\" style=\"font-size: 14px;color:#000;width: 100%;\">\n      ".concat(commonTempData_1.commonTempData.convertToIndianCurrency(((_c = this.data) === null || _c === void 0 ? void 0 : _c.totalAmount).toString()), "\n      </div>\n      ");
                        //E: div1
                        html += "</div>";
                        //S: div2
                        html += " <div style=\"width: 50%;display:flow-root;border-bottom: 1px solid #000000;border-left: 1px solid #000000;\">";
                        if (!(obj && ((obj === null || obj === void 0 ? void 0 : obj.bankName) || (obj === null || obj === void 0 ? void 0 : obj.bankAccountNo) || (obj === null || obj === void 0 ? void 0 : obj.ifscCode) || (obj === null || obj === void 0 ? void 0 : obj.upi)))) return [3 /*break*/, 3];
                        if (!((obj === null || obj === void 0 ? void 0 : obj.upi) && ((_d = this.data) === null || _d === void 0 ? void 0 : _d.qrPayLink))) return [3 /*break*/, 2];
                        return [4 /*yield*/, commonTempData_1.commonTempData.generateQR((_e = this.data) === null || _e === void 0 ? void 0 : _e.qrPayLink)];
                    case 1:
                        qrCodeBase64 = _f.sent();
                        html += "\n          <div style=\"width: 30%;float: left;\">\n            <img style=\"width: 100%;\" src=\"".concat(qrCodeBase64, "\">\n          </div>");
                        _f.label = 2;
                    case 2:
                        //S: div3
                        html += "\n          <div style=\"width: 100%;padding: 0 5px;\" class=\"padding-10-new\">\n          <div class=\"f-14\" style=\"width:100%;text-align: left;color:#000;font-size: 14px;text-transform: uppercase;\">\n          <b style=\"color:#000;\">Bank Details</b>\n          </div>\n          ";
                        if (obj === null || obj === void 0 ? void 0 : obj.bankName) {
                            html += this.commonBankDetailsFormatForFooter(obj === null || obj === void 0 ? void 0 : obj.bankName);
                        }
                        if (obj === null || obj === void 0 ? void 0 : obj.bankAccountNo) {
                            html += this.commonBankDetailsFormatForFooter('Acc No : ' + (obj === null || obj === void 0 ? void 0 : obj.bankAccountNo));
                        }
                        if ((obj === null || obj === void 0 ? void 0 : obj.bankAccountNo) && (obj === null || obj === void 0 ? void 0 : obj.accountType)) {
                            html += this.commonBankDetailsFormatForFooter('Acc Type : ' + (obj === null || obj === void 0 ? void 0 : obj.accountType));
                        }
                        if (obj === null || obj === void 0 ? void 0 : obj.ifscCode) {
                            html += this.commonBankDetailsFormatForFooter('IFSC :' + (obj === null || obj === void 0 ? void 0 : obj.ifscCode));
                        }
                        if (obj === null || obj === void 0 ? void 0 : obj.upi) {
                            html += this.commonBankDetailsFormatForFooter(obj === null || obj === void 0 ? void 0 : obj.upi);
                        }
                        else if (!(obj === null || obj === void 0 ? void 0 : obj.upi) && (obj === null || obj === void 0 ? void 0 : obj.bankAccountNo) && (obj === null || obj === void 0 ? void 0 : obj.ifscCode)) {
                            html += this.commonBankDetailsFormatForFooter((obj === null || obj === void 0 ? void 0 : obj.bankAccountNo) + '@' + (obj === null || obj === void 0 ? void 0 : obj.ifscCode) + '.ifsc.npci');
                        }
                        // div3 closed
                        html += "</div>";
                        _f.label = 3;
                    case 3:
                        //E: div2
                        html += "</div>";
                        return [2 /*return*/, html];
                }
            });
        });
    };
    TallyHSN.prototype.commonBankDetailsFormatForFooter = function (text) {
        return "\n      <div class=\"f-14\" style=\"width:100%;text-align: left;color:#000;font-size: 14px;\">".concat(text, "</div>\n      ");
    };
    TallyHSN.prototype.hsnSacTable = function () {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        if (!Object.keys(this.finalHsnTableObj).length) {
            return '';
        }
        var partyEl = (((_b = (_a = this.data) === null || _a === void 0 ? void 0 : _a.partyInfo) === null || _b === void 0 ? void 0 : _b.profileData) || null);
        if (partyEl && ((partyEl === null || partyEl === void 0 ? void 0 : partyEl.addressState) == ((_e = (_d = (_c = this.data) === null || _c === void 0 ? void 0 : _c.user) === null || _d === void 0 ? void 0 : _d.profileData) === null || _e === void 0 ? void 0 : _e.addressState))) {
            this.sameState = true;
        }
        else if ((!(partyEl === null || partyEl === void 0 ? void 0 : partyEl.addressState) || !((_h = (_g = (_f = this.data) === null || _f === void 0 ? void 0 : _f.user) === null || _g === void 0 ? void 0 : _g.profileData) === null || _h === void 0 ? void 0 : _h.addressState))) {
            this.sameState = true;
        }
        var html = '';
        html += "<div class=\"inv-section-hsn-table-wrapper\" style=\"margin:0 !important; padding:0 !important\">\n             <div style=\"height: 1px; width: 100%;\"></div>";
        //S: Main div
        html += "<div class=\"margin-15-new inv-section-hsn-table\" style=\"margin: 0 15px;border: 1px solid #000000;border-left: 0;\">";
        html += "<table style=\"width: 100%; text-align: center;table-layout: fixed;\">";
        html += "<thead class=\"no-b-btm\" style=\"background-color:#dbdaf3;border-bottom: 1px solid #000000;-webkit-print-color-adjust: exact !important;color-adjust: exact !important;\">";
        html += "\n        <tr>\n        <td class=\"font-12 padding-5555\" rowspan=\"2\"\n          style=\"text-transform:uppercase;color:#000;text-align: center !important;padding:0 2px;border-top:0;border-right:0;\">\n          HSN/SAC</td>\n        <td class=\"font-12 padding-5555\" rowspan=\"2\"\n          style=\"text-transform:uppercase;color:#000;text-align: center !important;padding:0 2px;border-top:0;border-right:0;\">\n          Taxable value</td>\n        <td class=\"font-10 padding-5555\" colspan=\"2\"\n          style=\"text-transform:uppercase;color:#000;text-align: center;font-weight: normal;padding:0 2px;border-top:0;border-bottom:0;border-right:0;\">\n          ".concat((!this.sameState && this.isTax) ? 'IGST' : 'SGST', " \n        </td>");
        if (this.sameState && this.isTax) {
            html += "<td class=\"font-10 padding-5555\" colspan=\"2\"\n          style=\"text-transform:uppercase;color:#000;text-align: center;font-weight: normal;padding:0 2px;border-top:0;border-bottom:0;border-right:0;\">\n          CGST</td>";
        }
        html += "<td class=\"font-12 padding-5555\" rowspan=\"2\"\n          style=\"text-transform:uppercase;color:#000;text-align: center;padding:0 2px;border-right:0;border-top:0;border-right:0;border-right: 0;\">\n          Total Tax</td>\n        </tr>\n        <tr>\n          <td class=\"font-10 padding-5555\"\n            style=\"font-weight: normal;text-transform:uppercase;color:#000;text-align: left;padding:0 2px;border-right:0;\">\n            Rate</td>\n          <td class=\"font-10 padding-5555\"\n            style=\"font-weight: normal;text-transform:uppercase;color:#000;text-align: right !important;padding:0 2px;border-right:0;\">\n            Amt</td>";
        if (this.sameState && this.isTax) {
            html += "<td class=\"font-10 padding-5555\"\n                style=\"font-weight: normal;text-transform:uppercase;color:#000;text-align: left;padding:0 2px;border-right:0;\">\n                Rate</td>\n              <td class=\"font-10 padding-5555\"\n                style=\"font-weight: normal;text-transform:uppercase;color:#000;text-align: right;padding:0 2px;border-right:0;\">\n                Amt</td>";
        }
        html += "</tr>";
        html += "</thead>";
        html += "<tbody>";
        html += this.makeHsnSacRows();
        html += "</tbody>";
        html += "</table>";
        //E: Main div
        html += "</div>";
        // wrapper div
        html += "</div>";
        return html;
    };
    TallyHSN.prototype.makeHsnSacRows = function () {
        var html = '';
        for (var key in this.finalHsnTableObj) {
            if (this.finalHsnTableObj[key]) {
                html += this.hsnSacRow(key, this.finalHsnTableObj[key]);
            }
        }
        return html;
    };
    TallyHSN.prototype.hsnSacRow = function (hsnCode, hsnData) {
        var _a, _b, _c, _d, _e, _f, _g;
        var html = '';
        for (var i = 0; i < hsnData.length; i++) {
            var element = hsnData[i];
            html += "\n          <tr>\n          <td class=\"padding-5555 font-12\" style=\"color:#000;border-bottom: 0;border-right:0;border-top: 0;padding:0 2px;text-align: center;\">\n            ".concat((hsnCode != 'noHsn') ? hsnCode : '', "</td>\n          <td class=\"padding-5555 font-12\"\n            style=\"color:#000;border-bottom: 0;border-right:0;border-top: 0;padding:0 2px;text-align: center !important;\">\n            ").concat(commonTempData_1.commonTempData.unitAdjuster((element === null || element === void 0 ? void 0 : element.taxableValue) || 0), "</td>\n          <td class=\"padding-5555 font-12\" style=\"color:#000;border-bottom: 0;border-right:0;border-top: 0;padding:0 2px;text-align: left;\">\n          ").concat((!this.sameState && this.isTax) ? (_a = (+(element === null || element === void 0 ? void 0 : element.taxPercentage))) === null || _a === void 0 ? void 0 : _a.toFixed(2) : (_b = (+(element === null || element === void 0 ? void 0 : element.taxPercentage) / 2)) === null || _b === void 0 ? void 0 : _b.toFixed(2), "%\n          </td>\n          <td class=\"padding-5555 font-12\" style=\"color:#000;border-bottom: 0;border-right:0;border-top: 0;padding:0 2px;text-align: right;\">\n          ").concat((!this.sameState && this.isTax) ? (_c = (element === null || element === void 0 ? void 0 : element.taxAmount)) === null || _c === void 0 ? void 0 : _c.toFixed(2) : (_d = ((element === null || element === void 0 ? void 0 : element.taxAmount) / 2)) === null || _d === void 0 ? void 0 : _d.toFixed(2), "</td>\n          ");
            if (this.sameState && this.isTax) {
                html += "<td class=\"padding-5555 font-12\" style=\"color:#000;border-bottom: 0;border-right:0;border-top: 0;padding:0 2px;text-align: left;\">\n            ".concat((_e = (+(element === null || element === void 0 ? void 0 : element.taxPercentage) / 2)) === null || _e === void 0 ? void 0 : _e.toFixed(2), "%\n            </td>\n            <td class=\"padding-5555 font-12\" style=\"color:#000;border-bottom: 0;border-right:0;border-top: 0;padding:0 2px;text-align: right;\">\n            ").concat((_f = ((element === null || element === void 0 ? void 0 : element.taxAmount) / 2)) === null || _f === void 0 ? void 0 : _f.toFixed(2), "</td>\n            ");
            }
            html += "<td class=\"padding-5555 font-12\"\n            style=\"color:#000;border-bottom: 0;border-right:0;border-top: 0;padding:0 2px;text-align: right;border-right: 0;\">\n            ".concat((_g = (element === null || element === void 0 ? void 0 : element.taxAmount)) === null || _g === void 0 ? void 0 : _g.toFixed(2), "</td>\n            </tr>\n            ");
        }
        return html;
    };
    TallyHSN.prototype.invoiceTitle = function () {
        var _a, _b;
        var html = '';
        var invoiceTitle = commonTempData_1.commonTempData.getInvoiceTitle(this.data);
        //S: div1
        html += "<div class=\"inv-title-holder\" style=\"display: flex;margin: 0px 15px 15px 15px;margin-bottom: 0 !important;\">";
        if (invoiceTitle) {
            html += "\n        <div class=\"f-14\" style=\"font-size: 14px;text-transform: uppercase;color: #000;\">".concat(invoiceTitle, "</div>\n        ");
        }
        else {
            html += "\n        <div class=\"f-14\" style=\"font-size: 14px;text-transform: uppercase;color: #000;\">TAX INVOICE</div>\n        ";
        }
        if ((_a = this.data) === null || _a === void 0 ? void 0 : _a.addressTo) {
            html += "\n        <div class=\"f-14 margin-16\" style=\"font-size: 14px;text-transform: uppercase;color: grey;margin-left: 16px;\">\n            ".concat((_b = this.data) === null || _b === void 0 ? void 0 : _b.addressTo, "\n        </div>\n        ");
        }
        //E: div1
        html += "</div>";
        return html;
    };
    TallyHSN.prototype.sellerAndPartyAndTemplateBody = function () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, _31, _32, _33, _34, _35, _36, _37, _38, _39, _40, _41, _42, _43, _44, _45, _46, _47, _48, _49, _50, _51, _52, _53, _54, _55, _56, _57, _58, _59, _60, _61, _62, _63, _64, _65, _66;
        var html = '';
        html += "<div class=\"margin-15-new\" style=\"margin:0 15px;margin-top: 0 !important;\">\n      <div style=\"width: 100%;display:flex;flex-wrap: wrap;border: 1px solid #000000;\">\n      <div class=\"inv-header-wrapper\" style=\"margin:0 !important; padding:0 !important;width: 100%;display:flex;flex-wrap: wrap;\">\n      <div style=\"height: 1px; width: 100%;\"></div>\n      <div class=\"inv-header\" style=\"width: 100%;display:flex;flex-wrap: wrap;\">\n        <div class=\"padding-10-new\" style=\"display:flex;width: 50%;border-right: 1px solid #000000;padding: 0 5px;align-items: flex-start;\">\n      ";
        if ((_a = this.data) === null || _a === void 0 ? void 0 : _a.logo) {
            html += "\n        <div style=\"width: 25%;height: auto;\">\n          <img src=\"".concat((_b = this.data) === null || _b === void 0 ? void 0 : _b.logo, "\" style=\"display: block;margin-left: auto;width:100%;\">\n        </div>\n        ");
        }
        else {
            html += "\n        <div  class=\"addLogo\" style=\"display: flow-root;float:left;background: white;width: 20%;margin: 5px 0 7px;height:auto;padding: 0 5px;display: flex;flex-wrap: wrap;border-radius: 6px;border: 2px dashed #dbb73F;\">\n          <img src=\"/assets/icons/upload-photo.png\" style=\"display: block;width:40%;margin: 5px auto;\">\n          <span style=\"font-size:14px;width:100%;text-align:center;color: #000;\" class=\"f-16\">Upload Logo</span>\n        </div>\n        ";
        }
        var sellerProfileData = (_d = (_c = this.data) === null || _c === void 0 ? void 0 : _c.user) === null || _d === void 0 ? void 0 : _d.profileData;
        html += "<div class=\"padding-00000010\" style=\"width:75%;padding-left: 10px;\">";
        if ((_g = (_f = (_e = this.data) === null || _e === void 0 ? void 0 : _e.user) === null || _f === void 0 ? void 0 : _f.profileData) === null || _g === void 0 ? void 0 : _g.legalName) {
            html += "<div class=\"f-18\" style=\"font-size: 18px;color:".concat((_h = this.data) === null || _h === void 0 ? void 0 : _h.color, ";\">").concat((_l = (_k = (_j = this.data) === null || _j === void 0 ? void 0 : _j.user) === null || _k === void 0 ? void 0 : _k.profileData) === null || _l === void 0 ? void 0 : _l.legalName, "</div>");
        }
        if ((sellerProfileData === null || sellerProfileData === void 0 ? void 0 : sellerProfileData.addressLine1) || (sellerProfileData === null || sellerProfileData === void 0 ? void 0 : sellerProfileData.addressState)) {
            html += this.commonLeftSideOfSellerDetails("".concat(sellerProfileData === null || sellerProfileData === void 0 ? void 0 : sellerProfileData.addressLine1).concat((sellerProfileData === null || sellerProfileData === void 0 ? void 0 : sellerProfileData.addressState) ? ', ' + (sellerProfileData === null || sellerProfileData === void 0 ? void 0 : sellerProfileData.addressState) : '').concat((sellerProfileData === null || sellerProfileData === void 0 ? void 0 : sellerProfileData.addressPincode) ? ', ' + (sellerProfileData === null || sellerProfileData === void 0 ? void 0 : sellerProfileData.addressPincode) : ''));
        }
        if (((_p = (_o = (_m = this.data) === null || _m === void 0 ? void 0 : _m.user) === null || _o === void 0 ? void 0 : _o.profileData) === null || _p === void 0 ? void 0 : _p.contactPersonPhone) && ((_s = (_r = (_q = this.data) === null || _q === void 0 ? void 0 : _q.user) === null || _r === void 0 ? void 0 : _r.profileData) === null || _s === void 0 ? void 0 : _s.contactPersonPhone) != '0') {
            html += this.commonLeftSideOfSellerDetails((_v = (_u = (_t = this.data) === null || _t === void 0 ? void 0 : _t.user) === null || _u === void 0 ? void 0 : _u.profileData) === null || _v === void 0 ? void 0 : _v.contactPersonPhone);
        }
        if ((_y = (_x = (_w = this.data) === null || _w === void 0 ? void 0 : _w.user) === null || _x === void 0 ? void 0 : _x.profileData) === null || _y === void 0 ? void 0 : _y.contactPersonEmail) {
            html += this.commonLeftSideOfSellerDetails((_1 = (_0 = (_z = this.data) === null || _z === void 0 ? void 0 : _z.user) === null || _0 === void 0 ? void 0 : _0.profileData) === null || _1 === void 0 ? void 0 : _1.contactPersonEmail);
        }
        if ((_4 = (_3 = (_2 = this.data) === null || _2 === void 0 ? void 0 : _2.user) === null || _3 === void 0 ? void 0 : _3.profileData) === null || _4 === void 0 ? void 0 : _4.gstNumber) {
            html += "\n        <div class=\"f-14\" style=\"font-size: 14px;color:#000;font-weight:bold;\">".concat((_7 = (_6 = (_5 = this.data) === null || _5 === void 0 ? void 0 : _5.user) === null || _6 === void 0 ? void 0 : _6.profileData) === null || _7 === void 0 ? void 0 : _7.gstNumber, "</div>\n        ");
        }
        if (((_10 = (_9 = (_8 = this.data) === null || _8 === void 0 ? void 0 : _8.user) === null || _9 === void 0 ? void 0 : _9.profileData) === null || _10 === void 0 ? void 0 : _10.additionalDateFieldTitle)
            && ((((_13 = (_12 = (_11 = this.data) === null || _11 === void 0 ? void 0 : _11.user) === null || _12 === void 0 ? void 0 : _12.profileData) === null || _13 === void 0 ? void 0 : _13.additionalDateFieldTitle) + "").trim()).length > 0
            && ((_16 = (_15 = (_14 = this.data) === null || _14 === void 0 ? void 0 : _14.user) === null || _15 === void 0 ? void 0 : _15.profileData) === null || _16 === void 0 ? void 0 : _16.additionalDateFieldValue)
            && ((((_19 = (_18 = (_17 = this.data) === null || _17 === void 0 ? void 0 : _17.user) === null || _18 === void 0 ? void 0 : _18.profileData) === null || _19 === void 0 ? void 0 : _19.additionalDateFieldValue) + "").trim()).length > 0) {
            html += "<div class=\"f-14\" style=\"font-size: 14px;width: 100%;color:#000;\"><b>".concat(this.data.user.profileData.additionalDateFieldTitle, " : </b>").concat(this.data.user.profileData.additionalDateFieldValue, "</div>");
        }
        if (((_22 = (_21 = (_20 = this.data) === null || _20 === void 0 ? void 0 : _20.user) === null || _21 === void 0 ? void 0 : _21.profileData) === null || _22 === void 0 ? void 0 : _22.additionalInputFieldTitle)
            && ((((_25 = (_24 = (_23 = this.data) === null || _23 === void 0 ? void 0 : _23.user) === null || _24 === void 0 ? void 0 : _24.profileData) === null || _25 === void 0 ? void 0 : _25.additionalInputFieldTitle) + "").trim()).length > 0
            && ((_28 = (_27 = (_26 = this.data) === null || _26 === void 0 ? void 0 : _26.user) === null || _27 === void 0 ? void 0 : _27.profileData) === null || _28 === void 0 ? void 0 : _28.additionalInputFieldValue)
            && ((((_31 = (_30 = (_29 = this.data) === null || _29 === void 0 ? void 0 : _29.user) === null || _30 === void 0 ? void 0 : _30.profileData) === null || _31 === void 0 ? void 0 : _31.additionalInputFieldValue) + "").trim()).length > 0) {
            html += "<div class=\"f-14\" style=\"font-size: 14px;width: 100%;color:#000;\"><b>".concat(this.data.user.profileData.additionalInputFieldTitle, " : </b>").concat(this.data.user.profileData.additionalInputFieldValue, "</div>");
        }
        html += "</div>";
        html += "</div>";
        //S: div1
        html += "<div style=\"width: 50%;display:flex;flex-wrap: wrap;\">";
        if ((_32 = this.data) === null || _32 === void 0 ? void 0 : _32.invoiceNo) {
            var title = "".concat(((_33 = this.data) === null || _33 === void 0 ? void 0 : _33.isEstimate) ? 'Estimate No' : 'Invoice No');
            html +=
                "<div class=\"padding-10-new\"\n          style=\"width:33.33%;padding: 0 5px;display:flow-root;\">\n          <div class=\"f-14\" style=\"width:100%;text-align: center;color:#000;font-size: 14px;\">".concat(title, "</div>\n          <div class=\"f-14\" style=\"width:100%;text-align: center;color:#000;font-size: 14px;font-weight:bold;\">").concat((_34 = this.data) === null || _34 === void 0 ? void 0 : _34.invoiceNo, "</div>\n        </div>    \n        ");
        }
        if ((_35 = this.data) === null || _35 === void 0 ? void 0 : _35.invoiceDateStamp) {
            html +=
                "<div class=\"padding-10-new\"\n        style=\"width:33.33%;padding: 0 5px;display:flow-root;\">\n           <div class=\"f-14\" style=\"width:100%;text-align: center;color:#000;font-size: 14px;\">Bill Date</div>\n           <div class=\"f-14\" style=\"width:100%;text-align: center;color:#000;font-size: 14px;font-weight:bold\">".concat(commonTempData_1.commonTempData.dateToDDMMYYY((_36 = this.data) === null || _36 === void 0 ? void 0 : _36.invoiceDateStamp), "</div>\n         </div>    \n      ");
        }
        if (((_37 = this.data) === null || _37 === void 0 ? void 0 : _37.isEstimate) && ((_38 = this.data) === null || _38 === void 0 ? void 0 : _38.createdStamp)) {
            html +=
                "<div class=\"padding-10-new\"\n        style=\"width:33.33%;padding:0 5px;display:flow-root;\">\n           <div class=\"f-14\" style=\"width:100%;text-align: center;color:#000;font-size: 14px;\">Order Received Time</div>\n           <div class=\"f-14\" style=\"width:100%;text-align: center;color:#000;font-size: 14px;font-weight:bold\">".concat(commonTempData_1.commonTempData.dateToDDMMYYYHHMMAP((_39 = this.data) === null || _39 === void 0 ? void 0 : _39.createdStamp), "</div>\n         </div>    \n      ");
        }
        var salePurReturnBillTitle = '';
        var salePurReturnDateTitle = '';
        if ((_40 = this.data) === null || _40 === void 0 ? void 0 : _40.isPurchaseReturn) {
            salePurReturnBillTitle = 'Purchase Bill No';
            salePurReturnDateTitle = 'Purchase Bill Date';
        }
        if ((_41 = this.data) === null || _41 === void 0 ? void 0 : _41.isSaleReturn) {
            salePurReturnBillTitle = ' Sale Bill No';
            salePurReturnDateTitle = ' Sale Bill Date';
        }
        if ((((_42 = this.data) === null || _42 === void 0 ? void 0 : _42.isSaleReturn) || ((_43 = this.data) === null || _43 === void 0 ? void 0 : _43.isPurchaseReturn)) && ((_44 = this.data) === null || _44 === void 0 ? void 0 : _44.billNo)) {
            html += this.commonRightSideOfSellerDetails(salePurReturnBillTitle, (_45 = this.data) === null || _45 === void 0 ? void 0 : _45.billNo);
        }
        if (((_46 = this.data) === null || _46 === void 0 ? void 0 : _46.isPurchaseReturn) && ((_47 = this.data) === null || _47 === void 0 ? void 0 : _47.billDateStamp)) {
            html += this.commonRightSideDateFormatOfSellerDetails(salePurReturnDateTitle, (_48 = this.data) === null || _48 === void 0 ? void 0 : _48.billDateStamp);
        }
        if ((_49 = this.data) === null || _49 === void 0 ? void 0 : _49.dueDateStamp) {
            html += this.commonRightSideDateFormatOfSellerDetails('Due Date', (_50 = this.data) === null || _50 === void 0 ? void 0 : _50.dueDateStamp);
        }
        if (((_51 = this.data) === null || _51 === void 0 ? void 0 : _51.purOrderNo) && ((_52 = this.data) === null || _52 === void 0 ? void 0 : _52.purOrderNo) != ' ') {
            html += this.commonRightSideOfSellerDetails('PO No', (_53 = this.data) === null || _53 === void 0 ? void 0 : _53.purOrderNo);
        }
        if (((_54 = this.data) === null || _54 === void 0 ? void 0 : _54.challanNo) && ((_55 = this.data) === null || _55 === void 0 ? void 0 : _55.challanNo) != ' ') {
            html += this.commonRightSideOfSellerDetails('Challan No', (_56 = this.data) === null || _56 === void 0 ? void 0 : _56.challanNo);
        }
        if ((_57 = this.data) === null || _57 === void 0 ? void 0 : _57.eWayBillNo) {
            html += this.commonRightSideOfSellerDetails('E-way Bill No', (_58 = this.data) === null || _58 === void 0 ? void 0 : _58.eWayBillNo);
        }
        if ((_59 = this.data) === null || _59 === void 0 ? void 0 : _59.eWayBillDate) {
            html += this.commonRightSideDateFormatOfSellerDetails('E-way Bill Date', (_60 = this.data) === null || _60 === void 0 ? void 0 : _60.eWayBillDate);
        }
        if ((_61 = this.data) === null || _61 === void 0 ? void 0 : _61.vehicleNumber) {
            html += this.commonRightSideOfSellerDetails('Vehicle No', (_62 = this.data) === null || _62 === void 0 ? void 0 : _62.vehicleNumber);
        }
        if ((_63 = this.data) === null || _63 === void 0 ? void 0 : _63.transporterName) {
            html += this.commonRightSideOfSellerDetails('Transporter Name', (_64 = this.data) === null || _64 === void 0 ? void 0 : _64.transporterName);
        }
        if ((_65 = this.data) === null || _65 === void 0 ? void 0 : _65.deliveryDate) {
            html += this.commonRightSideDateFormatOfSellerDetails('Delivery Date', (_66 = this.data) === null || _66 === void 0 ? void 0 : _66.deliveryDate);
        }
        //E: div1
        html += "</div>";
        //section class div 
        html += "</div>";
        //wrapper div
        html += "</div>";
        html += this.partyDetails();
        html += "</div>";
        // wrapper div
        // html+=`</div>`
        //template body here
        html += this.templateBody();
        html += "</div>";
        return html;
    };
    TallyHSN.prototype.templateBody = function () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26, _27, _28;
        if (!((_b = (_a = this.data) === null || _a === void 0 ? void 0 : _a.invoiceItems) === null || _b === void 0 ? void 0 : _b.length)) {
            return '';
        }
        var html = '';
        var totalQty = 0;
        var totalCess = 0;
        var isHsn = false;
        var isMrp = false;
        var isAdditionlDateField = false;
        var isExpiryDate = false;
        var isAdditionlInputField = false;
        var additionlDateFieldTitle = '';
        var additionlInputFieldTitle = '';
        var isDiscount = false;
        var dynamicColumnCount = 0;
        var dynamicColWidthCss;
        var sellOrPurchasePrice;
        var receivedOrPaidAmt = 0;
        var hsnTableObj = {};
        for (var i = 0; i < ((_d = (_c = this.data) === null || _c === void 0 ? void 0 : _c.invoiceItems) === null || _d === void 0 ? void 0 : _d.length); i++) {
            var el = (_e = this.data) === null || _e === void 0 ? void 0 : _e.invoiceItems[i];
            hsnTableObj = this.calculationForHsnTable(el, hsnTableObj);
            if (this.data.moneyInInfo || this.data.moneyOut) {
                receivedOrPaidAmt = (((_f = this.data.moneyInInfo) === null || _f === void 0 ? void 0 : _f.amount) || ((_g = this.data.moneyOut) === null || _g === void 0 ? void 0 : _g.amount));
            }
            if ((_h = this.data) === null || _h === void 0 ? void 0 : _h.amountReceived) {
                receivedOrPaidAmt = (_j = this.data) === null || _j === void 0 ? void 0 : _j.amountReceived;
            }
            if ((el === null || el === void 0 ? void 0 : el.item) && ((el === null || el === void 0 ? void 0 : el.mrp) || ((_k = el === null || el === void 0 ? void 0 : el.item) === null || _k === void 0 ? void 0 : _k.mrp)) && (el === null || el === void 0 ? void 0 : el.sellPrice) && !((_l = this.data) === null || _l === void 0 ? void 0 : _l.isPurchase)) {
                if (!(el === null || el === void 0 ? void 0 : el.spIncTax)) {
                    //Exclusive
                    this.totalSaving += ((((el === null || el === void 0 ? void 0 : el.mrp) || ((_m = el === null || el === void 0 ? void 0 : el.item) === null || _m === void 0 ? void 0 : _m.mrp)) - (el === null || el === void 0 ? void 0 : el.sellPrice) + ((el === null || el === void 0 ? void 0 : el.discountFlat) || 0)) * (el === null || el === void 0 ? void 0 : el.quantity)) - (((el === null || el === void 0 ? void 0 : el.totalCess) || 0) + ((el === null || el === void 0 ? void 0 : el.totalTax) || 0));
                }
                else {
                    //Inclusive
                    this.totalSaving += (((el === null || el === void 0 ? void 0 : el.mrp) || ((_o = el === null || el === void 0 ? void 0 : el.item) === null || _o === void 0 ? void 0 : _o.mrp)) - (el === null || el === void 0 ? void 0 : el.sellPrice) + ((el === null || el === void 0 ? void 0 : el.discountFlat) || 0)) * (el === null || el === void 0 ? void 0 : el.quantity);
                }
            }
            else {
                if ((el === null || el === void 0 ? void 0 : el.item) && (!(el === null || el === void 0 ? void 0 : el.mrp) && !((_p = el === null || el === void 0 ? void 0 : el.item) === null || _p === void 0 ? void 0 : _p.mrp)) && (el === null || el === void 0 ? void 0 : el.sellPrice) && !((_q = this.data) === null || _q === void 0 ? void 0 : _q.isPurchase)) {
                    if (el === null || el === void 0 ? void 0 : el.totalDiscount) {
                        this.totalSaving += el === null || el === void 0 ? void 0 : el.totalDiscount;
                    }
                }
            }
            if ((el === null || el === void 0 ? void 0 : el.hsn) && !isHsn) {
                isHsn = true;
                dynamicColumnCount++;
            }
            if (((el === null || el === void 0 ? void 0 : el.mrp) || ((_r = el === null || el === void 0 ? void 0 : el.item) === null || _r === void 0 ? void 0 : _r.mrp)) && !isMrp) {
                isMrp = true;
                dynamicColumnCount++;
            }
            if (((el === null || el === void 0 ? void 0 : el.totalTax) || (el === null || el === void 0 ? void 0 : el.cess)) && !this.isTax) {
                this.isTax = true;
                dynamicColumnCount++;
            }
            if ((el === null || el === void 0 ? void 0 : el.totalDiscount) && !isDiscount) {
                isDiscount = true;
                dynamicColumnCount++;
            }
            if ((!((_s = el === null || el === void 0 ? void 0 : el.item) === null || _s === void 0 ? void 0 : _s.expiryDate) && ((el === null || el === void 0 ? void 0 : el.additionalDateFieldTitle) && (el === null || el === void 0 ? void 0 : el.additionalDateFieldValue))) && !isAdditionlDateField) {
                isAdditionlDateField = true;
                additionlDateFieldTitle = el === null || el === void 0 ? void 0 : el.additionalDateFieldTitle;
                dynamicColumnCount++;
            }
            if ((_t = el === null || el === void 0 ? void 0 : el.item) === null || _t === void 0 ? void 0 : _t.expiryDate) {
                isExpiryDate = true;
                isAdditionlDateField = false;
            }
            if ((el === null || el === void 0 ? void 0 : el.additionalInputFieldTitle) && (el === null || el === void 0 ? void 0 : el.additionalInputFieldValue) && !isAdditionlInputField) {
                isAdditionlInputField = true;
                additionlInputFieldTitle = el === null || el === void 0 ? void 0 : el.additionalInputFieldTitle;
                dynamicColumnCount++;
            }
        }
        this.finalHsnTableObj = this.addSameTaxPercentageObjs(hsnTableObj);
        if (dynamicColumnCount == 1) {
            dynamicColWidthCss = "extraColOne";
        }
        else if (dynamicColumnCount == 2) {
            dynamicColWidthCss = "extraColTwo";
        }
        else if (dynamicColumnCount == 3) {
            dynamicColWidthCss = "extraColThree";
        }
        else if (dynamicColumnCount == 4) {
            dynamicColWidthCss = "extraColFour";
        }
        var dynamicBoldCss = '';
        if (this.data.makeItemNameBold) {
            dynamicBoldCss = 'font-weight: bold;';
        }
        var bodyObj = { isHsn: isHsn, isTax: this.isTax, isMrp: isMrp, isDiscount: isDiscount, isAdditionlInputField: isAdditionlInputField, isAdditionlDateField: isAdditionlDateField };
        html += "\n      <div class=\"inv-item-list-holder-wrapper\" style=\"margin:0 !important; padding:0 !important\">\n      <div style=\"height: 1px; width: 100%;\"></div>\n      <div class=\"inv-item-list-holder\" style=\"border: 1px solid #000000;\">\n      <table style=\"width: 100%;color:#000000; text-align: center;table-layout: fixed;\">";
        html += "\n      <thead class=\"no-b-btm\"\n      style=\"background-color:#dbdaf3;border-bottom: 1px solid #000000;-webkit-print-color-adjust: exact !important;color-adjust: exact !important;\">\n        <th class=\"f-14\" style=\"font-size:14px;color:#000;text-align: center;padding:0 2px;border-top:0;border-left:0;\">#</th>\n        <th class=\"f-14\" style=\"font-size:14px;color:#000;text-align: left;width: 30%;padding:0 2px;border-top:0;text-transform: uppercase;word-break: break-word;\">Item Names</th>\n        <th class=\"f-14\" style=\"font-size:14px;color:#000;text-align: right;padding:0 2px;border-top:0;text-transform: uppercase;word-break: break-word;".concat(!isHsn ? 'display: none' : '', "\">HSN Code</th>\n        <th class=\"f-14\" style=\"font-size:14px;color:#000;text-align: right;padding:0 2px;border-top:0;text-transform: uppercase;word-break: break-word;\">Qty</th>\n        <th class=\"f-14\" style=\"font-size:14px;color:#000;text-align: right;padding:0 2px;border-top:0;text-transform: uppercase;word-break: break-word;").concat(!isAdditionlInputField ? 'display: none' : '', "\">").concat(additionlInputFieldTitle, "</th>\n        <th class=\"f-14\" style=\"font-size:14px;color:#000;text-align: right;padding:0 2px;border-top:0;text-transform: uppercase;word-break: break-word;word-break: inherit;").concat(!isExpiryDate ? 'display: none' : '', "\">Expiry Date</th>\n        <th class=\"f-14\" style=\"font-size:14px;color:#000;text-align: right;padding:0 2px;border-top:0;text-transform: uppercase;word-break: break-word;word-break: inherit;").concat(!isAdditionlDateField ? 'display: none' : '', "\">").concat(additionlDateFieldTitle, "</th>\n        <th class=\"f-14\" style=\"font-size:14px;color:#000;text-align: right;padding:0 2px;border-top:0;text-transform: uppercase;word-break: break-word;").concat(!isMrp ? 'display: none' : '', "\">MRP</th>\n        <th class=\"f-14\" style=\"font-size:14px;color:#000;text-align: right;padding:0 2px;border-top:0;text-transform: uppercase;word-break: break-word;\">\u20B9/Unit</th>\n        <th class=\"f-14\" style=\"font-size:14px;color:#000;text-align: right;padding:0 2px;border-top:0;text-transform: uppercase;word-break: break-word;").concat(!isDiscount ? 'display: none' : '', "\">Disc</th>\n        <th class=\"f-14\" style=\"font-size:14px;color:#000;text-align: right;padding:0 2px;border-top:0;text-transform: uppercase;word-break: break-word;").concat(!this.isTax ? 'display: none' : '', "\">Tax Amt</th>\n        <th  class=\"f-14\" style=\"border-right:0;font-size:14px;color:#000;text-align: right;padding:0 2px;border-top:0;text-transform: uppercase;word-break: break-word;\">Total</th>\n      </thead>\n      ");
        // close it after applying conditions
        html += "<tbody>";
        for (var i = 0; i < ((_v = (_u = this.data) === null || _u === void 0 ? void 0 : _u.invoiceItems) === null || _v === void 0 ? void 0 : _v.length); i++) {
            var el = (_w = this.data) === null || _w === void 0 ? void 0 : _w.invoiceItems[i];
            var discountPercent = commonTempData_1.commonTempData.reCalDiscountPercentage(this.data, el);
            totalQty = totalQty + (+(el === null || el === void 0 ? void 0 : el.quantity));
            totalCess = totalCess + (el === null || el === void 0 ? void 0 : el.totalCess);
            sellOrPurchasePrice = (((_x = this.data) === null || _x === void 0 ? void 0 : _x.isPurchase) ? el === null || el === void 0 ? void 0 : el.purchasePrice : el === null || el === void 0 ? void 0 : el.sellPrice) || 0;
            html += "\n        <tr>\n          <td class=\"f-14 padding-1055-new\" style=\"font-size:14px;border-left:0px;text-align: center;padding:0 2px;border-right:0;border-bottom:0;border-top: 0;vertical-align:top;\">".concat(i + 1, "</td>\n          <td class=\"f-14 padding-1055-new\"\n          style=\"font-size:14px;text-align: left;width: 30%;padding:0 2px;border-right:0;border-bottom:0;border-top: 0;").concat(dynamicBoldCss, "\">\n            ").concat((((_y = el === null || el === void 0 ? void 0 : el.item) === null || _y === void 0 ? void 0 : _y.itemName) || ''), " ").concat(((el === null || el === void 0 ? void 0 : el.variant) ? " (" + (el === null || el === void 0 ? void 0 : el.variant) + ")" : ""), "\n            <span class=\"f-10\" style=\"display: block;color: grey;font-size: 10px;\">").concat((((el === null || el === void 0 ? void 0 : el.itemDes) && el.itemDes != "0") ? el.itemDes : ''), "</span>\n            <span class=\"f-10\" style=\"display: block;color: grey;font-size: 10px;\">").concat(((el === null || el === void 0 ? void 0 : el.itemSrl) ? '(' + (el === null || el === void 0 ? void 0 : el.itemSrl) + ')' : ''), "</span>\n          </td>\n          <td class=\"f-14 padding-1055-new\" style=\"font-size:14px;vertical-align:top;text-align: right;padding:0 2px;border-right:0;border-bottom:0;border-top: 0;").concat(!isHsn ? 'display: none' : '', "\">").concat((el === null || el === void 0 ? void 0 : el.hsn) || ((_z = el === null || el === void 0 ? void 0 : el.item) === null || _z === void 0 ? void 0 : _z.hsn) || '', "</td>\n          <td class=\"f-14 padding-1055-new\" style=\"font-size:14px;vertical-align:top;text-align: right;padding:0 2px;border-right:0;border-bottom:0;border-top: 0;\">").concat(commonTempData_1.commonTempData.unitAdjuster(((el === null || el === void 0 ? void 0 : el.quantity) || 0)) + " " + ((el === null || el === void 0 ? void 0 : el.unit) || ''), "</td>\n          <td class=\"f-14 padding-1055-new\" style=\"font-size:14px;vertical-align:top;text-align: right;padding:0 2px;border-right:0;border-bottom:0;border-top: 0;").concat(!isAdditionlInputField ? 'display: none' : '', "\">").concat((el === null || el === void 0 ? void 0 : el.additionalInputFieldValue) || '', "</td>\n          <td class=\"f-14 padding-1055-new\" style=\"font-size:14px;vertical-align:top;text-align: right;padding:0 2px;border-right:0;border-bottom:0;border-top: 0;").concat(!isExpiryDate ? 'display: none' : '', "\">").concat(((_0 = el === null || el === void 0 ? void 0 : el.item) === null || _0 === void 0 ? void 0 : _0.expiryDate) ? commonTempData_1.commonTempData.dateToDDMMYYY((_1 = el === null || el === void 0 ? void 0 : el.item) === null || _1 === void 0 ? void 0 : _1.expiryDate) : '', "</td>\n          <td class=\"f-14 padding-1055-new\" style=\"font-size:14px;vertical-align:top;text-align: right;padding:0 2px;border-right:0;border-bottom:0;border-top: 0;").concat(!isAdditionlDateField ? 'display: none' : '', "\">").concat((el === null || el === void 0 ? void 0 : el.additionalDateFieldValue) || '', "</td>\n          <td class=\"f-14 padding-1055-new\" style=\"font-size:14px;vertical-align:top;text-align: right;padding:0 2px;border-right:0;border-bottom:0;border-top: 0;").concat(!isMrp ? 'display: none' : '', "\">").concat(((el === null || el === void 0 ? void 0 : el.mrp) || ((_2 = el === null || el === void 0 ? void 0 : el.item) === null || _2 === void 0 ? void 0 : _2.mrp)) || '', "</td>\n          <td class=\"f-14 padding-1055-new\" style=\"font-size:14px;vertical-align:top;text-align: right;padding:0 2px;border-right:0;border-bottom:0;border-top: 0;\">").concat(sellOrPurchasePrice, "</td>\n          <td class=\"f-14 padding-1055-new\" style=\"font-size:14px;vertical-align:top;text-align: right;padding:0 2px;border-right:0;border-bottom:0;border-top: 0;").concat(!isDiscount ? 'display: none' : '', "\">").concat(((el === null || el === void 0 ? void 0 : el.totalDiscount) ? (this.data.showTaxAndDiscAmt ? ((el === null || el === void 0 ? void 0 : el.totalDiscount) + '<br>') : '') + '(' + discountPercent + '%' + ')' : ''), "</td>\n          <td class=\"f-14 padding-1055-new\" style=\"font-size:14px;vertical-align:top;text-align: right;padding:0 2px;border-right:0;border-bottom:0;border-top: 0;").concat(!this.isTax ? 'display: none' : '', "\">\n          ").concat(((((el === null || el === void 0 ? void 0 : el.totalTax) || 0) + ((el === null || el === void 0 ? void 0 : el.totalCess) || 0)) > 0 ? (this.data.showTaxAndDiscAmt ? commonTempData_1.commonTempData.unitAdjuster(((el === null || el === void 0 ? void 0 : el.totalTax) || 0) + ((el === null || el === void 0 ? void 0 : el.totalCess) || 0)) : '') + ' (' + ((el === null || el === void 0 ? void 0 : el.taxPercentage) || 0) + ((el === null || el === void 0 ? void 0 : el.cess) ? ((el === null || el === void 0 ? void 0 : el.taxPercentage) ? '+' : '') + (el === null || el === void 0 ? void 0 : el.cess) : '') + ')%' : ''), "\n          </td>\n          <td class=\"f-14 padding-1055-new\" style=\"font-size:14px;border-right:0;vertical-align:top;text-align: right;padding:0 2px;border-right:0;border-bottom:0;border-top: 0;").concat(dynamicBoldCss, "\">").concat(el === null || el === void 0 ? void 0 : el.totalAmount, "</td>\n        </tr>\n        ");
        }
        // tbody tag closed
        html += "</tbody></table></div>";
        // wrapper div
        html += "</div>";
        var receivedOrPaid = ((_3 = this.data) === null || _3 === void 0 ? void 0 : _3.isPurchase) ? 'Paid Amount' : 'Received Amount';
        this.totalSaving = (this.totalSaving || 0) + (((_4 = this.data) === null || _4 === void 0 ? void 0 : _4.flatDiscount) || 0);
        var additionalAmount = ((_5 = this.data) === null || _5 === void 0 ? void 0 : _5.additionalAmount) ? (_6 = this.data) === null || _6 === void 0 ? void 0 : _6.additionalAmount : 0;
        var balanceAmt = +(commonTempData_1.commonTempData.unitAdjuster((_7 = this.data) === null || _7 === void 0 ? void 0 : _7.totalAmount)) - receivedOrPaidAmt;
        var discountString = "";
        if ((_8 = this.data) === null || _8 === void 0 ? void 0 : _8.flatDiscountWithInvoiceDiscount) {
            discountString = this.commonTemplatebody(__assign(__assign({}, bodyObj), { amount: (_9 = this.data) === null || _9 === void 0 ? void 0 : _9.flatDiscountWithInvoiceDiscount, title: 'Cash Discount' }), "(".concat((_10 = this.data) === null || _10 === void 0 ? void 0 : _10.flatDiscountPercentage, "%)"));
        }
        else if ((_11 = this.data) === null || _11 === void 0 ? void 0 : _11.flatDiscount) {
            discountString = this.commonTemplatebody(__assign(__assign({}, bodyObj), { amount: (_12 = this.data) === null || _12 === void 0 ? void 0 : _12.flatDiscount, title: 'Cash Discount' }), "");
        }
        html += "\n      <div class=\"inv-total-holder-wrapper\" style=\"margin:0 !important; padding:0 !important\">\n      <div style=\"height: 1px; width: 100%;\"></div>\n      ".concat(EzoAd_1.default.showAd((_13 = this.data) === null || _13 === void 0 ? void 0 : _13.fbUser), "\n      <div class=\"inv-total-holder\">\n      <table  style=\"width: 100%;color:#000000; text-align: center;table-layout: fixed;border:1px solid #000000\">\n      <thead class=\"no-b-btm border-right-0\"\n      style=\"border-bottom: 1px solid #000000;-webkit-print-color-adjust: exact !important;color-adjust: exact !important;\">\n      ").concat(this.commonTemplatebody(__assign(__assign({}, bodyObj), { title: 'Labour/Delivery Charges', amount: additionalAmount })), "\n      ").concat(discountString, "\n        <tr style=\"background-color:#dbdaf3;\">\n        <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;border-left: 0px;\"></th>\n        <th class=\"f-14 padding-5555\" style=\"font-weight:normal;font-size:14px;color:#000000;text-align: left;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;font-weight:bold;width: 30%\">Total Amount</th>\n        <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;").concat(!isHsn ? 'display: none' : '', "\"></th>\n        <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;\">").concat(commonTempData_1.commonTempData.unitAdjuster(totalQty), "</th>\n        <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;").concat(!isAdditionlInputField ? 'display: none' : '', "\"></th>\n        <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;").concat(!isExpiryDate ? 'display: none' : '', "\"></th>\n        <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;").concat(!isAdditionlDateField ? 'display: none' : '', "\"></th>\n        <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;").concat(!isMrp ? 'display: none' : '', "\"></th>\n        <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;\"></th>\n        <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;").concat(!isDiscount ? 'display: none' : '', "\">\n        ").concat((((_14 = this.data) === null || _14 === void 0 ? void 0 : _14.discountAmount) ? '' + ((_15 = this.data) === null || _15 === void 0 ? void 0 : _15.discountAmount) : ''), "\n        </th>\n        <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;").concat(!this.isTax ? 'display: none' : '', "\">\n        ").concat(((((_16 = this.data) === null || _16 === void 0 ? void 0 : _16.gstAmount) || 0) + (totalCess)) > 0 ? '' + commonTempData_1.commonTempData.unitAdjuster((((_17 = this.data) === null || _17 === void 0 ? void 0 : _17.gstAmount) || 0) + (totalCess)) : '', "\n        </th>\n        <th class=\"f-14 padding-5555\" style=\"font-weight:bold;border-right:0;border-bottom:0;font-size:14px;color:#000000;text-align: right;padding:0 2px;text-transform: uppercase;\">\n        \u20B9").concat(commonTempData_1.commonTempData.unitAdjuster((((_18 = this.data) === null || _18 === void 0 ? void 0 : _18.totalAmount) || 0)), "\n        </th>\n      </tr>\n      \n      ").concat(this.commonTemplatebody(__assign(__assign({}, bodyObj), { amount: receivedOrPaidAmt, title: receivedOrPaid, isBold: true })), "\n      ").concat(this.commonTemplatebody(__assign(__assign({}, bodyObj), { amount: balanceAmt, title: 'Balance', isBold: true })), "\n      ").concat(((_19 = this.data) === null || _19 === void 0 ? void 0 : _19.showPreviousAmount) ? this.commonTemplatebody(__assign(__assign({}, bodyObj), { amount: (((_21 = (_20 = this.data) === null || _20 === void 0 ? void 0 : _20.partyData) === null || _21 === void 0 ? void 0 : _21.ledgerCredit) || 0), title: 'Previous Balance', isBold: true })) : '', "\n      ").concat(((_22 = this.data) === null || _22 === void 0 ? void 0 : _22.showPreviousAmount) ?
            (((_23 = this.data) === null || _23 === void 0 ? void 0 : _23.isPurchase) ?
                this.commonTemplatebody(__assign(__assign({}, bodyObj), { amount: ((((_25 = (_24 = this.data) === null || _24 === void 0 ? void 0 : _24.partyData) === null || _25 === void 0 ? void 0 : _25.ledgerCredit) || 0) - balanceAmt), title: 'Total Balance', isBold: true }))
                :
                    this.commonTemplatebody(__assign(__assign({}, bodyObj), { amount: ((((_27 = (_26 = this.data) === null || _26 === void 0 ? void 0 : _26.partyData) === null || _27 === void 0 ? void 0 : _27.ledgerCredit) || 0) + balanceAmt), title: 'Total Balance', isBold: true })))
            : '', "\n      ").concat(((_28 = this.data) === null || _28 === void 0 ? void 0 : _28.billSavingsAmount) ? this.commonTemplatebody(__assign(__assign({}, bodyObj), { amount: this.totalSaving, title: 'Total Saving', isBold: true })) : '', "\n\n      </thead>\n      ");
        html += "</table></div>";
        //wrapper div
        html += "</div>";
        return html;
    };
    TallyHSN.prototype.commonTemplatebody = function (data, extraString) {
        if (!(data === null || data === void 0 ? void 0 : data.amount)) {
            return '';
        }
        var dynamicBoldCss = '';
        if (data === null || data === void 0 ? void 0 : data.isBold) {
            dynamicBoldCss = 'font-weight: bold;';
        }
        return "\n      <tr>\n      <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;border-left: 0px;\"></th>\n      <th class=\"f-14 padding-5555\" style=\"font-weight:normal;font-size:14px;color:#000000;text-align: left;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;".concat(dynamicBoldCss, ";width: 30%\">").concat(data === null || data === void 0 ? void 0 : data.title, "</th>\n      <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;").concat(!(data === null || data === void 0 ? void 0 : data.isHsn) ? 'display: none' : '', "\"></th>\n      <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;\"></th>\n      <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;").concat(!(data === null || data === void 0 ? void 0 : data.isAdditionlInputField) ? 'display: none' : '', "\"></th>\n      <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;").concat(!(data === null || data === void 0 ? void 0 : data.isAdditionlDateField) ? 'display: none' : '', "\"></th>\n      <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;").concat(!(data === null || data === void 0 ? void 0 : data.isMrp) ? 'display: none' : '', "\"></th>\n      <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;\"></th>\n      <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;").concat(!(data === null || data === void 0 ? void 0 : data.isDiscount) ? 'display: none' : '', "\"></th>\n      <th class=\"f-14 padding-5555\" style=\"font-size:14px;color:#000000;text-align: right;padding:0 2px;border-right:0;border-bottom:0;text-transform: uppercase;").concat(!(data === null || data === void 0 ? void 0 : data.isTax) ? 'display: none' : '', "\"></th>\n      <th class=\"f-14 padding-5555\" style=\"font-weight:normal;border-right:0;border-bottom:0;font-size:14px;color:#000000;text-align: right;padding:0 2px;text-transform: uppercase;").concat(dynamicBoldCss, "\">\n      \u20B9").concat(commonTempData_1.commonTempData === null || commonTempData_1.commonTempData === void 0 ? void 0 : commonTempData_1.commonTempData.unitAdjuster((data === null || data === void 0 ? void 0 : data.amount) || 0), " ").concat(extraString ? extraString : "", "\n      </th>\n      ");
    };
    TallyHSN.prototype.commonFormatBillToAndShipTo = function (text) {
        return "<div class=\"f-14\" style=\"font-size: 14px;width: 100%;color:#000;\">\n        ".concat(text, "\n      </div>");
    };
    TallyHSN.prototype.commonRightSideDateFormatOfSellerDetails = function (title, timeStamp) {
        return "\n      <div class=\"padding-10-new\"\n      style=\"width:33.33%;padding: 0 5px;display:flow-root;\">\n        <div class=\"f-14\" style=\"width:100%;text-align: center;color:#000;font-size: 14px;\">".concat(title, "</div>\n        <div class=\"f-14\" style=\"width:100%;text-align: center;color:#000;font-size: 14px;\">").concat(commonTempData_1.commonTempData.dateToDDMMYYY(timeStamp), "</div>\n      </div>    \n      ");
    };
    TallyHSN.prototype.commonRightSideOfSellerDetails = function (title, value) {
        return "\n      <div class=\"padding-10-new\"\n      style=\"width:33.33%;padding: 0 5px;display:flow-root;\">\n        <div class=\"f-14\" style=\"width:100%;text-align: center;color:#000;font-size: 14px;\">".concat(title, "</div>\n        <div class=\"f-14\" style=\"width:100%;text-align: center;color:#000;font-size: 14px;\">").concat(value, "</div>\n      </div>    \n      ");
    };
    TallyHSN.prototype.commonLeftSideOfSellerDetails = function (text) {
        return "\n      <div class=\"f-14\" style=\"font-size: 14px;color:#000;\">".concat(text, "</div>\n      ");
    };
    TallyHSN.prototype.addSameTaxPercentageObjs = function (mainObj) {
        var _a, _b;
        var sanitizedObj = {};
        var _loop_1 = function (key) {
            var holder = {};
            mainObj[key].forEach(function (d) {
                if ((d === null || d === void 0 ? void 0 : d.taxPercentage) != 0) {
                    if (holder.hasOwnProperty(d === null || d === void 0 ? void 0 : d.taxPercentage)) {
                        holder[d === null || d === void 0 ? void 0 : d.taxPercentage] = {
                            "taxAmount": (holder[d === null || d === void 0 ? void 0 : d.taxPercentage].taxAmount + (d === null || d === void 0 ? void 0 : d.taxAmount)),
                            "itemPrice": (holder[d === null || d === void 0 ? void 0 : d.taxPercentage].itemPrice + ((d === null || d === void 0 ? void 0 : d.itemPrice) * (d === null || d === void 0 ? void 0 : d.quantity)) - ((d === null || d === void 0 ? void 0 : d.isIncTax) ? d === null || d === void 0 ? void 0 : d.taxAmount : 0) - (d.discount || 0))
                        };
                    }
                    else {
                        holder[d === null || d === void 0 ? void 0 : d.taxPercentage] = {
                            "taxAmount": d === null || d === void 0 ? void 0 : d.taxAmount,
                            "itemPrice": ((d === null || d === void 0 ? void 0 : d.itemPrice) * (d === null || d === void 0 ? void 0 : d.quantity)) - ((d === null || d === void 0 ? void 0 : d.isIncTax) ? d === null || d === void 0 ? void 0 : d.taxAmount : 0) - (d.discount || 0)
                        };
                    }
                }
            });
            var array = [];
            for (var prop in holder) {
                array.push({ taxPercentage: prop, taxAmount: (_a = holder[prop]) === null || _a === void 0 ? void 0 : _a.taxAmount, taxableValue: (_b = holder[prop]) === null || _b === void 0 ? void 0 : _b.itemPrice });
            }
            if (array.length) {
                sanitizedObj[key] = array;
            }
        };
        for (var key in mainObj) {
            _loop_1(key);
        }
        return sanitizedObj;
    };
    TallyHSN.prototype.commonHsnTableCode = function (el) {
        var _a, _b;
        var isIncTax = false;
        if ((_a = this.data) === null || _a === void 0 ? void 0 : _a.isPurchase) {
            if (el === null || el === void 0 ? void 0 : el.ppIncTax) {
                isIncTax = true;
            }
        }
        else {
            if (el === null || el === void 0 ? void 0 : el.spIncTax) {
                isIncTax = true;
            }
        }
        return {
            'taxAmount': (el === null || el === void 0 ? void 0 : el.totalTax) || 0,
            'itemPrice': ((_b = this.data) === null || _b === void 0 ? void 0 : _b.isPurchase) ? el === null || el === void 0 ? void 0 : el.purchasePrice : el === null || el === void 0 ? void 0 : el.sellPrice,
            'taxPercentage': (el === null || el === void 0 ? void 0 : el.taxPercentage) || 0,
            'quantity': (el === null || el === void 0 ? void 0 : el.quantity) || 1,
            'isIncTax': isIncTax,
            'discount': (el === null || el === void 0 ? void 0 : el.totalDiscount) || 0
        };
    };
    TallyHSN.prototype.calculationForHsnTable = function (el, hsnTableObj) {
        if ((el === null || el === void 0 ? void 0 : el.hsn) || (el === null || el === void 0 ? void 0 : el.taxPercentage)) {
            if (el === null || el === void 0 ? void 0 : el.hsn) {
                if (hsnTableObj[el === null || el === void 0 ? void 0 : el.hsn]) {
                    hsnTableObj[el === null || el === void 0 ? void 0 : el.hsn].push(__assign({}, this.commonHsnTableCode(el)));
                }
                else {
                    hsnTableObj[el === null || el === void 0 ? void 0 : el.hsn] = [__assign({}, this.commonHsnTableCode(el))];
                }
            }
            else {
                if ((el === null || el === void 0 ? void 0 : el.taxPercentage) || (el === null || el === void 0 ? void 0 : el.totalAmount)) {
                    if (hsnTableObj['noHsn']) {
                        hsnTableObj['noHsn'].push(__assign({}, this.commonHsnTableCode(el)));
                    }
                    else {
                        hsnTableObj['noHsn'] = [__assign({}, this.commonHsnTableCode(el))];
                    }
                }
            }
        }
        return hsnTableObj;
    };
    TallyHSN.prototype.partyDetails = function () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2;
        var html = '';
        var el = (((_a = this.data) === null || _a === void 0 ? void 0 : _a.partyInfo.profileData) || null);
        //S: div2
        html += "\n      <div class=\"inv-bill-details-wrapper\" style=\"margin:0 !important; padding:0 !important;width: 100%;display:flex;flex-wrap: wrap;\">\n      <div style=\"height: 1px; width: 100%;\"></div>\n      <div class=\"inv-bill-details\" style=\"width: 100%;display:flex;flex-wrap: wrap;\">\n      <div class=\"padding-10-new\"\n      style=\"display:flex;width: 50%;border-right: 1px solid #000000;border-top: 1px solid #000000;padding: 0 5px;flex-wrap: wrap;\">";
        var billTitle = ((_b = this.data) === null || _b === void 0 ? void 0 : _b.isPurchase) ? 'Bill From' : 'Bill To';
        html += "<div class=\"f-14\" style=\"font-size: 14px;width: 100%;color:#000;font-weight:bold\">\n                ".concat(billTitle, ":\n           </div>\n            <button class=\"partyFetchButton f-14\" style=\"background-color: #4285f4;border-color: #4285f4;color: #ffff;border-radius: 26px;\">Fetch Latest Party Details</button>\n           ");
        if (el === null || el === void 0 ? void 0 : el.legalName) {
            html += "<div class=\"f-14\" style=\"font-size: 14px;width: 100%;color:#000;font-weight: bold;\">\n                ".concat(el === null || el === void 0 ? void 0 : el.legalName, "\n            </div>");
        }
        if ((el === null || el === void 0 ? void 0 : el.contactPersonName) == (el === null || el === void 0 ? void 0 : el.contactPersonPhone)) {
            html += this.commonFormatBillToAndShipTo(el === null || el === void 0 ? void 0 : el.contactPersonPhone);
        }
        else {
            if (el === null || el === void 0 ? void 0 : el.contactPersonName) {
                if ((el === null || el === void 0 ? void 0 : el.contactPersonName) == "Party Not Available") {
                    html += "<div class=\"f-14\" style=\"font-size: 14px;width: 100%;color:red;font-weight:bold;\">\n                      Party Has Been Deleted\n                  </div>";
                }
                else {
                    html += "<div class=\"f-14\" style=\"font-size: 14px;width: 100%;color:#000;font-weight:bold;\">\n                    ".concat(el === null || el === void 0 ? void 0 : el.contactPersonName, "\n                  </div>");
                }
            }
            if (el === null || el === void 0 ? void 0 : el.contactPersonPhone) {
                html += this.commonFormatBillToAndShipTo(el === null || el === void 0 ? void 0 : el.contactPersonPhone);
            }
        }
        if (el === null || el === void 0 ? void 0 : el.contactPersonEmail) {
            html += this.commonFormatBillToAndShipTo(el === null || el === void 0 ? void 0 : el.contactPersonEmail);
        }
        if ((el === null || el === void 0 ? void 0 : el.addressLine1) || (el === null || el === void 0 ? void 0 : el.addressState)) {
            html += this.commonFormatBillToAndShipTo("".concat((el === null || el === void 0 ? void 0 : el.addressLine1) ? el === null || el === void 0 ? void 0 : el.addressLine1 : '').concat((el === null || el === void 0 ? void 0 : el.addressState) ? ', ' + (el === null || el === void 0 ? void 0 : el.addressState) : '').concat((el === null || el === void 0 ? void 0 : el.addressPincode) ? ', ' + (el === null || el === void 0 ? void 0 : el.addressPincode) : ''));
        }
        if (((_e = (_d = (_c = this.data) === null || _c === void 0 ? void 0 : _c.partyInfo) === null || _d === void 0 ? void 0 : _d.profileData) === null || _e === void 0 ? void 0 : _e.additionalDateFieldTitle)
            && (((_h = (_g = (_f = this.data) === null || _f === void 0 ? void 0 : _f.partyInfo) === null || _g === void 0 ? void 0 : _g.profileData) === null || _h === void 0 ? void 0 : _h.additionalDateFieldTitle) + "").trim().length > 0
            && ((_l = (_k = (_j = this.data) === null || _j === void 0 ? void 0 : _j.partyInfo) === null || _k === void 0 ? void 0 : _k.profileData) === null || _l === void 0 ? void 0 : _l.additionalDateFieldValue)
            && (((_p = (_o = (_m = this.data) === null || _m === void 0 ? void 0 : _m.partyInfo) === null || _o === void 0 ? void 0 : _o.profileData) === null || _p === void 0 ? void 0 : _p.additionalDateFieldValue) + "").trim().length > 0) {
            html += "<div class=\"f-14\" style=\"font-size: 14px;width: 100%;color:#000;\"><b>".concat(this.data.partyInfo.profileData.additionalDateFieldTitle, " : </b>").concat(this.data.partyInfo.profileData.additionalDateFieldValue, "</div>");
        }
        if (((_s = (_r = (_q = this.data) === null || _q === void 0 ? void 0 : _q.partyInfo) === null || _r === void 0 ? void 0 : _r.profileData) === null || _s === void 0 ? void 0 : _s.additionalInputFieldTitle)
            && (((_v = (_u = (_t = this.data) === null || _t === void 0 ? void 0 : _t.partyInfo) === null || _u === void 0 ? void 0 : _u.profileData) === null || _v === void 0 ? void 0 : _v.additionalInputFieldTitle) + "").trim().length > 0
            && ((_y = (_x = (_w = this.data) === null || _w === void 0 ? void 0 : _w.partyInfo) === null || _x === void 0 ? void 0 : _x.profileData) === null || _y === void 0 ? void 0 : _y.additionalInputFieldValue)
            && (((_1 = (_0 = (_z = this.data) === null || _z === void 0 ? void 0 : _z.partyInfo) === null || _0 === void 0 ? void 0 : _0.profileData) === null || _1 === void 0 ? void 0 : _1.additionalInputFieldValue) + "").trim().length > 0) {
            html += "<div class=\"f-14\" style=\"font-size: 14px;width: 100%;color:#000;\"><b>".concat(this.data.partyInfo.profileData.additionalInputFieldTitle, " : </b>").concat(this.data.partyInfo.profileData.additionalInputFieldValue, "</div>");
        }
        if (el === null || el === void 0 ? void 0 : el.gstNumber) {
            html += "<div class=\"f-14\" style=\"font-size: 14px;width: 100%;color:#000;font-weight: bold;\">\n                  ".concat(el === null || el === void 0 ? void 0 : el.gstNumber, "\n              </div>");
        }
        if ((el === null || el === void 0 ? void 0 : el.udf1T) && (el === null || el === void 0 ? void 0 : el.udf1V)) {
            var text = "".concat((el === null || el === void 0 ? void 0 : el.udf1T) ? el === null || el === void 0 ? void 0 : el.udf1T : '').concat((el === null || el === void 0 ? void 0 : el.udf1V) ? ' : ' + (el === null || el === void 0 ? void 0 : el.udf1V) : '');
            html += this.commonFormatBillToAndShipTo(text);
        }
        if ((el === null || el === void 0 ? void 0 : el.udf2T) && (el === null || el === void 0 ? void 0 : el.udf2V)) {
            var text = "".concat((el === null || el === void 0 ? void 0 : el.udf2T) ? el === null || el === void 0 ? void 0 : el.udf2T : '').concat((el === null || el === void 0 ? void 0 : el.udf2V) ? ' : ' + (el === null || el === void 0 ? void 0 : el.udf2V) : '');
            html += this.commonFormatBillToAndShipTo(text);
        }
        if ((el === null || el === void 0 ? void 0 : el.udf3T) && (el === null || el === void 0 ? void 0 : el.udf3V)) {
            var text = "".concat((el === null || el === void 0 ? void 0 : el.udf3T) ? el === null || el === void 0 ? void 0 : el.udf3T : '').concat((el === null || el === void 0 ? void 0 : el.udf3V) ? ' : ' + (el === null || el === void 0 ? void 0 : el.udf3V) : '');
            html += this.commonFormatBillToAndShipTo(text);
        }
        //E:div2
        html += "</div>";
        //S:div3
        html += "<div class=\"padding-10-new\"\n      style=\"display:flex;width: 50%;border-top: 1px solid #000000;padding: 0 5px;flex-wrap: wrap;\">";
        html += "<div class=\"f-14\" style=\"font-size: 14px;width: 100%;color:#000;font-weight:bold\">\n                ".concat(((_2 = this.data) === null || _2 === void 0 ? void 0 : _2.isPurchase) ? 'Ship From' : 'Ship To', ":\n              </div>");
        if (el === null || el === void 0 ? void 0 : el.legalName) {
            html += this.commonFormatBillToAndShipTo("M/s. ".concat(el === null || el === void 0 ? void 0 : el.legalName));
        }
        if ((el === null || el === void 0 ? void 0 : el.contactPersonName) == (el === null || el === void 0 ? void 0 : el.contactPersonPhone)) {
            html += this.commonFormatBillToAndShipTo(el === null || el === void 0 ? void 0 : el.contactPersonPhone);
        }
        else {
            if (el === null || el === void 0 ? void 0 : el.contactPersonName) {
                if ((el === null || el === void 0 ? void 0 : el.contactPersonName) == "Party Not Available") {
                    html += "<div class=\"f-14\" style=\"font-size: 14px;width: 100%;color:red;font-weight:bold;\">\n                        Party Has Been Deleted\n                    </div>";
                }
                else {
                    html += "<div class=\"f-14\" style=\"font-size: 14px;width: 100%;color:#000;font-weight:bold;\">\n                      ".concat(el === null || el === void 0 ? void 0 : el.contactPersonName, "\n                    </div>");
                }
            }
            if (el === null || el === void 0 ? void 0 : el.contactPersonPhone) {
                html += this.commonFormatBillToAndShipTo(el === null || el === void 0 ? void 0 : el.contactPersonPhone);
            }
        }
        if (el === null || el === void 0 ? void 0 : el.contactPersonEmail) {
            html += this.commonFormatBillToAndShipTo(el === null || el === void 0 ? void 0 : el.contactPersonEmail);
        }
        if (el === null || el === void 0 ? void 0 : el.gstNumber) {
            html += this.commonFormatBillToAndShipTo(el === null || el === void 0 ? void 0 : el.gstNumber);
        }
        if ((el === null || el === void 0 ? void 0 : el.udf1T) && (el === null || el === void 0 ? void 0 : el.udf1V)) {
            var text = "".concat((el === null || el === void 0 ? void 0 : el.udf1T) ? el === null || el === void 0 ? void 0 : el.udf1T : '').concat((el === null || el === void 0 ? void 0 : el.udf1V) ? ' : ' + (el === null || el === void 0 ? void 0 : el.udf1V) : '');
            html += this.commonFormatBillToAndShipTo(text);
        }
        if ((el === null || el === void 0 ? void 0 : el.udf2T) && (el === null || el === void 0 ? void 0 : el.udf2V)) {
            var text = "".concat((el === null || el === void 0 ? void 0 : el.udf2T) ? el === null || el === void 0 ? void 0 : el.udf2T : '').concat((el === null || el === void 0 ? void 0 : el.udf2V) ? ' : ' + (el === null || el === void 0 ? void 0 : el.udf2V) : '');
            html += this.commonFormatBillToAndShipTo(text);
        }
        if ((el === null || el === void 0 ? void 0 : el.udf3T) && (el === null || el === void 0 ? void 0 : el.udf3V)) {
            var text = "".concat((el === null || el === void 0 ? void 0 : el.udf3T) ? el === null || el === void 0 ? void 0 : el.udf3T : '').concat((el === null || el === void 0 ? void 0 : el.udf3V) ? ' : ' + (el === null || el === void 0 ? void 0 : el.udf3V) : '');
            html += this.commonFormatBillToAndShipTo(text);
        }
        if (this.data.deliveryState || (el === null || el === void 0 ? void 0 : el.addressOneLine1) || (el === null || el === void 0 ? void 0 : el.addressOneState)) {
            var deliveryState = this.data.deliveryState || (el === null || el === void 0 ? void 0 : el.addressOneState);
            html += this.commonFormatBillToAndShipTo("".concat((el === null || el === void 0 ? void 0 : el.addressOneLine1) ? el === null || el === void 0 ? void 0 : el.addressOneLine1 : '').concat(deliveryState ? ', ' + deliveryState : '').concat((el === null || el === void 0 ? void 0 : el.addressOnePincode) ? ', ' + (el === null || el === void 0 ? void 0 : el.addressOnePincode) : ''));
        }
        //E:div3
        html += "</div>";
        //section class
        html += "</div>";
        //wrapper div
        html += "</div>";
        return html;
    };
    return TallyHSN;
}());
exports.TallyHSN = TallyHSN;
//# sourceMappingURL=tallyHSN.js.map