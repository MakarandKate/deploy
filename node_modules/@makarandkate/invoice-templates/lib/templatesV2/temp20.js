"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Temp20 = void 0;
var ReferenceData_1 = require("../utils/ReferenceData");
var commonTempData_1 = require("./commonTempData");
var Temp20 = /** @class */ (function () {
    function Temp20(data) {
        this.data = data;
        this.totalSaving = 0;
        this.includeTaxPercentHeader = false;
        this.includeHsnHeader = false;
        this.includeMrpHeader = false;
    }
    Temp20.prototype.main = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _b = (_a = "\n      <style>\n      ".concat(commonTempData_1.commonTempData.invoiceHtmlTemplateCss(), "\n      .three-inch-holder *{\n        margin:0;\n        padding:0;\n      }\n      .three-inch-holder b{\n        color:#000;\n      }\n      .three-inch-holder .text-sm{\n        font-size:8px;\n        word-break:break-all;\n      }\n      .text-3i-h1{\n        font-size:16px;\n        font-weight:700;\n        word-break:break-word;\n      }\n      .text-3i-h2{\n        font-size:14px;\n        word-break:break-all;\n      }\n      .text-3i-h3{\n        font-size:12px;\n        word-break:break-all;\n      }\n      .text-3i-p{\n        font-size:9px;\n        word-break:break-all;\n      }\n      </style>\n      <span class=\"invoice-template-main\">\n        <div \n          class=\"container-new arial three-inch-holder\"\n          style=\"width:54mm;background: white;padding: 2mm;padding-bottom: 70px;visibility: visible;-webkit-print-color-adjust: exact !important;color-adjust: exact !important;\">\n          ").concat(this.header(), "\n          ")).concat;
                        return [4 /*yield*/, this.templateBody()];
                    case 1: return [2 /*return*/, _b.apply(_a, [_c.sent(), "\n          "]).concat(this.footer(), "\n        </div>\n      </span>\n      ")];
                }
            });
        });
    };
    Temp20.prototype.header = function () {
        return "\n        ".concat(this.sellerDetails(), "\n        ").concat(this.invoiceTitle());
    };
    Temp20.prototype.footer = function () {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        var domain = '';
        var includeDukanUrl = 0;
        try {
            includeDukanUrl = ((_b = (_a = this.data) === null || _a === void 0 ? void 0 : _a.settings) === null || _b === void 0 ? void 0 : _b.include3InchOnlineDukanLink) ? 1 : 0;
        }
        catch (err) {
        }
        if (((_d = (_c = this.data) === null || _c === void 0 ? void 0 : _c.onlineDukan) === null || _d === void 0 ? void 0 : _d.domain) != "") {
            domain = (_f = (_e = this.data) === null || _e === void 0 ? void 0 : _e.onlineDukan) === null || _f === void 0 ? void 0 : _f.domain;
        }
        return "<div style=\"text-align:center\">\n        <p class=\"text-3i-h3\" style=\"text-align: justify;text-align-last: center;word-break:break-word\">".concat((((_h = (_g = this.data) === null || _g === void 0 ? void 0 : _g.extra) === null || _h === void 0 ? void 0 : _h.thermalTncTemplate) || '').replace(/\n/g, '<br/>'), "</p>\n        ").concat((domain === null || domain === void 0 ? void 0 : domain.length) > 0 && includeDukanUrl ? "\n          <p class=\"text-3i-h3\">Now Order Online @</p>\n          <p class=\"text-3i-h3\">https://".concat(domain, ".ezo.digital</p>\n        ") : '', "\n        \n      </div>\n      <div class=\"row\" style=\"margin-top:20px;\"><hr/></div>");
    };
    Temp20.prototype.templateBody = function () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, _31, _32, _33, _34, _35, _36, _37, _38, _39, _40, _41, _42, _43, _44, _45, _46, _47, _48, _49, _50, _51, _52, _53, _54, _55, _56, _57, _58, _59, _60, _61, _62, _63, _64, _65, _66, _67, _68, _69, _70, _71, _72, _73, _74, _75, _76, _77, _78, _79, _80, _81, _82, _83, _84, _85, _86, _87, _88, _89, _90, _91, _92, _93, _94, _95, _96, _97, _98, _99, _100, _101, _102, _103;
        return __awaiter(this, void 0, void 0, function () {
            var html, totalQty, receivedOrPaidAmt, totalTax, isTax, totalTaxAmt, sameState, partyInfo, secondaryPartyInfo, stateCode, profileStateCod, userState, partyState, secondaryStateCode, i, invoiceItem, htmlHeader, serviceChargeStr, profileStateCode, additionalAmount, receivedOrPaid, modeOfPayment, balanceAmt, qrCodeBase64;
            return __generator(this, function (_104) {
                switch (_104.label) {
                    case 0:
                        html = '';
                        totalQty = 0;
                        receivedOrPaidAmt = 0;
                        totalTax = 0;
                        isTax = false;
                        totalTaxAmt = 0;
                        sameState = false;
                        partyInfo = ((_c = (_b = (_a = this.data) === null || _a === void 0 ? void 0 : _a.bill) === null || _b === void 0 ? void 0 : _b.partyData) === null || _c === void 0 ? void 0 : _c.profileData) || null;
                        secondaryPartyInfo = ((_f = (_e = (_d = this.data) === null || _d === void 0 ? void 0 : _d.bill) === null || _e === void 0 ? void 0 : _e.secondaryPartyData) === null || _f === void 0 ? void 0 : _f.profileData) || null;
                        if (partyInfo && ((partyInfo === null || partyInfo === void 0 ? void 0 : partyInfo.addressState) == ((_h = (_g = this.data) === null || _g === void 0 ? void 0 : _g.profile) === null || _h === void 0 ? void 0 : _h.addressProvience))) {
                            sameState = true;
                        }
                        else if ((!(partyInfo === null || partyInfo === void 0 ? void 0 : partyInfo.addressState) || !((_k = (_j = this.data) === null || _j === void 0 ? void 0 : _j.profile) === null || _k === void 0 ? void 0 : _k.addressProvience))) {
                            sameState = true;
                        }
                        if (((_l = partyInfo === null || partyInfo === void 0 ? void 0 : partyInfo.addressOneState) === null || _l === void 0 ? void 0 : _l.length)
                            && ((_p = (_o = (_m = this.data) === null || _m === void 0 ? void 0 : _m.profile) === null || _o === void 0 ? void 0 : _o.addressProvience) === null || _p === void 0 ? void 0 : _p.length)
                            && ((_r = (_q = this.data) === null || _q === void 0 ? void 0 : _q.profile) === null || _r === void 0 ? void 0 : _r.addressProvience) != (partyInfo === null || partyInfo === void 0 ? void 0 : partyInfo.addressOneState)) {
                            sameState = false;
                        }
                        if (((_s = secondaryPartyInfo === null || secondaryPartyInfo === void 0 ? void 0 : secondaryPartyInfo.addressOneState) === null || _s === void 0 ? void 0 : _s.length)
                            && ((_v = (_u = (_t = this.data) === null || _t === void 0 ? void 0 : _t.profile) === null || _u === void 0 ? void 0 : _u.addressProvience) === null || _v === void 0 ? void 0 : _v.length)
                            && ((_x = (_w = this.data) === null || _w === void 0 ? void 0 : _w.profile) === null || _x === void 0 ? void 0 : _x.addressProvience) != (secondaryPartyInfo === null || secondaryPartyInfo === void 0 ? void 0 : secondaryPartyInfo.addressOneState)) {
                            sameState = false;
                        }
                        stateCode = (_y = partyInfo === null || partyInfo === void 0 ? void 0 : partyInfo.gstNumber) === null || _y === void 0 ? void 0 : _y.substring(0, 2);
                        profileStateCod = (_1 = (_0 = (_z = this.data) === null || _z === void 0 ? void 0 : _z.profile) === null || _0 === void 0 ? void 0 : _0.gstin) === null || _1 === void 0 ? void 0 : _1.substring(0, 2);
                        userState = (_3 = (_2 = this.data) === null || _2 === void 0 ? void 0 : _2.profile) === null || _3 === void 0 ? void 0 : _3.addressProvience;
                        partyState = (_5 = (_4 = this.data) === null || _4 === void 0 ? void 0 : _4.bill) === null || _5 === void 0 ? void 0 : _5.deliveryProvience;
                        if (stateCode && profileStateCod) {
                            sameState = stateCode != profileStateCod ? false : true;
                        }
                        else if (userState && partyState) {
                            sameState = userState != partyState ? false : true;
                        }
                        if (sameState
                            && secondaryPartyInfo
                            && (secondaryPartyInfo === null || secondaryPartyInfo === void 0 ? void 0 : secondaryPartyInfo.gstNumber)
                            && ((_6 = secondaryPartyInfo === null || secondaryPartyInfo === void 0 ? void 0 : secondaryPartyInfo.gstNumber) === null || _6 === void 0 ? void 0 : _6.length)
                            && ((_9 = (_8 = (_7 = this.data) === null || _7 === void 0 ? void 0 : _7.profile) === null || _8 === void 0 ? void 0 : _8.gstin) === null || _9 === void 0 ? void 0 : _9.length)
                            || sameState
                                && secondaryPartyInfo
                                && ((_12 = (_11 = (_10 = this.data) === null || _10 === void 0 ? void 0 : _10.bill) === null || _11 === void 0 ? void 0 : _11.deliveryProvience) === null || _12 === void 0 ? void 0 : _12.length)
                                && ((_15 = (_14 = (_13 = this.data) === null || _13 === void 0 ? void 0 : _13.profile) === null || _14 === void 0 ? void 0 : _14.addressProvience) === null || _15 === void 0 ? void 0 : _15.length)) {
                            secondaryStateCode = (_16 = secondaryPartyInfo === null || secondaryPartyInfo === void 0 ? void 0 : secondaryPartyInfo.gstNumber) === null || _16 === void 0 ? void 0 : _16.substring(0, 2);
                            if (secondaryStateCode && profileStateCod) {
                                sameState = secondaryStateCode != profileStateCod ? false : true;
                            }
                            else if (userState && partyState) {
                                sameState = userState != partyState ? false : true;
                            }
                        }
                        if (((_18 = (_17 = this.data) === null || _17 === void 0 ? void 0 : _17.bill) === null || _18 === void 0 ? void 0 : _18.gstAmount) || ((_20 = (_19 = this.data) === null || _19 === void 0 ? void 0 : _19.bill) === null || _20 === void 0 ? void 0 : _20.cessAmount)) {
                            totalTaxAmt = ((_22 = (_21 = this.data) === null || _21 === void 0 ? void 0 : _21.bill) === null || _22 === void 0 ? void 0 : _22.gstAmount) + ((_24 = (_23 = this.data) === null || _23 === void 0 ? void 0 : _23.bill) === null || _24 === void 0 ? void 0 : _24.cessAmount);
                            isTax = true;
                        }
                        if ((_26 = (_25 = this.data) === null || _25 === void 0 ? void 0 : _25.bill) === null || _26 === void 0 ? void 0 : _26.moneyIn) {
                            receivedOrPaidAmt = (((_29 = (_28 = (_27 = this.data) === null || _27 === void 0 ? void 0 : _27.bill) === null || _28 === void 0 ? void 0 : _28.moneyIn) === null || _29 === void 0 ? void 0 : _29.amount) || 0);
                        }
                        if ((_31 = (_30 = this.data) === null || _30 === void 0 ? void 0 : _30.bill) === null || _31 === void 0 ? void 0 : _31.amountReceived) {
                            receivedOrPaidAmt = (_33 = (_32 = this.data) === null || _32 === void 0 ? void 0 : _32.bill) === null || _33 === void 0 ? void 0 : _33.amountReceived;
                        }
                        for (i = 0; i < ((_36 = (_35 = (_34 = this.data) === null || _34 === void 0 ? void 0 : _34.bill) === null || _35 === void 0 ? void 0 : _35.billItems) === null || _36 === void 0 ? void 0 : _36.length); i++) {
                            invoiceItem = (_38 = (_37 = this.data) === null || _37 === void 0 ? void 0 : _37.bill) === null || _38 === void 0 ? void 0 : _38.billItems[i];
                            totalQty += invoiceItem.quantity || 0;
                            try {
                                html += this.itemRow(invoiceItem);
                            }
                            catch (err) {
                                console.error(err);
                            }
                        }
                        if (((_40 = (_39 = this.data) === null || _39 === void 0 ? void 0 : _39.bill) === null || _40 === void 0 ? void 0 : _40.totalSaving) > 0 && ((_42 = (_41 = this.data) === null || _41 === void 0 ? void 0 : _41.settings) === null || _42 === void 0 ? void 0 : _42.billSavingsAmount)) {
                            this.totalSaving = (_44 = (_43 = this.data) === null || _43 === void 0 ? void 0 : _43.bill) === null || _44 === void 0 ? void 0 : _44.totalSaving;
                        }
                        htmlHeader = "\n      <div class=\"row\">\n        <hr/>\n        <div class=\"col-xs-12\" style=\"text-align:left\">\n        <b class=\"text-3i-h3\">Item Name</b>\n        </div>\n        <div class=\"col-xs-4\" style=\"text-align:right\">\n        <b class=\"text-3i-h3\">Qty</b>\n        </div>\n        <div class=\"col-xs-4\" style=\"text-align:right\">\n        <b class=\"text-3i-h3\">Rate</b>\n        </div>\n        <div class=\"col-xs-4\" style=\"text-align:right\">\n        <b class=\"text-3i-h3\">Total</b>\n        </div>\n        <div class=\"col-xs-12\"></div>\n        <div class=\"col-xs-4\" style=\"text-align:right\">\n        <span class=\"text-sm class=\"text-3i-h3\"\">".concat(this.includeTaxPercentHeader ? 'Tax%' : '', "</span>\n        </div>\n        <div class=\"col-xs-4\" style=\"text-align:right\">\n        <span class=\"text-sm class=\"text-3i-h3\"\">").concat(this.includeMrpHeader ? 'MRP' : '', "</sapn>\n        </div>\n        <div class=\"col-xs-4\" style=\"text-align:right\">\n        <span class=\"text-sm class=\"text-3i-h3\"\">").concat(this.includeHsnHeader ? 'HSN' : '', "</span>\n        </div>\n      </div> \n      <div class=\"row\">\n        <hr/>\n      </div>\n      ");
                        html = htmlHeader + html;
                        serviceChargeStr = "";
                        if ((_46 = (_45 = this.data) === null || _45 === void 0 ? void 0 : _45.bill) === null || _46 === void 0 ? void 0 : _46.serviceChargePercentage) {
                            serviceChargeStr = "<div class=\"col-xs-12 text-3i-h3\" style=\"text-align:right\">\n        Service Charge : (".concat((_48 = (_47 = this.data) === null || _47 === void 0 ? void 0 : _47.bill) === null || _48 === void 0 ? void 0 : _48.serviceChargePercentage, "%) ").concat((_50 = (_49 = this.data) === null || _49 === void 0 ? void 0 : _49.bill) === null || _50 === void 0 ? void 0 : _50.serviceChargeAmount, "\n        </div>");
                        }
                        html += "\n        <div class=\"row\">\n          <hr/>\n          <div class=\"col-xs-6 text-3i-h3\" style=\"text-align:left\">\n          Total Items : ".concat((_53 = (_52 = (_51 = this.data) === null || _51 === void 0 ? void 0 : _51.bill) === null || _52 === void 0 ? void 0 : _52.billItems) === null || _53 === void 0 ? void 0 : _53.length, "\n          </div>\n          <div class=\"col-xs-6 text-3i-h3\" style=\"text-align:right\">\n          Total Quantity : ").concat(totalQty, "\n          </div>\n          ").concat(serviceChargeStr, "\n        </div>\n        <div class=\"row\">\n          <hr/>\n          <div class=\"col-xs-12 text-3i-h3\" style=\"text-align:right\">\n          Sub Total (without tax) : ").concat(commonTempData_1.commonTempData.unitAdjuster((_55 = (_54 = this.data) === null || _54 === void 0 ? void 0 : _54.bill) === null || _55 === void 0 ? void 0 : _55.subTotalAmount), "\n          </div>\n          ");
                        if ((_57 = (_56 = this.data) === null || _56 === void 0 ? void 0 : _56.bill) === null || _57 === void 0 ? void 0 : _57.cashDiscount) {
                            html +=
                                "<div class=\"col-xs-12 text-3i-h3\" style=\"text-align:right\">\n            Cash Discount : ".concat(commonTempData_1.commonTempData.unitAdjuster((_59 = (_58 = this.data) === null || _58 === void 0 ? void 0 : _58.bill) === null || _59 === void 0 ? void 0 : _59.cashDiscount), " (").concat((_61 = (_60 = this.data) === null || _60 === void 0 ? void 0 : _60.bill) === null || _61 === void 0 ? void 0 : _61.cashDiscountPercentage, "%)\n            </div>");
                        }
                        if (!sameState && isTax) {
                            html += this.commonTaxAndAmtDetails('IGST', commonTempData_1.commonTempData.unitAdjuster((_63 = (_62 = this.data) === null || _62 === void 0 ? void 0 : _62.bill) === null || _63 === void 0 ? void 0 : _63.gstAmount));
                        }
                        if (sameState && isTax) {
                            profileStateCode = (_66 = (_65 = (_64 = this.data) === null || _64 === void 0 ? void 0 : _64.profile) === null || _65 === void 0 ? void 0 : _65.gstin) === null || _66 === void 0 ? void 0 : _66.substring(0, 2);
                            if (ReferenceData_1.Arrays.UTSC.indexOf(profileStateCode) != -1) {
                                html += this.commonTaxAndAmtDetails('UGST', commonTempData_1.commonTempData.unitAdjuster(((_68 = (_67 = this.data) === null || _67 === void 0 ? void 0 : _67.bill) === null || _68 === void 0 ? void 0 : _68.gstAmount) / 2));
                            }
                            else {
                                html += this.commonTaxAndAmtDetails('SGST', commonTempData_1.commonTempData.unitAdjuster(((_70 = (_69 = this.data) === null || _69 === void 0 ? void 0 : _69.bill) === null || _70 === void 0 ? void 0 : _70.gstAmount) / 2));
                            }
                        }
                        if (sameState && isTax) {
                            html += this.commonTaxAndAmtDetails('CGST', commonTempData_1.commonTempData.unitAdjuster(((_72 = (_71 = this.data) === null || _71 === void 0 ? void 0 : _71.bill) === null || _72 === void 0 ? void 0 : _72.gstAmount) / 2));
                        }
                        if ((_74 = (_73 = this.data) === null || _73 === void 0 ? void 0 : _73.bill) === null || _74 === void 0 ? void 0 : _74.cessAmount) {
                            html += this.commonTaxAndAmtDetails('CESS', commonTempData_1.commonTempData.unitAdjuster((_76 = (_75 = this.data) === null || _75 === void 0 ? void 0 : _75.bill) === null || _76 === void 0 ? void 0 : _76.cessAmount));
                        }
                        if ((_78 = (_77 = this.data) === null || _77 === void 0 ? void 0 : _77.bill) === null || _78 === void 0 ? void 0 : _78.roundOffValue) {
                            html += this.commonTaxAndAmtDetails('Round off', commonTempData_1.commonTempData.unitAdjuster((_80 = (_79 = this.data) === null || _79 === void 0 ? void 0 : _79.bill) === null || _80 === void 0 ? void 0 : _80.roundOffValue));
                        }
                        html += "\n          \n          <div class=\"col-xs-12\" style=\"text-align:center\">\n          <hr/>\n            <b  class=\"text-3i-h2\">\n              Total : ".concat(commonTempData_1.commonTempData.unitAdjuster((_82 = (_81 = this.data) === null || _81 === void 0 ? void 0 : _81.bill) === null || _82 === void 0 ? void 0 : _82.totalAmount), "\n            </b>\n          <hr/>\n          </div>\n          \n          ");
                        additionalAmount = ((_84 = (_83 = this.data) === null || _83 === void 0 ? void 0 : _83.bill) === null || _84 === void 0 ? void 0 : _84.additionalAmount) || 0;
                        if (additionalAmount) {
                            html += this.commonTwoRowDetails('Labour/Delivery Charges', additionalAmount);
                        }
                        receivedOrPaid = 'Received Amount';
                        modeOfPayment = ((_87 = (_86 = (_85 = this.data) === null || _85 === void 0 ? void 0 : _85.bill) === null || _86 === void 0 ? void 0 : _86.moneyIn) === null || _87 === void 0 ? void 0 : _87.txnMode) || '';
                        if (receivedOrPaidAmt) {
                            html += this.commonTwoRowDetails(receivedOrPaid, commonTempData_1.commonTempData.unitAdjuster(receivedOrPaidAmt || 0));
                            html += "<div class=\"col-xs-9 text-3i-h3\" style=\"text-align:right\">Mode of Txn </div><div class=\"col-xs-3 text-3i-h3\" style=\"text-align:right\">".concat(modeOfPayment, "</div>");
                            if ((_90 = (_89 = (_88 = this.data) === null || _88 === void 0 ? void 0 : _88.bill) === null || _89 === void 0 ? void 0 : _89.moneyIn) === null || _90 === void 0 ? void 0 : _90.txnRef) {
                                html += "<div class=\"col-xs-12 text-3i-h3\" style=\"text-align:right\">Txn No : ".concat((_93 = (_92 = (_91 = this.data) === null || _91 === void 0 ? void 0 : _91.bill) === null || _92 === void 0 ? void 0 : _92.moneyIn) === null || _93 === void 0 ? void 0 : _93.txnRef, "</div>");
                            }
                        }
                        balanceAmt = ((((_95 = (_94 = this.data) === null || _94 === void 0 ? void 0 : _94.bill) === null || _95 === void 0 ? void 0 : _95.totalAmount) || 0) - receivedOrPaidAmt);
                        if (balanceAmt > 0.01) {
                            html += this.commonTwoRowDetails('Balance', commonTempData_1.commonTempData.unitAdjuster(balanceAmt));
                        }
                        if (((_96 = this.data) === null || _96 === void 0 ? void 0 : _96.bill.partyPreviousBalance) > 0 && ((_98 = (_97 = this.data) === null || _97 === void 0 ? void 0 : _97.bill) === null || _98 === void 0 ? void 0 : _98.billCompleteStamp)) {
                            html += this.commonTwoRowDetails('Previous Balance', commonTempData_1.commonTempData.unitAdjuster((_99 = this.data) === null || _99 === void 0 ? void 0 : _99.bill.partyPreviousBalance));
                            html += "<p class=\"text-3i-h3\" style=\"text-align:right\">as on ".concat(commonTempData_1.commonTempData.dateToDDMMYY((_101 = (_100 = this.data) === null || _100 === void 0 ? void 0 : _100.bill) === null || _101 === void 0 ? void 0 : _101.billCompleteStamp), "</p>");
                        }
                        if (this.totalSaving > 0) {
                            html += this.commonTwoRowDetails('Total saving on this bill', commonTempData_1.commonTempData.unitAdjuster(this.totalSaving));
                        }
                        html += "\n        </div>\n        <div class=\"row\">\n          <hr/>\n        </div>\n      ";
                        if (!((_102 = this.data) === null || _102 === void 0 ? void 0 : _102.qrPayLink)) return [3 /*break*/, 2];
                        return [4 /*yield*/, commonTempData_1.commonTempData.generateQR((_103 = this.data) === null || _103 === void 0 ? void 0 : _103.qrPayLink)];
                    case 1:
                        qrCodeBase64 = _104.sent();
                        html += "\n        <div style=\"width: 100%; margin: auto;\" class=\"m-l-neg-10 m-l-neg-2\">\n          <img style=\"width: 100%;\" src=\"".concat(qrCodeBase64, "\">\n        </div>");
                        _104.label = 2;
                    case 2: return [2 /*return*/, html];
                }
            });
        });
    };
    Temp20.prototype.commonTwoRowDetails = function (title, value) {
        return "\n          <div class=\"col-xs-9\" style=\"text-align:right\">".concat(title, "</div>\n          <div class=\"col-xs-3\" style=\"text-align:right\">").concat(value, "</div>\n      ");
    };
    Temp20.prototype.commonTaxAndAmtDetails = function (title, value) {
        return "\n          <div class=\"col-xs-9 text-3i-h3\" style=\"text-align:right\">".concat(title, "</div>\n          <div class=\"col-xs-3 text-3i-h3\" style=\"text-align:right\">").concat(value, "</div>\n      ");
    };
    Temp20.prototype.itemRow = function (invoiceItem) {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        if (!(((_b = (_a = this.data) === null || _a === void 0 ? void 0 : _a.settings) === null || _b === void 0 ? void 0 : _b.pSetTaxMrpHsnPrintStatus) === false) && (invoiceItem === null || invoiceItem === void 0 ? void 0 : invoiceItem.taxPercentage)) {
            this.includeTaxPercentHeader = true;
        }
        if (!(((_d = (_c = this.data) === null || _c === void 0 ? void 0 : _c.settings) === null || _d === void 0 ? void 0 : _d.pSetTaxMrpHsnPrintStatus) === false) && ((invoiceItem === null || invoiceItem === void 0 ? void 0 : invoiceItem.mrp) || ((_e = invoiceItem === null || invoiceItem === void 0 ? void 0 : invoiceItem.item) === null || _e === void 0 ? void 0 : _e.mrp))) {
            this.includeMrpHeader = true;
        }
        if (!(((_g = (_f = this.data) === null || _f === void 0 ? void 0 : _f.settings) === null || _g === void 0 ? void 0 : _g.pSetTaxMrpHsnPrintStatus) === false) && (invoiceItem === null || invoiceItem === void 0 ? void 0 : invoiceItem.hsn)) {
            this.includeHsnHeader = true;
        }
        return "\n      <div class=\"row\">\n        <div class=\"col-xs-12 text-3i-h3\" style=\"text-align:left\">\n          ".concat((_h = invoiceItem === null || invoiceItem === void 0 ? void 0 : invoiceItem.item) === null || _h === void 0 ? void 0 : _h.itemName, "\n          <p style=\"word-wrap: break-word;\">").concat(((((invoiceItem === null || invoiceItem === void 0 ? void 0 : invoiceItem.itemDes) && invoiceItem.itemDes != "0") ? invoiceItem.itemDes : '') + '').substring(0, 100), "</p>\n          <p style=\"word-wrap: break-word;\">").concat(((invoiceItem === null || invoiceItem === void 0 ? void 0 : invoiceItem.itemSrl) ? '(' + invoiceItem.itemSrl + ')' : ''), "</p>\n        </div>\n        <div class=\"col-xs-4 text-3i-h3\" style=\"text-align:right\">\n          ").concat(invoiceItem === null || invoiceItem === void 0 ? void 0 : invoiceItem.quantity, "\n        </div>\n        <div class=\"col-xs-4 text-3i-h3\" style=\"text-align:right\">\n          ").concat(invoiceItem === null || invoiceItem === void 0 ? void 0 : invoiceItem.price, "\n        </div>\n        <div class=\"col-xs-4 text-3i-h3\" style=\"text-align:right\">\n          ").concat(commonTempData_1.commonTempData.unitAdjuster(invoiceItem === null || invoiceItem === void 0 ? void 0 : invoiceItem.total), "\n        </div>\n        <div class=\"col-xs-12 text-3i-h3\" style=\"text-align:left\">\n          ").concat((invoiceItem === null || invoiceItem === void 0 ? void 0 : invoiceItem.totalDiscount) ? ' Discount : Rs ' + commonTempData_1.commonTempData.unitAdjuster(invoiceItem === null || invoiceItem === void 0 ? void 0 : invoiceItem.totalDiscount) : '', "\n        </div>\n        <div class=\"col-xs-4 text-3i-h3\" style=\"text-align:right\">\n          <span class=\"text-sm\">").concat(this.includeTaxPercentHeader ? ((invoiceItem === null || invoiceItem === void 0 ? void 0 : invoiceItem.taxPercentage) ? commonTempData_1.commonTempData.unitAdjuster(invoiceItem === null || invoiceItem === void 0 ? void 0 : invoiceItem.taxPercentage) + "%" : '') : '', "</span>\n        </div>\n        <div class=\"col-xs-4 text-3i-h3\" style=\"text-align:right\">\n          <span class=\"text-sm\">").concat(this.includeMrpHeader ? ((invoiceItem === null || invoiceItem === void 0 ? void 0 : invoiceItem.mrp) || ((_j = invoiceItem === null || invoiceItem === void 0 ? void 0 : invoiceItem.item) === null || _j === void 0 ? void 0 : _j.mrp) || '') : '', "</span>\n        </div>\n        <div class=\"col-xs-4 text-3i-h3\" style=\"text-align:right\">\n          <span class=\"text-sm\">").concat(this.includeHsnHeader ? ((invoiceItem === null || invoiceItem === void 0 ? void 0 : invoiceItem.hsn) || '') : '', "</span>\n        </div>\n      </div>\n      ");
    };
    Temp20.prototype.sellerDetails = function () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4;
        var html = '';
        if ((_b = (_a = this.data) === null || _a === void 0 ? void 0 : _a.profile) === null || _b === void 0 ? void 0 : _b.logoLink) {
            html += "\n          <div style=\"display: flow-root;width: 100%;\">\n            <img src=\"".concat((_d = (_c = this.data) === null || _c === void 0 ? void 0 : _c.profile) === null || _d === void 0 ? void 0 : _d.logoLink, "\" style=\"display: block;margin:auto;width:100px;height: 100px; max-width: none !important;\">\n          </div>\n          ");
        }
        var sellerProfileData = (_e = this.data) === null || _e === void 0 ? void 0 : _e.profile;
        html += "<div style=\"text-align:center\">\n          <h3 class=\"text-3i-h1\">".concat(((_g = (_f = this.data) === null || _f === void 0 ? void 0 : _f.profile) === null || _g === void 0 ? void 0 : _g.legalName) || '', "</h3>\n          <p class=\"text-3i-h3\">").concat((sellerProfileData === null || sellerProfileData === void 0 ? void 0 : sellerProfileData.addressLine1) || '').concat((sellerProfileData === null || sellerProfileData === void 0 ? void 0 : sellerProfileData.addressProvience) ? ', ' + (sellerProfileData === null || sellerProfileData === void 0 ? void 0 : sellerProfileData.addressProvience) : '').concat((sellerProfileData === null || sellerProfileData === void 0 ? void 0 : sellerProfileData.addressPostalCode) ? ', ' + (sellerProfileData === null || sellerProfileData === void 0 ? void 0 : sellerProfileData.addressPostalCode) : '', "</p>\n          <p class=\"text-3i-h3\">").concat((((_j = (_h = this.data) === null || _h === void 0 ? void 0 : _h.profile) === null || _j === void 0 ? void 0 : _j.contactPersonPhone) && ((_l = (_k = this.data) === null || _k === void 0 ? void 0 : _k.profile) === null || _l === void 0 ? void 0 : _l.contactPersonPhone) != '0') ? 'Phone: ' + ((_o = (_m = this.data) === null || _m === void 0 ? void 0 : _m.profile) === null || _o === void 0 ? void 0 : _o.contactPersonPhone) : '', "</p>\n          <p class=\"text-3i-h3\">").concat(((_q = (_p = this.data) === null || _p === void 0 ? void 0 : _p.profile) === null || _q === void 0 ? void 0 : _q.contactPersonEmail) ? 'Email: ' + ((_s = (_r = this.data) === null || _r === void 0 ? void 0 : _r.profile) === null || _s === void 0 ? void 0 : _s.contactPersonEmail) : '', "</p>\n          <p class=\"text-3i-h3\" style=\"word-break:break-word\">").concat(((_u = (_t = this.data) === null || _t === void 0 ? void 0 : _t.profile) === null || _u === void 0 ? void 0 : _u.gstin) ? 'GST Number : ' + ((_w = (_v = this.data) === null || _v === void 0 ? void 0 : _v.profile) === null || _w === void 0 ? void 0 : _w.gstin) : '', "</p>\n          <p class=\"text-3i-h3\" style=\"word-break:break-word\">").concat(((_y = (_x = this.data) === null || _x === void 0 ? void 0 : _x.profile) === null || _y === void 0 ? void 0 : _y.fssaiNumber) ? 'FSSAI No. : ' + ((_0 = (_z = this.data) === null || _z === void 0 ? void 0 : _z.profile) === null || _0 === void 0 ? void 0 : _0.fssaiNumber) : '', "</p>\n          <p class=\"text-3i-h3\" style=\"word-break:break-word\">").concat(((_2 = (_1 = this.data) === null || _1 === void 0 ? void 0 : _1.profile) === null || _2 === void 0 ? void 0 : _2.licenseNumber) ? 'License No. : ' + ((_4 = (_3 = this.data) === null || _3 === void 0 ? void 0 : _3.profile) === null || _4 === void 0 ? void 0 : _4.licenseNumber) : '', "</p>\n        </div>");
        return html;
    };
    Temp20.prototype.invoiceTitle = function () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, _31, _32, _33, _34, _35, _36, _37, _38, _39, _40, _41, _42, _43, _44, _45, _46, _47, _48, _49, _50, _51, _52;
        var party = ((_c = (_b = (_a = this.data) === null || _a === void 0 ? void 0 : _a.bill) === null || _b === void 0 ? void 0 : _b.partyData) === null || _c === void 0 ? void 0 : _c.profileData) || null;
        var isBillDateDiff = commonTempData_1.commonTempData.isBillDateDiff((_e = (_d = this.data) === null || _d === void 0 ? void 0 : _d.bill) === null || _e === void 0 ? void 0 : _e.createdStamp, (_g = (_f = this.data) === null || _f === void 0 ? void 0 : _f.bill) === null || _g === void 0 ? void 0 : _g.billDateStamp);
        var html = "\n        <div class=\"row\">\n          <hr/>\n          <div class=\"col-xs-12 text-3i-h2\">\n           <b>Bill No</b>: ".concat(((_j = (_h = this.data) === null || _h === void 0 ? void 0 : _h.bill) === null || _j === void 0 ? void 0 : _j.billNo) || '', "\n          </div>\n          <div class=\"col-xs-12 text-3i-h2\">\n            <b>Created On</b>:<p>").concat(((_l = (_k = this.data) === null || _k === void 0 ? void 0 : _k.bill) === null || _l === void 0 ? void 0 : _l.createdStamp) ? commonTempData_1.commonTempData.dateToDDMMYYHHMMAP((_o = (_m = this.data) === null || _m === void 0 ? void 0 : _m.bill) === null || _o === void 0 ? void 0 : _o.billCompleteStamp) : '', "</p>\n          </div>\n          ").concat(isBillDateDiff ? "\n            <div class=\"col-xs-12 text-3i-h2\">\n              <b>Date</b>:".concat(((_q = (_p = this.data) === null || _p === void 0 ? void 0 : _p.bill) === null || _q === void 0 ? void 0 : _q.billDateStamp) ? commonTempData_1.commonTempData.dateToDDMMYY((_s = (_r = this.data) === null || _r === void 0 ? void 0 : _r.bill) === null || _s === void 0 ? void 0 : _s.billDateStamp) : '', "\n            </div>          \n          ") : '', "\n\n          <div class=\"col-xs-12 text-3i-h2\">\n            ").concat(((_u = (_t = this.data) === null || _t === void 0 ? void 0 : _t.bill) === null || _u === void 0 ? void 0 : _u.dueDateStamp) && ((_w = (_v = this.data) === null || _v === void 0 ? void 0 : _v.bill) === null || _w === void 0 ? void 0 : _w.dueDateStamp) > 0 ? "<b>Due On</b>: ".concat(commonTempData_1.commonTempData.dateToDDMMYY((_y = (_x = this.data) === null || _x === void 0 ? void 0 : _x.bill) === null || _y === void 0 ? void 0 : _y.dueDateStamp)) : '', "\n          </div>\n        </div>\n        <div class=\"row\">\n          <hr/>\n          <div class=\"col-xs-12 text-3i-h2\">\n            <b>Bill To</b> : ").concat(party === null || party === void 0 ? void 0 : party.contactPersonName).concat((party === null || party === void 0 ? void 0 : party.contactPersonPhone) ? ' <hr/> ' + (party === null || party === void 0 ? void 0 : party.contactPersonPhone) : '', "\n            ").concat(((_0 = (_z = this.data) === null || _z === void 0 ? void 0 : _z.bill) === null || _0 === void 0 ? void 0 : _0.isPartyDeleted) ? "<hr/><p class='text-danger'>Party Has Been Deleted</p>" : "", "\n            ").concat((party === null || party === void 0 ? void 0 : party.gstNumber) ? "<hr/>" + (party === null || party === void 0 ? void 0 : party.gstNumber) + "<hr/>" : '', "\n          </div>\n          ");
        if (party === null || party === void 0 ? void 0 : party.addressLine1) {
            html += "<div class=\"col-xs-12 text-3i-h2\">\n            Address : ".concat((party === null || party === void 0 ? void 0 : party.addressLine1) ? party === null || party === void 0 ? void 0 : party.addressLine1 : '', " ").concat((party === null || party === void 0 ? void 0 : party.addressState) ? ', ' + (party === null || party === void 0 ? void 0 : party.addressState) : '').concat((party === null || party === void 0 ? void 0 : party.addressPincode) ? ', ' + (party === null || party === void 0 ? void 0 : party.addressPincode) : '', "\n          </div>");
        }
        if ((_4 = (_3 = (_2 = (_1 = this.data) === null || _1 === void 0 ? void 0 : _1.bill) === null || _2 === void 0 ? void 0 : _2.secondaryPartyData) === null || _3 === void 0 ? void 0 : _3.profileData) === null || _4 === void 0 ? void 0 : _4.contactPersonName) {
            html += "\n              <div class=\"col-xs-12 text-3i-h2\">\n                Bill To : ".concat((_8 = (_7 = (_6 = (_5 = this.data) === null || _5 === void 0 ? void 0 : _5.bill) === null || _6 === void 0 ? void 0 : _6.secondaryPartyData) === null || _7 === void 0 ? void 0 : _7.profileData) === null || _8 === void 0 ? void 0 : _8.contactPersonName).concat(((_12 = (_11 = (_10 = (_9 = this.data) === null || _9 === void 0 ? void 0 : _9.bill) === null || _10 === void 0 ? void 0 : _10.secondaryPartyData) === null || _11 === void 0 ? void 0 : _11.profileData) === null || _12 === void 0 ? void 0 : _12.contactPersonPhone) ? ' <hr/> ' + ((_16 = (_15 = (_14 = (_13 = this.data) === null || _13 === void 0 ? void 0 : _13.bill) === null || _14 === void 0 ? void 0 : _14.secondaryPartyData) === null || _15 === void 0 ? void 0 : _15.profileData) === null || _16 === void 0 ? void 0 : _16.contactPersonPhone) : '', "\n                ").concat(((_20 = (_19 = (_18 = (_17 = this.data) === null || _17 === void 0 ? void 0 : _17.bill) === null || _18 === void 0 ? void 0 : _18.secondaryPartyData) === null || _19 === void 0 ? void 0 : _19.profileData) === null || _20 === void 0 ? void 0 : _20.gstNumber) ? "<hr/>" + ((_24 = (_23 = (_22 = (_21 = this.data) === null || _21 === void 0 ? void 0 : _21.bill) === null || _22 === void 0 ? void 0 : _22.secondaryPartyData) === null || _23 === void 0 ? void 0 : _23.profileData) === null || _24 === void 0 ? void 0 : _24.gstNumber) + "<hr/>" : '', "\n              \n              </div>\n            ");
        }
        if ((_28 = (_27 = (_26 = (_25 = this.data) === null || _25 === void 0 ? void 0 : _25.bill) === null || _26 === void 0 ? void 0 : _26.secondaryPartyData) === null || _27 === void 0 ? void 0 : _27.profileData) === null || _28 === void 0 ? void 0 : _28.addressLine1) {
            html += "\n              <div class=\"col-xs-12 text-3i-h2\">\n                Address : ".concat(((_32 = (_31 = (_30 = (_29 = this.data) === null || _29 === void 0 ? void 0 : _29.bill) === null || _30 === void 0 ? void 0 : _30.secondaryPartyData) === null || _31 === void 0 ? void 0 : _31.profileData) === null || _32 === void 0 ? void 0 : _32.addressLine1) ? (_36 = (_35 = (_34 = (_33 = this.data) === null || _33 === void 0 ? void 0 : _33.bill) === null || _34 === void 0 ? void 0 : _34.secondaryPartyData) === null || _35 === void 0 ? void 0 : _35.profileData) === null || _36 === void 0 ? void 0 : _36.addressLine1 : '', " ").concat(((_40 = (_39 = (_38 = (_37 = this.data) === null || _37 === void 0 ? void 0 : _37.bill) === null || _38 === void 0 ? void 0 : _38.secondaryPartyData) === null || _39 === void 0 ? void 0 : _39.profileData) === null || _40 === void 0 ? void 0 : _40.addressState) ? ', ' + ((_44 = (_43 = (_42 = (_41 = this.data) === null || _41 === void 0 ? void 0 : _41.bill) === null || _42 === void 0 ? void 0 : _42.secondaryPartyData) === null || _43 === void 0 ? void 0 : _43.profileData) === null || _44 === void 0 ? void 0 : _44.addressState) : '').concat(((_48 = (_47 = (_46 = (_45 = this.data) === null || _45 === void 0 ? void 0 : _45.bill) === null || _46 === void 0 ? void 0 : _46.secondaryPartyData) === null || _47 === void 0 ? void 0 : _47.profileData) === null || _48 === void 0 ? void 0 : _48.addressPincode) ? ', ' + ((_52 = (_51 = (_50 = (_49 = this.data) === null || _49 === void 0 ? void 0 : _49.bill) === null || _50 === void 0 ? void 0 : _50.secondaryPartyData) === null || _51 === void 0 ? void 0 : _51.profileData) === null || _52 === void 0 ? void 0 : _52.addressPincode) : '', "\n              </div>\n            ");
        }
        html += "\n        </div>\n        <div class=\"row\">\n        <hr/>\n        </div>\n      ";
        return html;
    };
    Temp20.prototype.commonDateFormat = function (dateName, timeStamp) {
        return "\n        <div\n          style=\"display: flow-root;font-weight: bold;color: #000;width: 50%;float: left;\"\n          class=\"f-14 f-b m-5 text-3i-h2\">\n            ".concat(dateName, " :\n          </div>\n\n          <div\n          style=\"display: flow-root;color: #000;width: 50%;float: left;text-align: right;\"\n          class=\"f-14 m-5 text-3i-h2\">\n             ").concat(commonTempData_1.commonTempData.dateToDDMMYY(timeStamp), "\n        </div>\n      ");
    };
    return Temp20;
}());
exports.Temp20 = Temp20;
//# sourceMappingURL=temp20.js.map