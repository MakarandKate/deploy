import express from "express";
import * as expressHbs from "express-handlebars";
import path from "path";
import { Sms } from "./sms";
import { WhatsApp, WhatsappAccountType, WhatsappVendor } from "./whatsapp";

const app = express();

const hbs = expressHbs.create({
	helpers: {},
	defaultLayout: "layout",
	partialsDir: ["src/views/partials"],
	extname: ".hbs",
});

app.engine(".hbs", hbs.engine);
app.set("view engine", ".hbs");

const viewsDir = path.join(__dirname, "views");
app.set("views", viewsDir);
const staticDir = path.join(__dirname, "public");
app.use(express.static(staticDir));
app.get('/',async (req,res)=>{
	WhatsApp.sendTransactionalMessageRotatory({
		accountType:WhatsappAccountType.sales,
		vendor:WhatsappVendor.sobot,
		phone:'7588763862',
		templateIds:['z91_machine_demo'],
		bodyValues:['1'],
		headerValues:['https://s3.ap-south-1.amazonaws.com/assets.sobot.in/114844591702185/None/videos/template-verification/Z91.mp4'],
		buttonValues:{}
	})
	res.send('Boo');
})

app.listen(9000, () => {
    console.log('Server started on port: ' + 9000);  
});